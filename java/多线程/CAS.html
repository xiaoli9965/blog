<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>é”æœºåˆ¶ &amp; CAS | I&#39;m Alex</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="123">
    
    <link rel="preload" href="/blog/assets/css/0.styles.f9dc4244.css" as="style"><link rel="preload" href="/blog/assets/js/app.0c328148.js" as="script"><link rel="preload" href="/blog/assets/js/2.ef27732c.js" as="script"><link rel="preload" href="/blog/assets/js/22.771705d3.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.4fc174d0.js"><link rel="prefetch" href="/blog/assets/js/11.4b9e5083.js"><link rel="prefetch" href="/blog/assets/js/12.8c45d22b.js"><link rel="prefetch" href="/blog/assets/js/13.a7706ab2.js"><link rel="prefetch" href="/blog/assets/js/14.9e9431ac.js"><link rel="prefetch" href="/blog/assets/js/15.191a76b5.js"><link rel="prefetch" href="/blog/assets/js/16.ade73102.js"><link rel="prefetch" href="/blog/assets/js/17.455cea14.js"><link rel="prefetch" href="/blog/assets/js/18.cf9594d9.js"><link rel="prefetch" href="/blog/assets/js/19.bdb0a3c4.js"><link rel="prefetch" href="/blog/assets/js/20.fd4b444e.js"><link rel="prefetch" href="/blog/assets/js/21.01379a95.js"><link rel="prefetch" href="/blog/assets/js/23.00e498db.js"><link rel="prefetch" href="/blog/assets/js/24.02bc0deb.js"><link rel="prefetch" href="/blog/assets/js/25.1bb2541a.js"><link rel="prefetch" href="/blog/assets/js/26.970f0106.js"><link rel="prefetch" href="/blog/assets/js/27.9e87a29d.js"><link rel="prefetch" href="/blog/assets/js/28.c97a693d.js"><link rel="prefetch" href="/blog/assets/js/29.9963f0cf.js"><link rel="prefetch" href="/blog/assets/js/3.e2e3b0e7.js"><link rel="prefetch" href="/blog/assets/js/30.afb8e3c4.js"><link rel="prefetch" href="/blog/assets/js/31.ac96d13a.js"><link rel="prefetch" href="/blog/assets/js/32.91959568.js"><link rel="prefetch" href="/blog/assets/js/33.bc02d183.js"><link rel="prefetch" href="/blog/assets/js/34.9f4bdea4.js"><link rel="prefetch" href="/blog/assets/js/35.85cd64bd.js"><link rel="prefetch" href="/blog/assets/js/36.9efafaae.js"><link rel="prefetch" href="/blog/assets/js/37.13f25b82.js"><link rel="prefetch" href="/blog/assets/js/38.7f91a217.js"><link rel="prefetch" href="/blog/assets/js/39.15f7b5b6.js"><link rel="prefetch" href="/blog/assets/js/4.108b56bf.js"><link rel="prefetch" href="/blog/assets/js/40.07a706de.js"><link rel="prefetch" href="/blog/assets/js/41.a9ad9f4f.js"><link rel="prefetch" href="/blog/assets/js/5.e004f495.js"><link rel="prefetch" href="/blog/assets/js/6.59736120.js"><link rel="prefetch" href="/blog/assets/js/7.ce721f24.js"><link rel="prefetch" href="/blog/assets/js/8.e707e9a2.js"><link rel="prefetch" href="/blog/assets/js/9.9f7d8719.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.f9dc4244.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/logo.png" alt="I'm Alex" class="logo"> <span class="site-name can-hide">I'm Alex</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java â˜•ï¸" class="dropdown-title"><span class="title">Java â˜•ï¸</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java â˜•ï¸" class="mobile-dropdown-title"><span class="title">Java â˜•ï¸</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          åŸºç¡€
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/java/åŸºç¡€/ConcurrentHashMap.html" class="nav-link">
  ConcurrentHashMap
</a></li><li class="dropdown-subitem"><a href="/blog/java/åŸºç¡€/hashmap.html" class="nav-link">
  HashMap
</a></li><li class="dropdown-subitem"><a href="/blog/java/åŸºç¡€/exception.html" class="nav-link">
  Exception
</a></li></ul></li><li class="dropdown-item"><h4>
          è™šæ‹Ÿæœº
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/java/jvm/å†…å­˜æ¨¡å‹.html" class="nav-link">
  å†…å­˜æ¨¡å‹
</a></li><li class="dropdown-subitem"><a href="/blog/java/jvm/åƒåœ¾å›æ”¶.html" class="nav-link">
  åƒåœ¾å›æ”¶
</a></li><li class="dropdown-subitem"><a href="/blog/java/jvm/ç±»åŠ è½½æœºåˆ¶.html" class="nav-link">
  ç±»åŠ è½½æœºåˆ¶
</a></li><li class="dropdown-subitem"><a href="/blog/java/jvm/æŠ„ä½œä¸š.html" class="nav-link">
  æŠ„ä½œä¸š
</a></li></ul></li><li class="dropdown-item"><h4>
          å¤šçº¿ç¨‹
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/java/å¤šçº¿ç¨‹/å¤šçº¿ç¨‹åŸºç¡€.html" class="nav-link">
  å¤šçº¿ç¨‹åŸºç¡€
</a></li><li class="dropdown-subitem"><a href="/blog/java/å¤šçº¿ç¨‹/CAS.html" class="nav-link">
  CAS
</a></li><li class="dropdown-subitem"><a href="/blog/java/å¤šçº¿ç¨‹/reentrantLock.html" class="nav-link">
  ReentrantLock
</a></li><li class="dropdown-subitem"><a href="/blog/java/å¤šçº¿ç¨‹/synchornized.html" class="nav-link">
  Synchornized
</a></li><li class="dropdown-subitem"><a href="/blog/java/å¤šçº¿ç¨‹/volatile.html" class="nav-link">
  Volatile
</a></li></ul></li><li class="dropdown-item"><h4>
          Nio
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/java/Nio/01_nioå¤šè·¯å¤ç”¨.html" class="nav-link">
  æ“ä½œç³»ç»Ÿçš„å¤šè·¯å¤ç”¨
</a></li><li class="dropdown-subitem"><a href="/blog/java/Nio/02_NIO&amp;Netty.html" class="nav-link">
  Java NIO
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ•°æ®åº“" class="dropdown-title"><span class="title">æ•°æ®åº“</span> <span class="arrow down"></span></button> <button type="button" aria-label="æ•°æ®åº“" class="mobile-dropdown-title"><span class="title">æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          MySql
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/MYSQL/01.html" class="nav-link">
  01
</a></li><li class="dropdown-subitem"><a href="/blog/MYSQL/02.html" class="nav-link">
  02
</a></li><li class="dropdown-subitem"><a href="/blog/MYSQL/03.html" class="nav-link">
  03
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="åˆ†å¸ƒå¼" class="dropdown-title"><span class="title">åˆ†å¸ƒå¼</span> <span class="arrow down"></span></button> <button type="button" aria-label="åˆ†å¸ƒå¼" class="mobile-dropdown-title"><span class="title">åˆ†å¸ƒå¼</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          MQ
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/mq/rabbit.html" class="nav-link">
  Rabbit
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/mq/rocket.html" class="nav-link">
  Rocket
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/mq/æŠ„ä½œä¸š.html" class="nav-link">
  æŠ„ä½œä¸š
</a></li></ul></li><li class="dropdown-item"><h4>
          Redis
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/redis/01_åŸºç¡€.html" class="nav-link">
  åŸºç¡€
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/redis/02_è¿›é˜¶.html" class="nav-link">
  è¿›é˜¶
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/redis/03_é›†ç¾¤.html" class="nav-link">
  é›†ç¾¤
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/redis/04_6ç‰ˆæœ¬.html" class="nav-link">
  6ç‰ˆæœ¬
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/redis/czy.html" class="nav-link">
  æŠ„ä½œä¸š
</a></li></ul></li><li class="dropdown-item"><h4>
          Zookeeper
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/zk/zk.html" class="nav-link">
  Zookeeper
</a></li></ul></li><li class="dropdown-item"><h4>
          åˆ†å¸ƒå¼ä¸€è‡´æ€§æ–¹æ¡ˆ
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/åˆ†å¸ƒå¼ä¸€è‡´æ€§/paxos.html" class="nav-link">
  Paxos
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/åˆ†å¸ƒå¼ä¸€è‡´æ€§/zookeeper.html" class="nav-link">
  Zookeeper
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/åˆ†å¸ƒå¼ä¸€è‡´æ€§/åˆ†å¸ƒå¼äº‹åŠ¡.html" class="nav-link">
  åˆ†å¸ƒå¼äº‹åŠ¡
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/åˆ†å¸ƒå¼ä¸€è‡´æ€§/åˆ†å¸ƒå¼é”.html" class="nav-link">
  åˆ†å¸ƒå¼é”
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ”—" class="dropdown-title"><span class="title">ğŸ”—</span> <span class="arrow down"></span></button> <button type="button" aria-label="ğŸ”—" class="mobile-dropdown-title"><span class="title">ğŸ”—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.injdk.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JDKä¸‹è½½
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><h4>
          æ¡†æ¶æ–‡æ¡£
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://mp.baomidou.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MyBatis-Plus
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://seata.io/zh-cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Alibaba Seata
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/alibaba/Sentinel/wiki/%E4%BB%8B%E7%BB%8D" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Alibaba Sentinel
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://nacos.io/zh-cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Alibaba Nacos
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://dubbo.apache.org/zh-cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Apache Dubbo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://skywalking.apache.org/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Apache SkyWalking
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          å‰ç«¯æ¡†æ¶
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://cn.vuejs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://element.eleme.cn/#/zh-CN" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Element UI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://react.docschina.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  React
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://ant.design/docs/react/introduce-cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Ant Design
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://antv.vision/zh" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Ant V
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.iconfont.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Iconfont çŸ¢é‡å›¾åº“
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          å¼€å‘å·¥å…·åŒ…
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="http://mvnrepository.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Maven Repository
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.hutool.cn/docs/#/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Hutool
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          åœ¨çº¿å·¥å…·
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://atool.vip/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  åœ¨çº¿å·¥å…·Web
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.sojson.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JSONæ ¼å¼åŒ–
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Contact" class="dropdown-title"><span class="title">Contact</span> <span class="arrow down"></span></button> <button type="button" aria-label="Contact" class="mobile-dropdown-title"><span class="title">Contact</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/xiaoli9965" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/XiaoLi9965" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ç äº‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java â˜•ï¸" class="dropdown-title"><span class="title">Java â˜•ï¸</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java â˜•ï¸" class="mobile-dropdown-title"><span class="title">Java â˜•ï¸</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          åŸºç¡€
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/java/åŸºç¡€/ConcurrentHashMap.html" class="nav-link">
  ConcurrentHashMap
</a></li><li class="dropdown-subitem"><a href="/blog/java/åŸºç¡€/hashmap.html" class="nav-link">
  HashMap
</a></li><li class="dropdown-subitem"><a href="/blog/java/åŸºç¡€/exception.html" class="nav-link">
  Exception
</a></li></ul></li><li class="dropdown-item"><h4>
          è™šæ‹Ÿæœº
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/java/jvm/å†…å­˜æ¨¡å‹.html" class="nav-link">
  å†…å­˜æ¨¡å‹
</a></li><li class="dropdown-subitem"><a href="/blog/java/jvm/åƒåœ¾å›æ”¶.html" class="nav-link">
  åƒåœ¾å›æ”¶
</a></li><li class="dropdown-subitem"><a href="/blog/java/jvm/ç±»åŠ è½½æœºåˆ¶.html" class="nav-link">
  ç±»åŠ è½½æœºåˆ¶
</a></li><li class="dropdown-subitem"><a href="/blog/java/jvm/æŠ„ä½œä¸š.html" class="nav-link">
  æŠ„ä½œä¸š
</a></li></ul></li><li class="dropdown-item"><h4>
          å¤šçº¿ç¨‹
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/java/å¤šçº¿ç¨‹/å¤šçº¿ç¨‹åŸºç¡€.html" class="nav-link">
  å¤šçº¿ç¨‹åŸºç¡€
</a></li><li class="dropdown-subitem"><a href="/blog/java/å¤šçº¿ç¨‹/CAS.html" class="nav-link">
  CAS
</a></li><li class="dropdown-subitem"><a href="/blog/java/å¤šçº¿ç¨‹/reentrantLock.html" class="nav-link">
  ReentrantLock
</a></li><li class="dropdown-subitem"><a href="/blog/java/å¤šçº¿ç¨‹/synchornized.html" class="nav-link">
  Synchornized
</a></li><li class="dropdown-subitem"><a href="/blog/java/å¤šçº¿ç¨‹/volatile.html" class="nav-link">
  Volatile
</a></li></ul></li><li class="dropdown-item"><h4>
          Nio
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/java/Nio/01_nioå¤šè·¯å¤ç”¨.html" class="nav-link">
  æ“ä½œç³»ç»Ÿçš„å¤šè·¯å¤ç”¨
</a></li><li class="dropdown-subitem"><a href="/blog/java/Nio/02_NIO&amp;Netty.html" class="nav-link">
  Java NIO
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ•°æ®åº“" class="dropdown-title"><span class="title">æ•°æ®åº“</span> <span class="arrow down"></span></button> <button type="button" aria-label="æ•°æ®åº“" class="mobile-dropdown-title"><span class="title">æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          MySql
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/MYSQL/01.html" class="nav-link">
  01
</a></li><li class="dropdown-subitem"><a href="/blog/MYSQL/02.html" class="nav-link">
  02
</a></li><li class="dropdown-subitem"><a href="/blog/MYSQL/03.html" class="nav-link">
  03
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="åˆ†å¸ƒå¼" class="dropdown-title"><span class="title">åˆ†å¸ƒå¼</span> <span class="arrow down"></span></button> <button type="button" aria-label="åˆ†å¸ƒå¼" class="mobile-dropdown-title"><span class="title">åˆ†å¸ƒå¼</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          MQ
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/mq/rabbit.html" class="nav-link">
  Rabbit
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/mq/rocket.html" class="nav-link">
  Rocket
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/mq/æŠ„ä½œä¸š.html" class="nav-link">
  æŠ„ä½œä¸š
</a></li></ul></li><li class="dropdown-item"><h4>
          Redis
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/redis/01_åŸºç¡€.html" class="nav-link">
  åŸºç¡€
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/redis/02_è¿›é˜¶.html" class="nav-link">
  è¿›é˜¶
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/redis/03_é›†ç¾¤.html" class="nav-link">
  é›†ç¾¤
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/redis/04_6ç‰ˆæœ¬.html" class="nav-link">
  6ç‰ˆæœ¬
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/redis/czy.html" class="nav-link">
  æŠ„ä½œä¸š
</a></li></ul></li><li class="dropdown-item"><h4>
          Zookeeper
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/zk/zk.html" class="nav-link">
  Zookeeper
</a></li></ul></li><li class="dropdown-item"><h4>
          åˆ†å¸ƒå¼ä¸€è‡´æ€§æ–¹æ¡ˆ
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/åˆ†å¸ƒå¼ä¸€è‡´æ€§/paxos.html" class="nav-link">
  Paxos
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/åˆ†å¸ƒå¼ä¸€è‡´æ€§/zookeeper.html" class="nav-link">
  Zookeeper
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/åˆ†å¸ƒå¼ä¸€è‡´æ€§/åˆ†å¸ƒå¼äº‹åŠ¡.html" class="nav-link">
  åˆ†å¸ƒå¼äº‹åŠ¡
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/åˆ†å¸ƒå¼ä¸€è‡´æ€§/åˆ†å¸ƒå¼é”.html" class="nav-link">
  åˆ†å¸ƒå¼é”
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ”—" class="dropdown-title"><span class="title">ğŸ”—</span> <span class="arrow down"></span></button> <button type="button" aria-label="ğŸ”—" class="mobile-dropdown-title"><span class="title">ğŸ”—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.injdk.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JDKä¸‹è½½
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><h4>
          æ¡†æ¶æ–‡æ¡£
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://mp.baomidou.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MyBatis-Plus
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://seata.io/zh-cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Alibaba Seata
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/alibaba/Sentinel/wiki/%E4%BB%8B%E7%BB%8D" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Alibaba Sentinel
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://nacos.io/zh-cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Alibaba Nacos
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://dubbo.apache.org/zh-cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Apache Dubbo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://skywalking.apache.org/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Apache SkyWalking
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          å‰ç«¯æ¡†æ¶
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://cn.vuejs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://element.eleme.cn/#/zh-CN" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Element UI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://react.docschina.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  React
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://ant.design/docs/react/introduce-cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Ant Design
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://antv.vision/zh" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Ant V
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.iconfont.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Iconfont çŸ¢é‡å›¾åº“
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          å¼€å‘å·¥å…·åŒ…
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="http://mvnrepository.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Maven Repository
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.hutool.cn/docs/#/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Hutool
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          åœ¨çº¿å·¥å…·
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://atool.vip/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  åœ¨çº¿å·¥å…·Web
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.sojson.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JSONæ ¼å¼åŒ–
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Contact" class="dropdown-title"><span class="title">Contact</span> <span class="arrow down"></span></button> <button type="button" aria-label="Contact" class="mobile-dropdown-title"><span class="title">Contact</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/xiaoli9965" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/XiaoLi9965" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ç äº‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>é”æœºåˆ¶ &amp; CAS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/CAS.html#_1-é”æœºåˆ¶" class="sidebar-link">1. é”æœºåˆ¶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/CAS.html#_1-1-ä¹è§‚é”å’Œæ‚²è§‚é”" class="sidebar-link">1.1. ä¹è§‚é”å’Œæ‚²è§‚é”</a></li><li class="sidebar-sub-header"><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/CAS.html#_1-2-å…¬å¹³é”å’Œéå…¬å¹³é”" class="sidebar-link">1.2. å…¬å¹³é”å’Œéå…¬å¹³é”</a></li><li class="sidebar-sub-header"><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/CAS.html#_1-3-ç‹¬å é”å’Œå…±äº«é”" class="sidebar-link">1.3. ç‹¬å é”å’Œå…±äº«é”</a></li><li class="sidebar-sub-header"><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/CAS.html#_1-4-å¯é‡å…¥é”" class="sidebar-link">1.4. å¯é‡å…¥é”</a></li><li class="sidebar-sub-header"><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/CAS.html#_1-5-è‡ªæ—‹é”" class="sidebar-link">1.5. è‡ªæ—‹é”</a></li><li class="sidebar-sub-header"><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/CAS.html#_1-6-synchronized" class="sidebar-link">1.6. synchronized</a></li><li class="sidebar-sub-header"><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/CAS.html#_1-7-volatile" class="sidebar-link">1.7. volatile</a></li></ul></li><li><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/CAS.html#_2-ä»€ä¹ˆæ˜¯cas" class="sidebar-link">2. ä»€ä¹ˆæ˜¯CAS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/CAS.html#_2-1-aba-é—®é¢˜æè¿°" class="sidebar-link">2.1. ABA é—®é¢˜æè¿°</a></li><li class="sidebar-sub-header"><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/CAS.html#_2-2-è§£å†³abaé—®é¢˜" class="sidebar-link">2.2. è§£å†³ABAé—®é¢˜</a></li></ul></li><li><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/CAS.html#_3-é”çš„å‡é™çº§è§„åˆ™" class="sidebar-link">3. é”çš„å‡é™çº§è§„åˆ™</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/CAS.html#_3-1-åå‘é”" class="sidebar-link">3.1. åå‘é”</a></li><li class="sidebar-sub-header"><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/CAS.html#_3-2-å…³é—­åå‘é”å»¶è¿Ÿ" class="sidebar-link">3.2. å…³é—­åå‘é”å»¶è¿Ÿ</a></li><li class="sidebar-sub-header"><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/CAS.html#_3-3-å¦‚ä½•å…³é—­åå‘é”" class="sidebar-link">3.3. å¦‚ä½•å…³é—­åå‘é”</a></li><li class="sidebar-sub-header"><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/CAS.html#_3-4-è½»é‡çº§é”" class="sidebar-link">3.4. è½»é‡çº§é”</a></li><li class="sidebar-sub-header"><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/CAS.html#_3-5-é”çš„ä¼˜ç¼ºç‚¹å¯¹æ¯”" class="sidebar-link">3.5. é”çš„ä¼˜ç¼ºç‚¹å¯¹æ¯”</a></li></ul></li><li><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/CAS.html#_4-unsafeç±»" class="sidebar-link">4. Unsafeç±»</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/CAS.html#_5-countdownlatch" class="sidebar-link">5. CountDownLatch</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/CAS.html#_6-cyclicbarrier" class="sidebar-link">6. CyclicBarrier</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/CAS.html#_7-countdownlatchä¸cyclicbarrieråŒºåˆ«" class="sidebar-link">7. CountDownLatchä¸CyclicBarrieråŒºåˆ«</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/CAS.html#_8-semaphore" class="sidebar-link">8. Semaphore</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/CAS.html#_9-exchanger" class="sidebar-link">9. Exchanger</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/CAS.html#_10-é¢è¯•é¢˜" class="sidebar-link">10. é¢è¯•é¢˜</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/CAS.html#_10-1-javaå¹¶å‘å®¹å™¨-ä½ çŸ¥é“å‡ ä¸ª" class="sidebar-link">10.1. Javaå¹¶å‘å®¹å™¨ï¼Œä½ çŸ¥é“å‡ ä¸ª</a></li><li class="sidebar-sub-header"><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/CAS.html#_10-2-jdkå¹¶å‘åŒ…ä¸­æä¾›äº†å“ªå‡ ä¸ªæ¯”è¾ƒå¸¸è§çš„å¤„ç†å¹¶å‘çš„å·¥å…·ç±»" class="sidebar-link">10.2. JDKå¹¶å‘åŒ…ä¸­æä¾›äº†å“ªå‡ ä¸ªæ¯”è¾ƒå¸¸è§çš„å¤„ç†å¹¶å‘çš„å·¥å…·ç±»ï¼Ÿ</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="_1-é”æœºåˆ¶"><a href="#_1-é”æœºåˆ¶" class="header-anchor">#</a> 1. é”æœºåˆ¶</h2> <h3 id="_1-1-ä¹è§‚é”å’Œæ‚²è§‚é”"><a href="#_1-1-ä¹è§‚é”å’Œæ‚²è§‚é”" class="header-anchor">#</a> 1.1. ä¹è§‚é”å’Œæ‚²è§‚é”</h3> <blockquote><p>ä¹è§‚é”å’Œæ‚²è§‚é”æœ€æ—©å‡ºç°åœ¨æ•°æ®åº“çš„è®¾è®¡å½“ä¸­ï¼Œåæ¥é€æ¸è¢« Java çš„å¹¶å‘åŒ…æ‰€å¼•å…¥ã€‚</p></blockquote> <div class="custom-block warning"><p class="custom-block-title">æ‚²è§‚é”</p> <p>æ‚²è§‚é”è®¤ä¸ºå¯¹äºåŒä¸€ä¸ªæ•°æ®çš„å¹¶å‘æ“ä½œï¼Œä¸€å®šæ˜¯ä¼šå‘ç”Ÿä¿®æ”¹çš„ï¼Œå“ªæ€•æ²¡æœ‰ä¿®æ”¹ï¼Œä¹Ÿä¼šè®¤ä¸ºä¿®æ”¹ã€‚å› æ­¤å¯¹äºåŒä¸€ä¸ªæ•°æ®çš„å¹¶å‘æ“ä½œï¼Œæ‚²è§‚é”é‡‡å–åŠ é”çš„å½¢å¼ã€‚æ‚²è§‚åœ°è®¤ä¸ºï¼Œä¸åŠ é”çš„å¹¶å‘æ“ä½œä¸€å®šä¼šå‡ºé—®é¢˜ã€‚</p></div> <div class="custom-block warning"><p class="custom-block-title">ä¹è§‚é”</p> <p>ä¹è§‚é”æ­£å¥½å’Œæ‚²è§‚é”ç›¸åï¼Œå®ƒè·å–æ•°æ®çš„æ—¶å€™ï¼Œå¹¶ä¸æ‹…å¿ƒæ•°æ®è¢«ä¿®æ”¹ï¼Œæ¯æ¬¡è·å–æ•°æ®çš„æ—¶å€™ä¹Ÿä¸ä¼šåŠ é”ï¼Œåªæ˜¯åœ¨æ›´æ–°æ•°æ®çš„æ—¶å€™ï¼Œé€šè¿‡åˆ¤æ–­ç°æœ‰çš„æ•°æ®æ˜¯å¦å’ŒåŸæ•°æ®ä¸€è‡´æ¥åˆ¤æ–­æ•°æ®æ˜¯å¦è¢«å…¶ä»–çº¿ç¨‹æ“ä½œï¼Œå¦‚æœæ²¡è¢«å…¶ä»–çº¿ç¨‹ä¿®æ”¹åˆ™è¿›è¡Œæ•°æ®æ›´æ–°ï¼Œå¦‚æœè¢«å…¶ä»–çº¿ç¨‹ä¿®æ”¹åˆ™ä¸è¿›è¡Œæ•°æ®æ›´æ–°ã€‚</p></div> <h3 id="_1-2-å…¬å¹³é”å’Œéå…¬å¹³é”"><a href="#_1-2-å…¬å¹³é”å’Œéå…¬å¹³é”" class="header-anchor">#</a> 1.2. å…¬å¹³é”å’Œéå…¬å¹³é”</h3> <div class="custom-block warning"><p class="custom-block-title">å…¬å¹³é”</p> <p>å…¬å¹³é”æ˜¯æŒ‡å¤šä¸ªçº¿ç¨‹æŒ‰ç…§ç”³è¯·é”çš„é¡ºåºæ¥è·å–é”ã€‚</p></div> <div class="custom-block warning"><p class="custom-block-title">éå…¬å¹³é”</p> <p>éå…¬å¹³é”æ˜¯æŒ‡å¤šä¸ªçº¿ç¨‹è·å–é”çš„é¡ºåºå¹¶ä¸æ˜¯æŒ‰ç…§ç”³è¯·é”çš„é¡ºåºï¼Œæœ‰å¯èƒ½åç”³è¯·çš„çº¿ç¨‹æ¯”å…ˆç”³è¯·çš„çº¿ç¨‹ä¼˜å…ˆè·å–é”ã€‚ReentrantLock æä¾›äº†å…¬å¹³é”å’Œéå…¬å¹³é”çš„å®ç°ã€‚</p> <p>å…¬å¹³é”ï¼šnew ReentrantLock(true)  // é»˜è®¤
éå…¬å¹³é”ï¼šnew ReentrantLock(false)</p></div> <h3 id="_1-3-ç‹¬å é”å’Œå…±äº«é”"><a href="#_1-3-ç‹¬å é”å’Œå…±äº«é”" class="header-anchor">#</a> 1.3. ç‹¬å é”å’Œå…±äº«é”</h3> <p>æ ¹æ®é”èƒ½å¦è¢«å¤šä¸ªçº¿ç¨‹æŒæœ‰ï¼Œå¯ä»¥æŠŠé”åˆ†ä¸ºç‹¬å é”å’Œå…±äº«é”ã€‚</p> <div class="custom-block warning"><p class="custom-block-title">ç‹¬å é”</p> <p>ç‹¬å é”æ˜¯æŒ‡ä»»ä½•æ—¶å€™éƒ½åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æ‰§è¡Œèµ„æºæ“ä½œã€‚</p></div> <div class="custom-block warning"><p class="custom-block-title">å…±äº«é”</p> <p>å…±äº«é”æŒ‡å®šæ˜¯å¯ä»¥åŒæ—¶è¢«å¤šä¸ªçº¿ç¨‹è¯»å–ï¼Œä½†åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹ã€‚æ¯”å¦‚ Java ä¸­çš„ ReentrantReadWriteLock å°±æ˜¯å…±äº«é”çš„å®ç°æ–¹å¼ï¼Œå®ƒå…è®¸ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œå†™æ“ä½œï¼Œå…è®¸å¤šä¸ªçº¿ç¨‹è¯»æ“ä½œã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReadWriteLockTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">MyReadWriteLock</span> rwLock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyReadWriteLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// åˆ›å»ºè¯»é” r1 å’Œ r2</span>
        <span class="token class-name">Thread</span> r1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                rwLock<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;r1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> r2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                rwLock<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;r2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        r1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        r2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ç­‰å¾…åŒæ—¶è¯»å–çº¿ç¨‹æ‰§è¡Œå®Œæˆ</span>
        r1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        r2<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å¼€å¯å†™é”çš„æ“ä½œ</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                rwLock<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;w1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                rwLock<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;w2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyReadWriteLock</span> <span class="token punctuation">{</span>
        <span class="token class-name">ReadWriteLock</span> lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantReadWriteLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                lock<span class="token punctuation">.</span><span class="token function">readLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;è¯»æ“ä½œï¼Œè¿›å…¥ | çº¿ç¨‹ï¼š&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;è¯»æ“ä½œï¼Œé€€å‡º | çº¿ç¨‹ï¼š&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                lock<span class="token punctuation">.</span><span class="token function">readLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                lock<span class="token punctuation">.</span><span class="token function">writeLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å†™æ“ä½œï¼Œè¿›å…¥ | çº¿ç¨‹ï¼š&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å†™æ“ä½œï¼Œé€€å‡º | çº¿ç¨‹ï¼š&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                lock<span class="token punctuation">.</span><span class="token function">writeLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language- extra-class"><pre><code>è¯»æ“ä½œï¼Œè¿›å…¥ | çº¿ç¨‹ï¼šr1
è¯»æ“ä½œï¼Œè¿›å…¥ | çº¿ç¨‹ï¼šr2
è¯»æ“ä½œï¼Œé€€å‡º | çº¿ç¨‹ï¼šr1
è¯»æ“ä½œï¼Œé€€å‡º | çº¿ç¨‹ï¼šr2
å†™æ“ä½œï¼Œè¿›å…¥ | çº¿ç¨‹ï¼šw1
å†™æ“ä½œï¼Œé€€å‡º | çº¿ç¨‹ï¼šw1
å†™æ“ä½œï¼Œè¿›å…¥ | çº¿ç¨‹ï¼šw2
å†™æ“ä½œï¼Œé€€å‡º | çº¿ç¨‹ï¼šw2
</code></pre></div></div> <h3 id="_1-4-å¯é‡å…¥é”"><a href="#_1-4-å¯é‡å…¥é”" class="header-anchor">#</a> 1.4. å¯é‡å…¥é”</h3> <p>è·å¾—é”å,å¦‚æœå†æ¬¡ç¢°åˆ°è¦è·å–é”çš„ä»£ç å—å¯ä»¥ç›´æ¥è¿›å…¥(æ— éœ€å†æ¬¡è·å–é”)</p> <h3 id="_1-5-è‡ªæ—‹é”"><a href="#_1-5-è‡ªæ—‹é”" class="header-anchor">#</a> 1.5. è‡ªæ—‹é”</h3> <p>è‡ªæ—‹é”æ˜¯æŒ‡å°è¯•è·å–é”çš„çº¿ç¨‹ä¸ä¼šç«‹å³é˜»å¡ï¼Œè€Œæ˜¯é‡‡ç”¨å¾ªç¯çš„æ–¹å¼å»å°è¯•è·å–é”ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯å‡å°‘çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ¶ˆè€—ï¼Œç¼ºç‚¹æ˜¯å¾ªç¯ä¼šæ¶ˆè€— CPUã€‚</p> <h3 id="_1-6-synchronized"><a href="#_1-6-synchronized" class="header-anchor">#</a> 1.6. synchronized</h3> <ul><li>åˆå«JVMé”/é‡é‡çº§é”</li> <li>æ˜¯æ‚²è§‚é”</li> <li>éå…¬å¹³é”</li> <li>ç‹¬å é”</li></ul> <p>è¢«synchronizedä¿®é¥°çš„ä»£ç ï¼Œæ¯æ¬¡æ‰§è¡Œæ—¶ä¼šè¿›è¡ŒåŠ é”æ“ä½œï¼ŒåŒæ—¶åªå…è®¸ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œæ“ä½œï¼Œæ‰€ä»¥å®ƒæ˜¯æ‚²è§‚é”çš„å®ç°ã€‚</p> <h3 id="_1-7-volatile"><a href="#_1-7-volatile" class="header-anchor">#</a> 1.7. volatile</h3> <p>åœ¨ JDK 5ä¹‹å‰ Java è¯­è¨€æ˜¯é  synchronized å…³é”®å­—ä¿è¯åŒæ­¥çš„ï¼Œä½† synchronized æ˜¯ä¸€ç§ç‹¬å é”ï¼Œæ˜¯ä¸€ç§æ‚²è§‚é”ï¼Œ <code>ä¼šå¯¼è‡´å…¶å®ƒæ‰€æœ‰éœ€è¦é”çš„çº¿ç¨‹æŒ‚èµ·ï¼Œç­‰å¾…æŒæœ‰é”çš„çº¿ç¨‹é‡Šæ”¾é”</code>ï¼Œæ•ˆç‡ä¸æ˜¯å¾ˆé«˜ã€‚</p> <p>Java è™šæ‹Ÿæœºåˆæä¾›äº†ä¸€ä¸ªè½»é‡çº§çš„åŒæ­¥æœºåˆ¶â€”â€”<code>volatile</code></p> <div class="custom-block tip"><p class="custom-block-title">volatile ä¸‰å¤§ç‰¹æ€§</p> <ul><li>å¯è§æ€§</li> <li>åŸå­æ€§</li> <li>æœ‰åºæ€§</li></ul></div> <h2 id="_2-ä»€ä¹ˆæ˜¯cas"><a href="#_2-ä»€ä¹ˆæ˜¯cas" class="header-anchor">#</a> 2. ä»€ä¹ˆæ˜¯CAS</h2> <p>CASæ˜¯è‹±æ–‡å•è¯Compare And Swapçš„ç¼©å†™ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯æ¯”è¾ƒå¹¶æ›¿æ¢ã€‚</p> <p>CASæœºåˆ¶å½“ä¸­ä½¿ç”¨äº†3ä¸ªåŸºæœ¬æ“ä½œæ•°ï¼šå†…å­˜åœ°å€Vï¼Œæ—§çš„é¢„æœŸå€¼Aï¼Œè¦ä¿®æ”¹çš„æ–°å€¼Bã€‚</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>CASæ˜¯ä¸€ç§ä¹è§‚é”çš„å®ç°ï¼Œæ˜¯ç”¨éé˜»å¡ç®—æ³•æ¥ä»£æ›¿é”å®šï¼Œå…¶ä¸­ java.util.concurrent åŒ…ä¸‹çš„ AtomicInteger å°±æ˜¯å€ŸåŠ© CAS æ¥å®ç°çš„ã€‚
ä½† CAS ä¹Ÿä¸æ˜¯æ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨ï¼Œæ¯”å¦‚è‘—åçš„ ABA é—®é¢˜å°±æ˜¯ CAS å¼•èµ·çš„ã€‚</p> <ul><li>CAS æ˜¯é€šè¿‡è°ƒç”¨ JNIï¼ˆJava Native Interfaceï¼‰çš„ä»£ç å®ç°çš„ï¼Œæ¯”å¦‚ï¼Œåœ¨ Windows ç³»ç»Ÿ CAS å°±æ˜¯å€ŸåŠ© C è¯­è¨€æ¥è°ƒç”¨ CPU åº•å±‚æŒ‡ä»¤å®ç°çš„ã€‚</li> <li>CPU åŒæ­¥åŸè¯­</li></ul></div> <div class="custom-block tip"><p class="custom-block-title">casçš„ç¼ºç‚¹</p> <ul><li>å¾ªç¯æ—¶é—´é•¿ï¼Œå¼€é”€å¾ˆå¤§ã€‚CASç®—æ³•éœ€è¦ä¸æ–­åœ°è‡ªæ—‹æ¥è¯»å–æœ€æ–°çš„å†…å­˜å€¼ï¼Œé•¿æ—¶é—´è¯»å–ä¸åˆ°å°±ä¼šé€ æˆä¸å¿…è¦çš„CPUå¼€é”€.</li> <li>åªèƒ½ä¿è¯ä¸€ä¸ªå…±äº«å˜é‡çš„åŸå­æ“ä½œã€‚å½“å¯¹ä¸€ä¸ªå…±äº«å˜é‡æ‰§è¡Œæ“ä½œæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¾ªç¯CASçš„æ–¹å¼æ¥ä¿è¯åŸå­æ“ä½œï¼Œä½†æ˜¯ï¼Œå¯¹å¤šä¸ªå…±äº«å˜é‡æ“ä½œæ—¶ï¼Œå¾ªç¯CASå°±æ— æ³•ä¿è¯æ“ä½œçš„åŸå­æ€§ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ç”¨é”æ¥ä¿è¯åŸå­æ€§ã€‚</li> <li>ABA é—®é¢˜</li></ul></div> <h3 id="_2-1-aba-é—®é¢˜æè¿°"><a href="#_2-1-aba-é—®é¢˜æè¿°" class="header-anchor">#</a> 2.1. ABA é—®é¢˜æè¿°</h3> <p>è€ç‹å»é“¶è¡Œå–é’±ï¼Œä½™é¢æœ‰ 200 å…ƒï¼Œè€ç‹å– 100 å…ƒï¼Œä½†å› ä¸ºç¨‹åºçš„é—®é¢˜ï¼Œå¯åŠ¨äº†ä¸¤ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹ä¸€å’Œçº¿ç¨‹äºŒè¿›è¡Œæ¯”å¯¹æ‰£æ¬¾ï¼Œçº¿ç¨‹ä¸€è·å–åŸæœ¬æœ‰ 200 å…ƒï¼Œæ‰£é™¤ 100 å…ƒï¼Œä½™é¢ç­‰äº 100 å…ƒï¼Œæ­¤æ—¶é˜¿é‡Œç»™è€ç‹è½¬è´¦ 100 å…ƒï¼Œäºæ˜¯å¯åŠ¨äº†çº¿ç¨‹ä¸‰æŠ¢å…ˆåœ¨çº¿ç¨‹äºŒä¹‹å‰æ‰§è¡Œäº†è½¬è´¦æ“ä½œï¼ŒæŠŠ 100 å…ƒåˆå˜æˆäº† 200 å…ƒï¼Œè€Œæ­¤æ—¶çº¿ç¨‹äºŒå¯¹æ¯”è‡ªå·±äº‹å…ˆæ‹¿åˆ°çš„ 200 å…ƒå’Œæ­¤æ—¶ç»è¿‡æ”¹åŠ¨çš„ 200 å…ƒå€¼ä¸€æ ·ï¼Œå°±è¿›è¡Œäº†å‡æ³•æ“ä½œï¼ŒæŠŠä½™é¢åˆå˜æˆäº† 100 å…ƒã€‚è¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬è¦çš„æ­£ç¡®ç»“æœï¼Œæˆ‘ä»¬æƒ³è¦çš„ç»“æœæ˜¯ä½™é¢å‡å°‘äº† 100 å…ƒï¼Œåˆå¢åŠ äº† 100 å…ƒï¼Œä½™é¢è¿˜æ˜¯ 200 å…ƒï¼Œè€Œæ­¤æ—¶ä½™é¢å˜æˆäº† 100 å…ƒï¼Œæ˜¾ç„¶æœ‰æ‚–å¸¸ç†ï¼Œè¿™å°±æ˜¯è‘—åçš„ ABA çš„é—®é¢˜ã€‚</p> <blockquote><p>æ‰§è¡Œæµç¨‹å¦‚ä¸‹ã€‚</p></blockquote> <ul><li>çº¿ç¨‹ä¸€ï¼šå–æ¬¾ï¼Œè·å–åŸå€¼ 200 å…ƒï¼Œä¸ 200 å…ƒæ¯”å¯¹æˆåŠŸï¼Œå‡å» 100 å…ƒï¼Œä¿®æ”¹ç»“æœä¸º 100 å…ƒã€‚</li> <li>çº¿ç¨‹äºŒï¼šå–æ¬¾ï¼Œè·å–åŸå€¼ 200 å…ƒï¼Œé˜»å¡ç­‰å¾…ä¿®æ”¹ã€‚</li> <li>çº¿ç¨‹ä¸‰ï¼šè½¬è´¦ï¼Œè·å–åŸå€¼ 100 å…ƒï¼Œä¸ 100 å…ƒæ¯”å¯¹æˆåŠŸï¼ŒåŠ ä¸Š 100 å…ƒï¼Œä¿®æ”¹ç»“æœä¸º 200 å…ƒã€‚</li> <li>çº¿ç¨‹äºŒï¼šå–æ¬¾ï¼Œæ¢å¤æ‰§è¡Œï¼ŒåŸå€¼ä¸º 200 å…ƒï¼Œä¸ 200 å…ƒå¯¹æ¯”æˆåŠŸï¼Œå‡å» 100 å…ƒï¼Œä¿®æ”¹ç»“æœä¸º 100 å…ƒã€‚
æœ€ç»ˆçš„ç»“æœæ˜¯ 100 å…ƒã€‚</li></ul> <h3 id="_2-2-è§£å†³abaé—®é¢˜"><a href="#_2-2-è§£å†³abaé—®é¢˜" class="header-anchor">#</a> 2.2. è§£å†³ABAé—®é¢˜</h3> <p>å¸¸è§è§£å†³ ABA é—®é¢˜çš„æ–¹æ¡ˆåŠ ç‰ˆæœ¬å·ï¼Œæ¥åŒºåˆ†å€¼æ˜¯å¦æœ‰å˜åŠ¨ã€‚</p> <div class="language- extra-class"><pre><code>java.util.concurrent.atomic.AtomicStampedReference
</code></pre></div><h2 id="_3-é”çš„å‡é™çº§è§„åˆ™"><a href="#_3-é”çš„å‡é™çº§è§„åˆ™" class="header-anchor">#</a> 3. é”çš„å‡é™çº§è§„åˆ™</h2> <p>Java SE 1.6 ä¸ºäº†æé«˜é”çš„æ€§èƒ½ã€‚å¼•å…¥äº†â€œåå‘é”â€å’Œè½»é‡çº§é”â€œã€‚</p> <p>Java SE 1.6 ä¸­é”æœ‰4ç§çŠ¶æ€ã€‚çº§åˆ«ä»ä½åˆ°é«˜ä¾æ¬¡æ˜¯ï¼šæ— é”çŠ¶æ€ã€åå‘é”çŠ¶æ€ã€è½»é‡çº§é”çŠ¶æ€ã€é‡é‡çº§é”çŠ¶æ€ã€‚</p> <p>é”åªèƒ½å‡çº§ä¸èƒ½é™çº§ã€‚</p> <h3 id="_3-1-åå‘é”"><a href="#_3-1-åå‘é”" class="header-anchor">#</a> 3.1. åå‘é”</h3> <p>å¤§å¤šæ•°æƒ…å†µï¼Œé”ä¸ä»…ä¸å­˜åœ¨å¤šçº¿ç¨‹ç«äº‰ï¼Œè€Œä¸”æ€»ç”±åŒä¸€çº¿ç¨‹å¤šæ¬¡è·å¾—ã€‚å½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®åŒæ­¥å—å¹¶è·å–é”æ—¶ï¼Œä¼šåœ¨å¯¹è±¡å¤´å’Œæ ˆå¸§ä¸­è®°å½•å­˜å‚¨é”åå‘çš„çº¿ç¨‹ID,ä»¥åè¯¥çº¿ç¨‹åœ¨è¿›å…¥å’Œé€€å‡ºåŒæ­¥å—æ—¶ä¸éœ€è¦è¿›è¡Œ casæ“ä½œæ¥åŠ é”å’Œè§£é”ï¼Œåªéœ€æµ‹è¯•ä¸€ä¸‹å¯¹è±¡å¤´ Mark Wordé‡Œæ˜¯å¦å­˜å‚¨ç€æŒ‡å‘å½“å‰çº¿ç¨‹çš„åå‘é”ã€‚å¦‚æœæµ‹è¯•æˆåŠŸï¼Œè¡¨ç¤ºçº¿ç¨‹å·²ç»è·å¾—äº†é”ï¼Œå¦‚æœå¤±è´¥ï¼Œåˆ™éœ€è¦æµ‹è¯•ä¸‹Mark Wordä¸­åå‘é”çš„æ ‡ç¤ºæ˜¯å¦å·²ç»è®¾ç½®æˆ1ï¼ˆè¡¨ç¤ºå½“å‰æ—¶åå‘é”),å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œåˆ™ä½¿ç”¨casç«äº‰é”ï¼Œå¦‚æœè®¾ç½®äº†ï¼Œåˆ™å°è¯•ä½¿ç”¨caså°†å¯¹è±¡å¤´çš„åå‘é”åªæƒ³å½“å‰çº¿ç¨‹ã€‚</p> <h3 id="_3-2-å…³é—­åå‘é”å»¶è¿Ÿ"><a href="#_3-2-å…³é—­åå‘é”å»¶è¿Ÿ" class="header-anchor">#</a> 3.2. å…³é—­åå‘é”å»¶è¿Ÿ</h3> <p>java6å’Œ7ä¸­é»˜è®¤å¯ç”¨ï¼Œä½†æ˜¯ä¼šåœ¨ç¨‹åºå¯åŠ¨å‡ ç§’åæ‰æ¿€æ´»ï¼Œå¦‚æœéœ€è¦å…³é—­å»¶è¿Ÿï¼Œ</p> <p>-XX:BiasedLockingStartupDelay=0ã€‚</p> <h3 id="_3-3-å¦‚ä½•å…³é—­åå‘é”"><a href="#_3-3-å¦‚ä½•å…³é—­åå‘é”" class="header-anchor">#</a> 3.3. å¦‚ä½•å…³é—­åå‘é”</h3> <p>JVMå‚æ•°å…³é—­åå‘é”:-XX:-UseBiasedLocking=false,é‚£ä¹ˆç¨‹åºé»˜è®¤ä¼šè¿›å…¥è½»é‡çº§é”çŠ¶æ€ã€‚</p> <p>Tips:å¦‚æœä½ å¯ä»¥ç¡®å®šç¨‹åºçš„æ‰€æœ‰é”é€šå¸¸æƒ…å†µå¤„äºç«æ€ï¼Œåˆ™å¯ä»¥é€‰æ‹©å…³é—­ã€‚</p> <h3 id="_3-4-è½»é‡çº§é”"><a href="#_3-4-è½»é‡çº§é”" class="header-anchor">#</a> 3.4. è½»é‡çº§é”</h3> <p>çº¿ç¨‹åœ¨æ‰§è¡ŒåŒæ­¥å—ï¼Œjvmä¼šç°åœ¨å½“å‰çº¿ç¨‹çš„æ ˆå¸§ä¸­åˆ›å»ºç”¨äºå‚¨å­˜é”è®°å½•çš„ç©ºé—´ã€‚å¹¶å°†å¯¹è±¡å¤´ä¸­çš„Mark Wordå¤åˆ¶åˆ°é”è®°å½•ä¸­ã€‚ç„¶åçº¿ç¨‹å°è¯•ä½¿ç”¨caså°†å¯¹è±¡å¤´ä¸­çš„Mark Wordæ›¿æ¢ä¸ºä¹‹ä¹¡é”è®°å½•çš„æŒ‡é’ˆã€‚å¦‚æœæˆåŠŸï¼Œå½“å‰çº¿ç¨‹è·å¾—é”ï¼Œå¦‚æœå¤±è´¥ï¼Œè¡¨ç¤ºå…¶ä»–çº¿ç¨‹ç«äº‰é”ï¼Œå½“å‰çº¿ç¨‹ä¾¿å°è¯•ä½¿ç”¨è‡ªæ—‹æ¥è·å–é”ã€‚</p> <div class="custom-block tip"><p class="custom-block-title">è§£é”</p> <p>è½»é‡é”è§£é”æ—¶ï¼Œä¼šä½¿åŸå­æ“ä½œcaså°† displaced Mark Word æ›¿æ¢å›å¯¹è±¡å¤´ï¼Œå¦‚æœæˆåŠŸåˆ™è¡¨ç¤ºæ²¡æœ‰ç«äº‰å‘ç”Ÿï¼Œå¦‚æœå¤±è´¥ï¼Œè¡¨ç¤ºå­˜åœ¨ç«äº‰ï¼Œæ­¤æ—¶é”å°±ä¼šè†¨èƒ€ä¸ºé‡é‡çº§é”ã€‚</p></div> <h3 id="_3-5-é”çš„ä¼˜ç¼ºç‚¹å¯¹æ¯”"><a href="#_3-5-é”çš„ä¼˜ç¼ºç‚¹å¯¹æ¯”" class="header-anchor">#</a> 3.5. é”çš„ä¼˜ç¼ºç‚¹å¯¹æ¯”</h3> <p><img src="http://md.yike.link/20200709143108_W8wOkw_Screenshot.jpeg" alt=""></p> <h2 id="_4-unsafeç±»"><a href="#_4-unsafeç±»" class="header-anchor">#</a> 4. Unsafeç±»</h2> <p><img src="http://md.yike.link/20200707180707_T6TDHa_Screenshot.jpeg" alt="Unsafeç±»"></p> <h2 id="_5-countdownlatch"><a href="#_5-countdownlatch" class="header-anchor">#</a> 5. CountDownLatch</h2> <p>å…è®¸ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ç­‰å¾…å…¶ä»–çº¿ç¨‹å®Œæˆæ“ä½œã€‚</p> <p>CountDownLatchçš„æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªintç±»å‹çš„å‚æ•°ä½œä¸ºè®¡æ•°å™¨ï¼Œä½ æƒ³ç­‰å¾…nä¸ªç‚¹å®Œæˆï¼Œå°±ä¼ å…¥nã€‚</p> <p>ä¸¤ä¸ªé‡è¦çš„æ–¹æ³•:</p> <p>countDown() : è°ƒç”¨æ—¶ï¼Œnä¼šå‡1ã€‚</p> <p>await() : è°ƒç”¨ä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œç›´åˆ°nå˜æˆ0ã€‚</p> <p>await(long time,TimeUnit unit) : ç­‰å¾…ç‰¹å®šæ—¶é—´åï¼Œå°±ä¸ä¼šç»§ç»­é˜»å¡å½“å‰çº¿ç¨‹ã€‚</p> <p>tips:è®¡æ•°å™¨å¿…é¡»å¤§äºç­‰äº0ï¼Œå½“ä¸º0æ—¶ï¼Œawaitå°±ä¸ä¼šé˜»å¡å½“å‰çº¿ç¨‹ã€‚</p> <p>ä¸æä¾›é‡æ–°åˆå§‹åŒ–æˆ–ä¿®æ”¹å†…éƒ¨è®¡æ•°å™¨çš„å€¼çš„åŠŸèƒ½ã€‚</p> <h2 id="_6-cyclicbarrier"><a href="#_6-cyclicbarrier" class="header-anchor">#</a> 6. CyclicBarrier</h2> <p>å¯å¾ªç¯ä½¿ç”¨çš„å±éšœã€‚</p> <p>è®©ä¸€ç»„çº¿ç¨‹åˆ°è¾¾ä¸€ä¸ªå±éšœï¼ˆä¹Ÿå¯ä»¥å«åŒæ­¥ç‚¹ï¼‰æ—¶è¢«é˜»å¡ï¼Œç›´åˆ°æœ€åä¸€ä¸ªçº¿ç¨‹åˆ°è¾¾å±éšœæ—¶ï¼Œå±éšœæ‰ä¼šå¼€é—¨ï¼Œæ‰€æœ‰è¢«å±éšœæ‹¦æˆªçš„çº¿ç¨‹æ‰ä¼šç»§ç»­è¿è¡Œã€‚</p> <p>CyclicBarrieré»˜è®¤æ„é€ æ”¾æ—¶CyclicBarrier(int parities) ,å…¶å‚æ•°è¡¨ç¤ºå±éšœæ‹¦æˆªçš„çº¿ç¨‹æ•°é‡ï¼Œæ¯ä¸ªçº¿ç¨‹è°ƒç”¨awaitæ–¹æ³•å‘Šè¯‰CyclicBarrieræˆ‘å·²ç»åˆ°è¾¾å±éšœï¼Œç„¶åå½“å‰çº¿ç¨‹è¢«é˜»å¡ã€‚</p> <h2 id="_7-countdownlatchä¸cyclicbarrieråŒºåˆ«"><a href="#_7-countdownlatchä¸cyclicbarrieråŒºåˆ«" class="header-anchor">#</a> 7. CountDownLatchä¸CyclicBarrieråŒºåˆ«</h2> <p>CountDownLatchï¼š è®¡æ•°å™¨ï¼šè®¡æ•°å™¨åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚</p> <p>ç­‰å¾…ï¼šä¸€ä¸ªçº¿ç¨‹æˆ–å¤šä¸ªç­‰å¾…å¦å¤–nä¸ªçº¿ç¨‹å®Œæˆä¹‹åæ‰èƒ½æ‰§è¡Œã€‚</p> <p>CyclicBarrierï¼š è®¡æ•°å™¨ï¼šè®¡æ•°å™¨å¯ä»¥é‡ç½®ï¼ˆé€šè¿‡reset()æ–¹æ³•)ã€‚</p> <p>ç­‰å¾…ï¼šnä¸ªçº¿ç¨‹ç›¸äº’ç­‰å¾…ï¼Œä»»ä½•ä¸€ä¸ªçº¿ç¨‹å®Œæˆä¹‹å‰ï¼Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½å¿…é¡»ç­‰å¾…</p> <h2 id="_8-semaphore"><a href="#_8-semaphore" class="header-anchor">#</a> 8. Semaphore</h2> <p>ç”¨æ¥æ§åˆ¶åŒæ—¶è®¿é—®èµ„æºçš„çº¿ç¨‹æ•°é‡ï¼Œé€šè¿‡åè°ƒå„ä¸ªçº¿ç¨‹ï¼Œæ¥ä¿è¯åˆç†çš„å…¬å…±èµ„æºçš„è®¿é—®ã€‚</p> <p>åº”ç”¨åœºæ™¯ï¼šæµé‡æ§åˆ¶ï¼Œç‰¹åˆ«æ˜¯å…¬å…±èµ„æºæœ‰é™çš„åº”ç”¨åœºæ™¯ï¼Œæ¯”å¦‚æ•°æ®é“¾æ¥ï¼Œé™æµç­‰ã€‚</p> <h2 id="_9-exchanger"><a href="#_9-exchanger" class="header-anchor">#</a> 9. Exchanger</h2> <p>Exchangeræ˜¯ä¸€ä¸ªç”¨äºçº¿ç¨‹é—´åä½œçš„å·¥å…·ç±»ï¼Œå®ƒæä¾›ä¸€ä¸ªåŒæ­¥ç‚¹ï¼Œåœ¨è¿™ä¸ªåŒæ­¥ç‚¹ä¸Šï¼Œä¸¤ä¸ªçº¿ç¨‹å¯ä»¥äº¤æ¢å½¼æ­¤çš„æ•°æ®ã€‚æ¯”å¦‚ç¬¬ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œexchange()æ–¹æ³•ï¼Œå®ƒä¼šä¸€ç›´ç­‰å¾…ç¬¬äºŒä¸ªçº¿ç¨‹ä¹Ÿæ‰§è¡Œexchangeï¼Œå½“ä¸¤ä¸ªçº¿ç¨‹éƒ½åˆ°åŒæ­¥ç‚¹ï¼Œå°±å¯ä»¥äº¤æ¢æ•°æ®äº†ã€‚</p> <p>ä¸€èˆ¬æ¥è¯´ä¸ºäº†é¿å…ä¸€ç›´ç­‰å¾…çš„æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨exchange(V x,long timeout,TimeUnit unit),è®¾ç½®æœ€å¤§ç­‰å¾…æ—¶é—´ã€‚</p> <p>Exchangerå¯ä»¥ç”¨äºé—ä¼ ç®—æ³•ã€‚</p> <h2 id="_10-é¢è¯•é¢˜"><a href="#_10-é¢è¯•é¢˜" class="header-anchor">#</a> 10. é¢è¯•é¢˜</h2> <h3 id="_10-1-javaå¹¶å‘å®¹å™¨-ä½ çŸ¥é“å‡ ä¸ª"><a href="#_10-1-javaå¹¶å‘å®¹å™¨-ä½ çŸ¥é“å‡ ä¸ª" class="header-anchor">#</a> 10.1. Javaå¹¶å‘å®¹å™¨ï¼Œä½ çŸ¥é“å‡ ä¸ª</h3> <p>ConcurrentHashMapã€CopyOnWriteArrayList ã€CopyOnWriteArraySet ã€ConcurrentLinkedQueueã€</p> <p>ConcurrentLinkedDequeã€ConcurrentSkipListMapã€ConcurrentSkipListSetã€ArrayBlockingQueueã€</p> <p>LinkedBlockingQueueã€LinkedBlockingDequeã€PriorityBlockingQueueã€SynchronousQueueã€</p> <p>LinkedTransferQueueã€DelayQueue</p> <h3 id="_10-2-jdkå¹¶å‘åŒ…ä¸­æä¾›äº†å“ªå‡ ä¸ªæ¯”è¾ƒå¸¸è§çš„å¤„ç†å¹¶å‘çš„å·¥å…·ç±»"><a href="#_10-2-jdkå¹¶å‘åŒ…ä¸­æä¾›äº†å“ªå‡ ä¸ªæ¯”è¾ƒå¸¸è§çš„å¤„ç†å¹¶å‘çš„å·¥å…·ç±»" class="header-anchor">#</a> 10.2. JDKå¹¶å‘åŒ…ä¸­æä¾›äº†å“ªå‡ ä¸ªæ¯”è¾ƒå¸¸è§çš„å¤„ç†å¹¶å‘çš„å·¥å…·ç±»ï¼Ÿ</h3> <p>æä¾›å¹¶å‘æ§åˆ¶æ‰‹æ®µ: CountDownLatchã€CyclicBarrierã€Semaphore</p> <p>çº¿ç¨‹é—´æ•°æ®äº¤æ¢: Exchanger</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">æœ€è¿‘æ›´æ–°:</span> <span class="time">8/8/2021, 4:50:52 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.0c328148.js" defer></script><script src="/blog/assets/js/2.ef27732c.js" defer></script><script src="/blog/assets/js/22.771705d3.js" defer></script>
  </body>
</html>
