<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>å…¬å¹³/éå…¬å¹³é”/AQS | I&#39;m Alex</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="123">
    
    <link rel="preload" href="/blog/assets/css/0.styles.f9dc4244.css" as="style"><link rel="preload" href="/blog/assets/js/app.0c328148.js" as="script"><link rel="preload" href="/blog/assets/js/2.ef27732c.js" as="script"><link rel="preload" href="/blog/assets/js/23.00e498db.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.4fc174d0.js"><link rel="prefetch" href="/blog/assets/js/11.4b9e5083.js"><link rel="prefetch" href="/blog/assets/js/12.8c45d22b.js"><link rel="prefetch" href="/blog/assets/js/13.a7706ab2.js"><link rel="prefetch" href="/blog/assets/js/14.9e9431ac.js"><link rel="prefetch" href="/blog/assets/js/15.191a76b5.js"><link rel="prefetch" href="/blog/assets/js/16.ade73102.js"><link rel="prefetch" href="/blog/assets/js/17.455cea14.js"><link rel="prefetch" href="/blog/assets/js/18.cf9594d9.js"><link rel="prefetch" href="/blog/assets/js/19.bdb0a3c4.js"><link rel="prefetch" href="/blog/assets/js/20.fd4b444e.js"><link rel="prefetch" href="/blog/assets/js/21.01379a95.js"><link rel="prefetch" href="/blog/assets/js/22.771705d3.js"><link rel="prefetch" href="/blog/assets/js/24.02bc0deb.js"><link rel="prefetch" href="/blog/assets/js/25.1bb2541a.js"><link rel="prefetch" href="/blog/assets/js/26.970f0106.js"><link rel="prefetch" href="/blog/assets/js/27.9e87a29d.js"><link rel="prefetch" href="/blog/assets/js/28.c97a693d.js"><link rel="prefetch" href="/blog/assets/js/29.9963f0cf.js"><link rel="prefetch" href="/blog/assets/js/3.e2e3b0e7.js"><link rel="prefetch" href="/blog/assets/js/30.afb8e3c4.js"><link rel="prefetch" href="/blog/assets/js/31.ac96d13a.js"><link rel="prefetch" href="/blog/assets/js/32.91959568.js"><link rel="prefetch" href="/blog/assets/js/33.bc02d183.js"><link rel="prefetch" href="/blog/assets/js/34.9f4bdea4.js"><link rel="prefetch" href="/blog/assets/js/35.85cd64bd.js"><link rel="prefetch" href="/blog/assets/js/36.9efafaae.js"><link rel="prefetch" href="/blog/assets/js/37.13f25b82.js"><link rel="prefetch" href="/blog/assets/js/38.7f91a217.js"><link rel="prefetch" href="/blog/assets/js/39.15f7b5b6.js"><link rel="prefetch" href="/blog/assets/js/4.108b56bf.js"><link rel="prefetch" href="/blog/assets/js/40.07a706de.js"><link rel="prefetch" href="/blog/assets/js/41.a9ad9f4f.js"><link rel="prefetch" href="/blog/assets/js/5.e004f495.js"><link rel="prefetch" href="/blog/assets/js/6.59736120.js"><link rel="prefetch" href="/blog/assets/js/7.ce721f24.js"><link rel="prefetch" href="/blog/assets/js/8.e707e9a2.js"><link rel="prefetch" href="/blog/assets/js/9.9f7d8719.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.f9dc4244.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/logo.png" alt="I'm Alex" class="logo"> <span class="site-name can-hide">I'm Alex</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java â˜•ï¸" class="dropdown-title"><span class="title">Java â˜•ï¸</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java â˜•ï¸" class="mobile-dropdown-title"><span class="title">Java â˜•ï¸</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          åŸºç¡€
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/java/åŸºç¡€/ConcurrentHashMap.html" class="nav-link">
  ConcurrentHashMap
</a></li><li class="dropdown-subitem"><a href="/blog/java/åŸºç¡€/hashmap.html" class="nav-link">
  HashMap
</a></li><li class="dropdown-subitem"><a href="/blog/java/åŸºç¡€/exception.html" class="nav-link">
  Exception
</a></li></ul></li><li class="dropdown-item"><h4>
          è™šæ‹Ÿæœº
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/java/jvm/å†…å­˜æ¨¡å‹.html" class="nav-link">
  å†…å­˜æ¨¡å‹
</a></li><li class="dropdown-subitem"><a href="/blog/java/jvm/åƒåœ¾å›æ”¶.html" class="nav-link">
  åƒåœ¾å›æ”¶
</a></li><li class="dropdown-subitem"><a href="/blog/java/jvm/ç±»åŠ è½½æœºåˆ¶.html" class="nav-link">
  ç±»åŠ è½½æœºåˆ¶
</a></li><li class="dropdown-subitem"><a href="/blog/java/jvm/æŠ„ä½œä¸š.html" class="nav-link">
  æŠ„ä½œä¸š
</a></li></ul></li><li class="dropdown-item"><h4>
          å¤šçº¿ç¨‹
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/java/å¤šçº¿ç¨‹/å¤šçº¿ç¨‹åŸºç¡€.html" class="nav-link">
  å¤šçº¿ç¨‹åŸºç¡€
</a></li><li class="dropdown-subitem"><a href="/blog/java/å¤šçº¿ç¨‹/CAS.html" class="nav-link">
  CAS
</a></li><li class="dropdown-subitem"><a href="/blog/java/å¤šçº¿ç¨‹/reentrantLock.html" class="nav-link">
  ReentrantLock
</a></li><li class="dropdown-subitem"><a href="/blog/java/å¤šçº¿ç¨‹/synchornized.html" class="nav-link">
  Synchornized
</a></li><li class="dropdown-subitem"><a href="/blog/java/å¤šçº¿ç¨‹/volatile.html" class="nav-link">
  Volatile
</a></li></ul></li><li class="dropdown-item"><h4>
          Nio
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/java/Nio/01_nioå¤šè·¯å¤ç”¨.html" class="nav-link">
  æ“ä½œç³»ç»Ÿçš„å¤šè·¯å¤ç”¨
</a></li><li class="dropdown-subitem"><a href="/blog/java/Nio/02_NIO&amp;Netty.html" class="nav-link">
  Java NIO
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ•°æ®åº“" class="dropdown-title"><span class="title">æ•°æ®åº“</span> <span class="arrow down"></span></button> <button type="button" aria-label="æ•°æ®åº“" class="mobile-dropdown-title"><span class="title">æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          MySql
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/MYSQL/01.html" class="nav-link">
  01
</a></li><li class="dropdown-subitem"><a href="/blog/MYSQL/02.html" class="nav-link">
  02
</a></li><li class="dropdown-subitem"><a href="/blog/MYSQL/03.html" class="nav-link">
  03
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="åˆ†å¸ƒå¼" class="dropdown-title"><span class="title">åˆ†å¸ƒå¼</span> <span class="arrow down"></span></button> <button type="button" aria-label="åˆ†å¸ƒå¼" class="mobile-dropdown-title"><span class="title">åˆ†å¸ƒå¼</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          MQ
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/mq/rabbit.html" class="nav-link">
  Rabbit
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/mq/rocket.html" class="nav-link">
  Rocket
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/mq/æŠ„ä½œä¸š.html" class="nav-link">
  æŠ„ä½œä¸š
</a></li></ul></li><li class="dropdown-item"><h4>
          Redis
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/redis/01_åŸºç¡€.html" class="nav-link">
  åŸºç¡€
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/redis/02_è¿›é˜¶.html" class="nav-link">
  è¿›é˜¶
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/redis/03_é›†ç¾¤.html" class="nav-link">
  é›†ç¾¤
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/redis/04_6ç‰ˆæœ¬.html" class="nav-link">
  6ç‰ˆæœ¬
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/redis/czy.html" class="nav-link">
  æŠ„ä½œä¸š
</a></li></ul></li><li class="dropdown-item"><h4>
          Zookeeper
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/zk/zk.html" class="nav-link">
  Zookeeper
</a></li></ul></li><li class="dropdown-item"><h4>
          åˆ†å¸ƒå¼ä¸€è‡´æ€§æ–¹æ¡ˆ
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/åˆ†å¸ƒå¼ä¸€è‡´æ€§/paxos.html" class="nav-link">
  Paxos
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/åˆ†å¸ƒå¼ä¸€è‡´æ€§/zookeeper.html" class="nav-link">
  Zookeeper
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/åˆ†å¸ƒå¼ä¸€è‡´æ€§/åˆ†å¸ƒå¼äº‹åŠ¡.html" class="nav-link">
  åˆ†å¸ƒå¼äº‹åŠ¡
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/åˆ†å¸ƒå¼ä¸€è‡´æ€§/åˆ†å¸ƒå¼é”.html" class="nav-link">
  åˆ†å¸ƒå¼é”
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ”—" class="dropdown-title"><span class="title">ğŸ”—</span> <span class="arrow down"></span></button> <button type="button" aria-label="ğŸ”—" class="mobile-dropdown-title"><span class="title">ğŸ”—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.injdk.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JDKä¸‹è½½
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><h4>
          æ¡†æ¶æ–‡æ¡£
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://mp.baomidou.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MyBatis-Plus
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://seata.io/zh-cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Alibaba Seata
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/alibaba/Sentinel/wiki/%E4%BB%8B%E7%BB%8D" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Alibaba Sentinel
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://nacos.io/zh-cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Alibaba Nacos
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://dubbo.apache.org/zh-cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Apache Dubbo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://skywalking.apache.org/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Apache SkyWalking
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          å‰ç«¯æ¡†æ¶
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://cn.vuejs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://element.eleme.cn/#/zh-CN" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Element UI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://react.docschina.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  React
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://ant.design/docs/react/introduce-cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Ant Design
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://antv.vision/zh" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Ant V
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.iconfont.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Iconfont çŸ¢é‡å›¾åº“
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          å¼€å‘å·¥å…·åŒ…
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="http://mvnrepository.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Maven Repository
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.hutool.cn/docs/#/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Hutool
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          åœ¨çº¿å·¥å…·
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://atool.vip/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  åœ¨çº¿å·¥å…·Web
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.sojson.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JSONæ ¼å¼åŒ–
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Contact" class="dropdown-title"><span class="title">Contact</span> <span class="arrow down"></span></button> <button type="button" aria-label="Contact" class="mobile-dropdown-title"><span class="title">Contact</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/xiaoli9965" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/XiaoLi9965" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ç äº‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java â˜•ï¸" class="dropdown-title"><span class="title">Java â˜•ï¸</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java â˜•ï¸" class="mobile-dropdown-title"><span class="title">Java â˜•ï¸</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          åŸºç¡€
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/java/åŸºç¡€/ConcurrentHashMap.html" class="nav-link">
  ConcurrentHashMap
</a></li><li class="dropdown-subitem"><a href="/blog/java/åŸºç¡€/hashmap.html" class="nav-link">
  HashMap
</a></li><li class="dropdown-subitem"><a href="/blog/java/åŸºç¡€/exception.html" class="nav-link">
  Exception
</a></li></ul></li><li class="dropdown-item"><h4>
          è™šæ‹Ÿæœº
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/java/jvm/å†…å­˜æ¨¡å‹.html" class="nav-link">
  å†…å­˜æ¨¡å‹
</a></li><li class="dropdown-subitem"><a href="/blog/java/jvm/åƒåœ¾å›æ”¶.html" class="nav-link">
  åƒåœ¾å›æ”¶
</a></li><li class="dropdown-subitem"><a href="/blog/java/jvm/ç±»åŠ è½½æœºåˆ¶.html" class="nav-link">
  ç±»åŠ è½½æœºåˆ¶
</a></li><li class="dropdown-subitem"><a href="/blog/java/jvm/æŠ„ä½œä¸š.html" class="nav-link">
  æŠ„ä½œä¸š
</a></li></ul></li><li class="dropdown-item"><h4>
          å¤šçº¿ç¨‹
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/java/å¤šçº¿ç¨‹/å¤šçº¿ç¨‹åŸºç¡€.html" class="nav-link">
  å¤šçº¿ç¨‹åŸºç¡€
</a></li><li class="dropdown-subitem"><a href="/blog/java/å¤šçº¿ç¨‹/CAS.html" class="nav-link">
  CAS
</a></li><li class="dropdown-subitem"><a href="/blog/java/å¤šçº¿ç¨‹/reentrantLock.html" class="nav-link">
  ReentrantLock
</a></li><li class="dropdown-subitem"><a href="/blog/java/å¤šçº¿ç¨‹/synchornized.html" class="nav-link">
  Synchornized
</a></li><li class="dropdown-subitem"><a href="/blog/java/å¤šçº¿ç¨‹/volatile.html" class="nav-link">
  Volatile
</a></li></ul></li><li class="dropdown-item"><h4>
          Nio
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/java/Nio/01_nioå¤šè·¯å¤ç”¨.html" class="nav-link">
  æ“ä½œç³»ç»Ÿçš„å¤šè·¯å¤ç”¨
</a></li><li class="dropdown-subitem"><a href="/blog/java/Nio/02_NIO&amp;Netty.html" class="nav-link">
  Java NIO
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ•°æ®åº“" class="dropdown-title"><span class="title">æ•°æ®åº“</span> <span class="arrow down"></span></button> <button type="button" aria-label="æ•°æ®åº“" class="mobile-dropdown-title"><span class="title">æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          MySql
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/MYSQL/01.html" class="nav-link">
  01
</a></li><li class="dropdown-subitem"><a href="/blog/MYSQL/02.html" class="nav-link">
  02
</a></li><li class="dropdown-subitem"><a href="/blog/MYSQL/03.html" class="nav-link">
  03
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="åˆ†å¸ƒå¼" class="dropdown-title"><span class="title">åˆ†å¸ƒå¼</span> <span class="arrow down"></span></button> <button type="button" aria-label="åˆ†å¸ƒå¼" class="mobile-dropdown-title"><span class="title">åˆ†å¸ƒå¼</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          MQ
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/mq/rabbit.html" class="nav-link">
  Rabbit
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/mq/rocket.html" class="nav-link">
  Rocket
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/mq/æŠ„ä½œä¸š.html" class="nav-link">
  æŠ„ä½œä¸š
</a></li></ul></li><li class="dropdown-item"><h4>
          Redis
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/redis/01_åŸºç¡€.html" class="nav-link">
  åŸºç¡€
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/redis/02_è¿›é˜¶.html" class="nav-link">
  è¿›é˜¶
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/redis/03_é›†ç¾¤.html" class="nav-link">
  é›†ç¾¤
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/redis/04_6ç‰ˆæœ¬.html" class="nav-link">
  6ç‰ˆæœ¬
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/redis/czy.html" class="nav-link">
  æŠ„ä½œä¸š
</a></li></ul></li><li class="dropdown-item"><h4>
          Zookeeper
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/zk/zk.html" class="nav-link">
  Zookeeper
</a></li></ul></li><li class="dropdown-item"><h4>
          åˆ†å¸ƒå¼ä¸€è‡´æ€§æ–¹æ¡ˆ
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/åˆ†å¸ƒå¼ä¸€è‡´æ€§/paxos.html" class="nav-link">
  Paxos
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/åˆ†å¸ƒå¼ä¸€è‡´æ€§/zookeeper.html" class="nav-link">
  Zookeeper
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/åˆ†å¸ƒå¼ä¸€è‡´æ€§/åˆ†å¸ƒå¼äº‹åŠ¡.html" class="nav-link">
  åˆ†å¸ƒå¼äº‹åŠ¡
</a></li><li class="dropdown-subitem"><a href="/blog/åˆ†å¸ƒå¼/åˆ†å¸ƒå¼ä¸€è‡´æ€§/åˆ†å¸ƒå¼é”.html" class="nav-link">
  åˆ†å¸ƒå¼é”
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ”—" class="dropdown-title"><span class="title">ğŸ”—</span> <span class="arrow down"></span></button> <button type="button" aria-label="ğŸ”—" class="mobile-dropdown-title"><span class="title">ğŸ”—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.injdk.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JDKä¸‹è½½
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><h4>
          æ¡†æ¶æ–‡æ¡£
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://mp.baomidou.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MyBatis-Plus
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://seata.io/zh-cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Alibaba Seata
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/alibaba/Sentinel/wiki/%E4%BB%8B%E7%BB%8D" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Alibaba Sentinel
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://nacos.io/zh-cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Alibaba Nacos
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://dubbo.apache.org/zh-cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Apache Dubbo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://skywalking.apache.org/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Apache SkyWalking
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          å‰ç«¯æ¡†æ¶
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://cn.vuejs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://element.eleme.cn/#/zh-CN" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Element UI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://react.docschina.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  React
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://ant.design/docs/react/introduce-cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Ant Design
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://antv.vision/zh" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Ant V
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.iconfont.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Iconfont çŸ¢é‡å›¾åº“
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          å¼€å‘å·¥å…·åŒ…
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="http://mvnrepository.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Maven Repository
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.hutool.cn/docs/#/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Hutool
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          åœ¨çº¿å·¥å…·
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://atool.vip/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  åœ¨çº¿å·¥å…·Web
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.sojson.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JSONæ ¼å¼åŒ–
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Contact" class="dropdown-title"><span class="title">Contact</span> <span class="arrow down"></span></button> <button type="button" aria-label="Contact" class="mobile-dropdown-title"><span class="title">Contact</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/xiaoli9965" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/XiaoLi9965" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ç äº‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>å…¬å¹³/éå…¬å¹³é”/AQS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/reentrantLock.html#_1-reentrantlock-åŸç†æ¦‚è¿°" class="sidebar-link">1. ReentrantLock åŸç†æ¦‚è¿°</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/reentrantLock.html#_1-1-reentrantlock-ç‰¹æ€§" class="sidebar-link">1.1. ReentrantLock ç‰¹æ€§</a></li></ul></li><li><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/reentrantLock.html#_2-aqs" class="sidebar-link">2. AQS</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/reentrantLock.html#_3-nodeå¯¹è±¡" class="sidebar-link">3. Nodeå¯¹è±¡</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/reentrantLock.html#_3-1-äº”ç§çŠ¶æ€" class="sidebar-link">3.1. äº”ç§çŠ¶æ€</a></li><li class="sidebar-sub-header"><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/reentrantLock.html#_3-2-aqsæ¨¡å¼" class="sidebar-link">3.2. AQSæ¨¡å¼</a></li></ul></li><li><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/reentrantLock.html#_4-é”" class="sidebar-link">4. é”</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/reentrantLock.html#_4-1-fairsyncå…¬å¹³é”" class="sidebar-link">4.1. FairSyncå…¬å¹³é”</a></li><li class="sidebar-sub-header"><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/reentrantLock.html#_4-2-nonfairsyncå…¬å¹³é”" class="sidebar-link">4.2. NonFairSyncå…¬å¹³é”</a></li><li class="sidebar-sub-header"><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/reentrantLock.html#_4-3-è·å–é”" class="sidebar-link">4.3. è·å–é”</a></li><li class="sidebar-sub-header"><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/reentrantLock.html#_4-4-tryacquire-arg" class="sidebar-link">4.4. tryAcquire(arg)</a></li><li class="sidebar-sub-header"><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/reentrantLock.html#_4-5-acquirequeued" class="sidebar-link">4.5. acquireQueued</a></li><li class="sidebar-sub-header"><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/reentrantLock.html#_4-6-enq-èª“æ­»è¦åŠ å…¥åˆ°clhé˜Ÿåˆ—ä¸­" class="sidebar-link">4.6. enq - èª“æ­»è¦åŠ å…¥åˆ°CLHé˜Ÿåˆ—ä¸­</a></li><li class="sidebar-sub-header"><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/reentrantLock.html#_4-7-shouldparkafterfailedacquire-æ’é˜Ÿå¤±è´¥åæŒ‚èµ·" class="sidebar-link">4.7. shouldParkAfterFailedAcquire - æ’é˜Ÿå¤±è´¥åæŒ‚èµ·</a></li></ul></li><li><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/reentrantLock.html#_5-é‡Šæ”¾é”" class="sidebar-link">5. é‡Šæ”¾é”</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/reentrantLock.html#_5-1-é‡Šæ”¾æµç¨‹-release" class="sidebar-link">5.1. é‡Šæ”¾æµç¨‹  -  release()</a></li></ul></li><li><a href="/blog/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/reentrantLock.html#_6-å¯é‡å…¥åŸç†" class="sidebar-link">6. å¯é‡å…¥åŸç†</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>å‚è€ƒ <a href="https://www.bilibili.com/video/BV1eJ411M7aN?p=10" target="_blank" rel="noopener noreferrer">Bç«™è§†é¢‘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_1-reentrantlock-åŸç†æ¦‚è¿°"><a href="#_1-reentrantlock-åŸç†æ¦‚è¿°" class="header-anchor">#</a> 1. ReentrantLock åŸç†æ¦‚è¿°</h2> <div class="custom-block tip"><p class="custom-block-title">ä¸‰ä¸ªå†…éƒ¨ç±»</p> <p><img src="http://md.yike.link/20200710143940_0GzSys_Screenshot.jpeg" alt="ä¸‰ä¸ªå†…éƒ¨ç±»"> <img src="http://md.yike.link/20200710144829_5Livrs_Screenshot.jpeg" alt="ç»§æ‰¿å…³ç³»">
ReentrantLockå†…éƒ¨æœ‰ä¸‰ä¸ªå†…éƒ¨ç±»Sync(åŒæ­¥å™¨),NonfairSyncï¼ˆéå…¬å¹³é”ï¼‰,FairSyncï¼ˆå…¬å¹³é”ï¼‰ï¼Œå¦å¤–å®ç°äº†Lockæ¥å£ã€‚</p> <p>Sync(åŒæ­¥å™¨)ç»§æ‰¿äº†AQSç±»ï¼ˆAbstractQueuedSynchronizerï¼‰ï¼›
NonfairSyncï¼ˆéå…¬å¹³é”ï¼‰ç»§æ‰¿äº† Syncç±»ï¼›
FairSyncï¼ˆå…¬å¹³é”ï¼‰ç»§æ‰¿äº†Syncç±»ã€‚</p></div> <p>æ‰€ä»¥ReentrantLockæ˜¯åŸºäºAQSå®ç°çš„ï¼ŒAQSæ˜¯javaå¹¶å‘åŒ…çš„åŸºç¡€ç±»ã€‚é‡Œé¢ç»´æŠ¤è€…ä¸€ä¸ªåŒæ­¥çŠ¶æ€stateï¼Œå’Œä¸€ä¸ªåŒæ­¥é˜Ÿåˆ—FIFOä»¥åŠæ“ä½œstateå’ŒåŒæ­¥é˜Ÿåˆ—çš„æ–¹æ³•ã€‚</p> <p><strong>å¦‚æœæœ‰ä¸€ä¸ªçº¿ç¨‹è¿‡æ¥å°è¯•ç”¨ReentrantLockçš„lock()æ–¹æ³•è¿›è¡ŒåŠ é”ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿ</strong></p> <p><strong>AQSå¯¹è±¡å†…éƒ¨</strong>æœ‰ä¸€ä¸ªæ ¸å¿ƒçš„å˜é‡å«åš<strong>state</strong>ï¼Œæ˜¯intç±»å‹çš„å¹¶ä¸”<strong>åŠ äº†volatileå…³é”®å­—</strong>ï¼Œä»£è¡¨äº†åŠ é”çš„çŠ¶æ€ã€‚<strong>åˆå§‹çŠ¶æ€ä¸‹ï¼Œè¿™ä¸ªstateçš„å€¼æ˜¯0</strong>ã€‚</p> <p><strong>AQSå†…éƒ¨</strong>è¿˜æœ‰ä¸€ä¸ªå…³é”®å˜é‡E<strong>xclusiveOwnerThread</strong>ï¼Œç”¨æ¥è®°å½•å½“å‰åŠ é”çš„æ˜¯å“ªä¸ªçº¿ç¨‹ï¼Œåˆå§‹åŒ–çŠ¶æ€ä¸‹ï¼Œè¿™ä¸ªå˜é‡æ˜¯null</p> <p><img src="http://md.yike.link/20200710144203_kSbNLr_Screenshot.jpeg" alt="AQSå†…éƒ¨"></p> <h3 id="_1-1-reentrantlock-ç‰¹æ€§"><a href="#_1-1-reentrantlock-ç‰¹æ€§" class="header-anchor">#</a> 1.1. ReentrantLock ç‰¹æ€§</h3> <ul><li>å¯é‡å…¥é”</li> <li>å¯å“åº”ä¸­æ–­</li> <li>å¯å°è¯•åŠ é”</li> <li>é™æ—¶ç­‰å¾…å°è¯•åŠ é”</li> <li>å…¬å¹³é”ã€éå…¬å¹³é”</li> <li>ä¸Conditionä¿¡å·é‡ç»“åˆä½¿ç”¨</li></ul> <h2 id="_2-aqs"><a href="#_2-aqs" class="header-anchor">#</a> 2. AQS</h2> <blockquote><p>AbstarctQueuedSynchronizerç®€ç§°AQS</p></blockquote> <p>AQSä½¿ç”¨ä¸€ä¸ªFIFOé˜Ÿåˆ—è¡¨ç¤ºæ’é˜Ÿç­‰å¾…é”çš„çº¿ç¨‹ï¼Œé˜Ÿåˆ—å¤´ç»“ç‚¹ç§°ä½œâ€œå“¨å…µèŠ‚ç‚¹â€æˆ–è€…â€œå“‘ç»“ç‚¹â€ï¼Œå®ƒä¸ä¸ä»»ä½•çº¿ç¨‹å…³è”ã€‚å…¶ä»–çš„èŠ‚ç‚¹ä¸ç­‰å¾…çº¿ç¨‹å…³è”ï¼Œæ¯ä¸ªé˜¶æ®µç»´æŠ¤ä¸€ä¸ªç­‰å¾…çŠ¶æ€waitStatusã€‚å¦‚å›¾ï¼š
<img src="http://md.yike.link/20200710144600_arveVH_Screenshot.jpeg" alt="AQS"></p> <h2 id="_3-nodeå¯¹è±¡"><a href="#_3-nodeå¯¹è±¡" class="header-anchor">#</a> 3. Nodeå¯¹è±¡</h2> <h3 id="_3-1-äº”ç§çŠ¶æ€"><a href="#_3-1-äº”ç§çŠ¶æ€" class="header-anchor">#</a> 3.1. äº”ç§çŠ¶æ€</h3> <blockquote><p>è´Ÿå€¼è¡¨ç¤ºç»“ç‚¹å¤„äºæœ‰æ•ˆç­‰å¾…çŠ¶æ€ï¼Œè€Œæ­£å€¼è¡¨ç¤ºç»“ç‚¹å·²è¢«å–æ¶ˆã€‚æ‰€ä»¥æºç ä¸­å¾ˆå¤šåœ°æ–¹ç”¨&gt;0ã€&lt;0æ¥åˆ¤æ–­ç»“ç‚¹çš„çŠ¶æ€æ˜¯å¦æ­£å¸¸ã€‚</p></blockquote> <table><thead><tr><th>åç§°</th> <th>å¯¹åº”å·</th> <th>è¯´æ˜</th></tr></thead> <tbody><tr><td><strong>EXCLUSIVE</strong></td> <td>0</td> <td>é»˜è®¤çŠ¶æ€</td></tr> <tr><td><strong>CANCELLED</strong></td> <td>1</td> <td>è¡¨ç¤ºå½“å‰ç»“ç‚¹å·²å–æ¶ˆè°ƒåº¦ã€‚å½“timeoutæˆ–è¢«ä¸­æ–­ï¼ˆå“åº”ä¸­æ–­çš„æƒ…å†µä¸‹ï¼‰<br>ä¼šè§¦å‘å˜æ›´ä¸ºæ­¤çŠ¶æ€ï¼Œè¿›å…¥è¯¥çŠ¶æ€åçš„ç»“ç‚¹å°†ä¸ä¼šå†å˜åŒ–ã€‚</td></tr> <tr><td><strong>SIGNAL</strong></td> <td>-1</td> <td>è¡¨ç¤ºåç»§ç»“ç‚¹åœ¨ç­‰å¾…å½“å‰ç»“ç‚¹å”¤é†’ã€‚<br>åç»§ç»“ç‚¹å…¥é˜Ÿæ—¶ï¼Œä¼šå°†å‰ç»§ç»“ç‚¹çš„çŠ¶æ€æ›´æ–°ä¸ºSIGNALã€‚</td></tr> <tr><td><strong>CONDITION</strong></td> <td>-2</td> <td>è¡¨ç¤ºç»“ç‚¹ç­‰å¾…åœ¨Conditionä¸Šï¼Œå½“å…¶ä»–çº¿ç¨‹è°ƒç”¨äº†Conditionçš„signal()æ–¹æ³•åï¼ŒCONDITIONçŠ¶æ€çš„ç»“ç‚¹å°†<strong>ä»ç­‰å¾…é˜Ÿåˆ—è½¬ç§»åˆ°åŒæ­¥é˜Ÿåˆ—ä¸­</strong>ï¼Œç­‰å¾…è·å–åŒæ­¥é”ã€‚</td></tr> <tr><td><strong>PROPAGATE</strong></td> <td>-3</td> <td>å…±äº«æ¨¡å¼ä¸‹ï¼Œå‰ç»§ç»“ç‚¹ä¸ä»…ä¼šå”¤é†’å…¶åç»§ç»“ç‚¹ï¼ŒåŒæ—¶ä¹Ÿå¯èƒ½ä¼šå”¤é†’åç»§çš„åç»§ç»“ç‚¹ã€‚</td></tr></tbody></table> <p><img src="http://md.yike.link/20200710133252_RmyvhO_Screenshot.jpeg" alt="Nodeå¯¹è±¡"></p> <h3 id="_3-2-aqsæ¨¡å¼"><a href="#_3-2-aqsæ¨¡å¼" class="header-anchor">#</a> 3.2. AQSæ¨¡å¼</h3> <p>AQS æœ‰ä¸¤ç§æ¨¡å¼</p> <ul><li>ä¸€ç§æ˜¯ç‹¬å æ¨¡å¼ EXCLUSIVE ï¼Œå¦å¤–ä¸€ç§æ˜¯</li> <li>å…±äº«æ¨¡å¼ SHAREDï¼›è€ŒReentrantLockæ˜¯ç‹¬å æ¨¡å¼ã€‚</li></ul> <hr> <ul><li><p>SHARED å…±äº«æ¨¡å¼ï¼Œè¡¨ç¤ºå¯ä»¥å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œ</p></li> <li><p>EXCLUSIVE ç‹¬å æ¨¡å¼ï¼Œè¡¨ç¤ºåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æ‰§è¡Œ</p></li> <li><p>CANCELLEDï¼š1 å–æ¶ˆçŠ¶æ€ï¼Œè¡¨ç¤ºè¿™ä¸ªç»“ç‚¹è¢«å–æ¶ˆäº†ï¼Œå¯èƒ½æ˜¯è¢«ä¸»åŠ¨å–æ¶ˆæˆ–è€…è¶…æ—¶ï¼Œåç»­è¿™ä¸ªç»“ç‚¹ä¼šè¢«è¸¢å‡ºé˜Ÿåˆ—</p></li> <li><p>SIGNALï¼š -1 é€šçŸ¥åç»§ç»“ç‚¹ï¼Œè¡¨ç¤ºè¿™ä¸ªç»“ç‚¹æ‰§è¡Œå®Œæˆä»¥åï¼Œéœ€è¦é€šçŸ¥å”¤é†’åç»§çš„ç»“ç‚¹</p></li> <li><p>CONDITIONï¼š-2 è¯´æ˜è¿™ä¸ªç»“ç‚¹å› ä¸ºè¢«æŸä¸€ä¸ªconditionæŒ‚èµ·äº†</p></li> <li><p>PROPAGATEï¼š-3 åœ¨å…±äº«æ¨¡å¼ä¸‹ï¼Œä¸‹ä¸€æ¬¡è·å–é”åå¯ä»¥æ— é™ä¼ æ’­ï¼ˆä¸å¤ªæ‡‚è¿™ä¸ªæ„æ€ï¼Œåç»­å†å¥½å¥½ç†è§£ï¼‰</p></li></ul> <p>é™¤äº†ä»¥ä¸Šå¸¸é‡ï¼Œå†çœ‹ä¸‹å‡ ä¸ªå˜é‡</p> <ul><li>waitStatus å½“å‰ç»“ç‚¹çš„çŠ¶æ€ï¼Œé»˜è®¤æ˜¯0ï¼Œå¯ä»¥æ˜¯CANCELLã€SIGNAL ç­‰</li> <li>prev å‰ç»§ç»“ç‚¹</li> <li>next åç»§ç»“ç‚¹</li> <li>thread å¯¹åº”çš„çº¿ç¨‹</li> <li>nextWaiter ä¸‹ä¸€ä¸ªç­‰å¾…conditionçš„ç»“ç‚¹</li> <li>state çŠ¶æ€ï¼›æ˜¯ä¸€ä¸ªintå€¼ï¼Œè¡¨ç¤ºå½“å‰çº¿ç¨‹å ç”¨èµ„æºçš„æ•°é‡ï¼›0è¡¨ç¤ºç©ºé—²ï¼Œæ²¡æœ‰çº¿ç¨‹å ç”¨ï¼›ReentrantLockçš„stateè¡¨ç¤ºçº¿ç¨‹é‡å…¥é”çš„æ¬¡æ•°</li></ul> <p>åœ¨AQSé‡Œé¢çš„æ–¹æ³•åˆ†æˆä¸¤ç±»ï¼š</p> <ul><li>acquire()ã€acquireInterruptibly()ã€release() ä¸ä»¥shareç»“å°¾çš„æ–¹æ³•åï¼›</li> <li>acquireShared()ã€acquireSharedInterruptibly()ã€releaseShared() ä»¥shareç»“å°¾çš„æ–¹æ³•åï¼›<br> <strong>é¡¾åæ€ä¹‰ï¼Œ ä»¥shareç»“å°¾çš„æ–¹æ³•ç”¨äºå…±äº«æ¨¡å¼ï¼Œä¸ä»¥shareç»“å°¾çš„æ–¹æ³•ç”¨äºç‹¬å æ¨¡å¼ã€‚</strong></li></ul> <h2 id="_4-é”"><a href="#_4-é”" class="header-anchor">#</a> 4. é”</h2> <h3 id="_4-1-fairsyncå…¬å¹³é”"><a href="#_4-1-fairsyncå…¬å¹³é”" class="header-anchor">#</a> 4.1. FairSyncå…¬å¹³é”</h3> <ul><li>ä¸ç›´æ¥æŠ¢å é”èµ„æº</li> <li>ä¹–ä¹–æ’é˜Ÿï¼Œç¡®è®¤å‰é¢æ²¡æœ‰å…¶ä»–çº¿ç¨‹å†è·å–é”èµ„æº</li></ul> <p><img src="http://md.yike.link/20200710145543_1uJ3ym_Screenshot.jpeg" alt="FairSyncå…¬å¹³é”"></p> <h3 id="_4-2-nonfairsyncå…¬å¹³é”"><a href="#_4-2-nonfairsyncå…¬å¹³é”" class="header-anchor">#</a> 4.2. NonFairSyncå…¬å¹³é”</h3> <p><img src="http://md.yike.link/20200710145603_5kUQjN_Screenshot.jpeg" alt="NonFairSyncå…¬å¹³é”"></p> <h3 id="_4-3-è·å–é”"><a href="#_4-3-è·å–é”" class="header-anchor">#</a> 4.3. è·å–é”</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">acquire</span><span class="token punctuation">(</span><span class="token keyword">int</span> arg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>
    	<span class="token comment">//å°è¯•è·å–é”(æˆ–é”é‡å…¥),è·å–åˆ°äº†è¿”å›true ,å¦åˆ™false</span>
    	<span class="token operator">!</span><span class="token function">tryAcquire</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
        <span class="token comment">// å¦‚æœæ²¡æœ‰è·å–åˆ°é”,è¿›è¡Œæ’é˜Ÿæµç¨‹</span>
        <span class="token comment">// 1.addWaiterå°†çº¿ç¨‹è£…å…¥CHLé“¾è¡¨(æ²¡æœ‰å°±åˆ›å»ºä¸€ä¸ªå¤´éƒ¨ä¸ºç©ºå¯¹è±¡çš„é“¾è¡¨)</span>
        <span class="token comment">// 2.acquireQueued()è¿›è¡Œæ’é˜Ÿ</span>
        <span class="token comment">// acquireQueued è¿™ä¸ªæ–¹æ³•è·å–åˆ°é”ä¹‹åä¼šç›´æ¥æ‰§è¡Œ,æ²¡æœ‰è·å–åˆ°å°±ä¼šè¢«æŒ‚èµ·</span>
        <span class="token function">acquireQueued</span><span class="token punctuation">(</span><span class="token function">addWaiter</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token punctuation">.</span>EXCLUSIVE<span class="token punctuation">)</span><span class="token punctuation">,</span> arg<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token function">selfInterrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4-4-tryacquire-arg"><a href="#_4-4-tryacquire-arg" class="header-anchor">#</a> 4.4. tryAcquire(arg)</h3> <blockquote><p>è¿›è¡Œè·å–é”,å¦‚æœè·å–é”æˆåŠŸå°±è¿”å›true ,å¦åˆ™false</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">final</span> <span class="token keyword">boolean</span> <span class="token function">nonfairTryAcquire</span><span class="token punctuation">(</span><span class="token keyword">int</span> acquires<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token class-name">Thread</span> current <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//getStateçš„ åˆå§‹å€¼æ˜¯0</span>
    <span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//åœ¨stateç­‰äº0çš„æ—¶å€™(ä»£è¡¨å½“å‰æ²¡æœ‰çº¿ç¨‹åœ¨æ‰§è¡Œ)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//å¦‚æœæˆåŠŸæ”¹å˜STATEçš„çŠ¶æ€,å°±è®¾ç½®å½“å‰çº¿ç¨‹ç‹¬å </span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">compareAndSetState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> acquires<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">setExclusiveOwnerThread</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//stateä¸ç­‰äº0,ä»£è¡¨æœ‰çº¿ç¨‹å·²ç»é”å®šäº†</span>
    <span class="token comment">//1.åˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦å·²ç»è·å–åˆ°é”äº†(é‡å…¥é”é€»è¾‘)</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">==</span> <span class="token function">getExclusiveOwnerThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// é‡å…¥æ¬¡æ•°+1</span>
        <span class="token keyword">int</span> nextc <span class="token operator">=</span> c <span class="token operator">+</span> acquires<span class="token punctuation">;</span>
        <span class="token comment">//å¦‚æœé‡å…¥æ¬¡æ•°å°äº0,å°±æ˜¯æœ‰é—®é¢˜</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nextc <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> 
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Maximum lock count exceeded&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//å°†é‡å…¥æ¬¡æ•°è®¾ç½®åˆ°stateä¸Š</span>
        <span class="token function">setState</span><span class="token punctuation">(</span>nextc<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4-5-acquirequeued"><a href="#_4-5-acquirequeued" class="header-anchor">#</a> 4.5. acquireQueued</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">final</span> <span class="token keyword">boolean</span> <span class="token function">acquireQueued</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">Node</span> node<span class="token punctuation">,</span> <span class="token keyword">int</span> arg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">boolean</span> failed <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">boolean</span> interrupted <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">final</span> <span class="token class-name">Node</span> p <span class="token operator">=</span> node<span class="token punctuation">.</span><span class="token function">predecessor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// å‰ä¸€ä¸ªç­‰äºå¤´èŠ‚ç‚¹ å¹¶ä¸” æˆ‘è·å–åˆ°äº†é”</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">==</span> head <span class="token operator">&amp;&amp;</span> <span class="token function">tryAcquire</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// å°†å½“å‰çº¿ç¨‹è°ƒæ•´ä¸ºå¤´</span>
                <span class="token function">setHead</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
                p<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">//å»æ‰Pçš„å…¶ä»–å¼•ç”¨, help GC</span>
                failed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> interrupted<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// å¦åˆ™ æ£€æŸ¥æ’é˜Ÿçš„å‰ä¸€ä¸ªèŠ‚ç‚¹æ˜¯ä¸æ˜¯SINGLEçŠ¶æ€,</span>
            <span class="token comment">// å¦‚æœæ˜¯å°±å°†å½“å‰çº¿ç¨‹æŒ‚èµ·</span>
            <span class="token comment">// å¦‚æœä¸æ˜¯ æ— çº¿å¾ªç¯è·å–å‰ä¸€ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€,çŸ¥é“å‰ç½®èŠ‚ç‚¹ä¸ºSINGLE</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">shouldParkAfterFailedAcquire</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> node<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
                <span class="token function">parkAndCheckInterrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                interrupted <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>failed<span class="token punctuation">)</span>
            <span class="token comment">//å–æ¶ˆè·å–é”</span>
            <span class="token function">cancelAcquire</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_4-5-1-addwaiter-node-exclusive"><a href="#_4-5-1-addwaiter-node-exclusive" class="header-anchor">#</a> 4.5.1. addWaiter(Node.EXCLUSIVE))</h4> <blockquote><p>å°†å½“å‰ä»»åŠ¡åŠ å…¥æ’é˜Ÿé˜Ÿåˆ—ä¸­,</p> <p>å¦‚æœé˜Ÿåˆ—æ²¡æœ‰åˆ›å»ºå°±åˆ›å»ºä¸€ä¸ªå†åŠ å…¥</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">Node</span> <span class="token function">addWaiter</span><span class="token punctuation">(</span><span class="token class-name">Node</span> mode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//åˆ›å»ºä¸€ä¸ªNode  mode=EXCLUSIVE</span>
    <span class="token class-name">Node</span> node <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> mode<span class="token punctuation">)</span><span class="token punctuation">;</span>
   	<span class="token comment">// tailç¬¬ä¸€æ¬¡è‚¯å®šæ˜¯ç©º,</span>
    <span class="token class-name">Node</span> pred <span class="token operator">=</span> tail<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pred <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//å°†å¯¹è±¡è¿½åŠ åˆ°CLHé“¾è¡¨å°¾éƒ¨</span>
        node<span class="token punctuation">.</span>prev <span class="token operator">=</span> pred<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">compareAndSetTail</span><span class="token punctuation">(</span>pred<span class="token punctuation">,</span> node<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            pred<span class="token punctuation">.</span>next <span class="token operator">=</span> node<span class="token punctuation">;</span>
            <span class="token keyword">return</span> node<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//å°†èŠ‚ç‚¹åŠ å…¥é“¾è¡¨ä¸­</span>
    <span class="token function">enq</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> node<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4-6-enq-èª“æ­»è¦åŠ å…¥åˆ°clhé˜Ÿåˆ—ä¸­"><a href="#_4-6-enq-èª“æ­»è¦åŠ å…¥åˆ°clhé˜Ÿåˆ—ä¸­" class="header-anchor">#</a> 4.6. enq - èª“æ­»è¦åŠ å…¥åˆ°CLHé˜Ÿåˆ—ä¸­</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// å‚æ•°ä¸ºå½“å‰çº¿ç¨‹åˆ›çš„Node</span>
<span class="token keyword">private</span> <span class="token class-name">Node</span> <span class="token function">enq</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">Node</span> node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ­»å¾ªç¯</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//ç¬¬ä¸€æ¬¡ä¸€å®šç­‰äºnull</span>
        <span class="token class-name">Node</span> t <span class="token operator">=</span> tail<span class="token punctuation">;</span>
        <span class="token comment">//1.åˆ›å»ºä¸€ä¸ªç©ºèŠ‚ç‚¹,å³ä¸ºå¤´åˆä¸ºå°¾</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">compareAndSetHead</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token comment">//è¿›è¿‡è¿™ä¸€è½®æ“ä½œ,headå’Œtailéƒ½æ˜¯ä¸€ä¸ªç©ºçš„Node</span>
                tail <span class="token operator">=</span> head<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>	<span class="token comment">//è¿›è¡Œé“¾è·¯ç»„è£…,æ— é™å¾ªç¯,å¿…é¡»åŠ å…¥åˆ°é“¾è·¯ä¸­</span>
            <span class="token comment">//2. å°†nodeçš„åƒä¸€ä¸ªèŠ‚ç‚¹è®¾ç½®ä¸ºhead</span>
            node<span class="token punctuation">.</span>prev <span class="token operator">=</span> t<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">compareAndSetTail</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> node<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//å°†headçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹è®¾ç½®ä¸ºnode</span>
                t<span class="token punctuation">.</span>next <span class="token operator">=</span> node<span class="token punctuation">;</span>
                <span class="token keyword">return</span> t<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4-7-shouldparkafterfailedacquire-æ’é˜Ÿå¤±è´¥åæŒ‚èµ·"><a href="#_4-7-shouldparkafterfailedacquire-æ’é˜Ÿå¤±è´¥åæŒ‚èµ·" class="header-anchor">#</a> 4.7. shouldParkAfterFailedAcquire - æ’é˜Ÿå¤±è´¥åæŒ‚èµ·</h3> <blockquote><p>è·å–å‰ä¸€ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€,</p> <p>å¦‚æœå‰ä¸€ä¸ªèŠ‚ç‚¹æ˜¯SingleçŠ¶æ€å°±æ”¾true,</p> <p>å¦åˆ™å°†å‰ä¸€ä¸ªèŠ‚ç‚¹æ”¹æˆSINGLEä¸“ä¸š</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">shouldParkAfterFailedAcquire</span><span class="token punctuation">(</span><span class="token class-name">Node</span> pred<span class="token punctuation">,</span> <span class="token class-name">Node</span> node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> ws <span class="token operator">=</span> pred<span class="token punctuation">.</span>waitStatus<span class="token punctuation">;</span>
    <span class="token comment">// è¿™ä¸ªçŠ¶æ€ä»£è¡¨åç»§èŠ‚ç‚¹ç­‰å¾…å‰ç½®èŠ‚ç‚¹çš„å”¤é†’</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>ws <span class="token operator">==</span> <span class="token class-name">Node</span><span class="token punctuation">.</span>SIGNAL<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

    <span class="token comment">// å¤§äº0ä»£è¡¨è¿™ä¸ªèŠ‚ç‚¹çŠ¶æ€ä¸ºéæ­£å¸¸çŠ¶æ€(å–æ¶ˆçŠ¶æ€)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>ws <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">do</span> <span class="token punctuation">{</span>
            <span class="token comment">//æ— çº¿å›æº¯,,ç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªæ­£å¸¸çŠ¶æ€çš„èŠ‚ç‚¹,ç„¶ååœ¨è¿›è¡Œä¸‹ä¸€æ­¥</span>
            node<span class="token punctuation">.</span>prev <span class="token operator">=</span> pred <span class="token operator">=</span> pred<span class="token punctuation">.</span>prev<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>pred<span class="token punctuation">.</span>waitStatus <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å¦‚æœæ‰¾åˆ°äº†å°±æŠŠå½“å‰èŠ‚ç‚¹é“¾æ¥åˆ°æ­£å¸¸çš„èŠ‚ç‚¹åé¢</span>
        pred<span class="token punctuation">.</span>next <span class="token operator">=</span> node<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">//çŠ¶æ€å°äº0ä»£è¡¨åœ¨æœ‰æ•ˆçŠ¶æ€</span>
        <span class="token comment">//å°†å‰ä¸€ä¸ªèŠ‚ç‚¹æ”¹ä¸º SIGNALçŠ¶æ€</span>
        <span class="token function">compareAndSetWaitStatus</span><span class="token punctuation">(</span>pred<span class="token punctuation">,</span> ws<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token punctuation">.</span>SIGNAL<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_5-é‡Šæ”¾é”"><a href="#_5-é‡Šæ”¾é”" class="header-anchor">#</a> 5. é‡Šæ”¾é”</h2> <h3 id="_5-1-é‡Šæ”¾æµç¨‹-release"><a href="#_5-1-é‡Šæ”¾æµç¨‹-release" class="header-anchor">#</a> 5.1. é‡Šæ”¾æµç¨‹  -  release()</h3> <ul><li>å°†å½“å‰çº¿ç¨‹çš„é‡å…¥æ¬¡æ•°-1 , å¦‚æœå‡æˆäº†0å°±å°†AQSä¸­çš„ç‹¬å çº¿ç¨‹æ ‡è®°è®¾ç½®ä¸ºç©º
<ul><li>å¦‚æœstateå¤§äº0 ä»£è¡¨å½“å‰çº¿ç¨‹è¿˜æ‹¥æœ‰é”, éœ€ç­‰å¾…æ‰€æœ‰é‡å…¥é”é‡Šæ”¾å®Œæ¯•æ‰ä¼šçœŸæ­£é‡Šæ”¾çº¿ç¨‹</li></ul></li> <li>å½“é‡å…¥å®Œå…¨é‡Šæ”¾ä¹‹åå¼€å§‹å”¤é†’å…¶ä»–çº¿ç¨‹,å¤´èŠ‚ç‚¹ä¸ä¸ºç©ºçš„æƒ…å†µä¸‹,(è°ƒç”¨unparkSuccessoræ–¹æ³•),  <code>å¦‚æœåˆ›å»ºäº†CLHé˜Ÿåˆ—ä¹‹åå¤´èŠ‚ç‚¹ä¸ä¼šä¸ºç©º</code> <ul><li>åˆ¤æ–­å¤´èŠ‚ç‚¹çŠ¶æ€,çŠ¶æ€ä¸ºæŒ‚èµ·æ—¶(å°äº0) ,å°±å°†çŠ¶æ€æ”¹ä¸ºåˆå§‹çŠ¶æ€</li> <li>è·å–å¤´èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
<ul><li>ä¸ç­‰äºç©º : å”¤é†’</li> <li>ç­‰äºç©ºæˆ–è€…çŠ¶æ€ä¸æ­£å¸¸: å°è¯•è·å–æœ‰æ²¡æœ‰ä¸‹ä¸€ä¸ªèŠ‚ç‚¹,<code>å¦‚æœæœ‰å°±ä¸€ä»åå¾€å‰éå†,ç›´åˆ°æ‰¾åˆ°è·ç¦»å¤´èŠ‚ç‚¹æœ€è¿‘çš„çŠ¶æ€æ­£å¸¸çš„èŠ‚ç‚¹</code>,å°†å…¶å”¤é†’</li></ul></li></ul></li></ul> <h2 id="_6-å¯é‡å…¥åŸç†"><a href="#_6-å¯é‡å…¥åŸç†" class="header-anchor">#</a> 6. å¯é‡å…¥åŸç†</h2> <p>**åŸç†ï¼š**æ£€æŸ¥stateå­—æ®µï¼Œè‹¥ä¸º0ï¼Œè¡¨ç¤ºé”æœªè¢«å ç”¨ï¼Œé‚£ä¹ˆå°è¯•å ç”¨ï¼Œè‹¥ä¸ä¸º0ï¼Œæ£€æŸ¥å½“å‰é”æ˜¯å¦è¢«è‡ªå·±å 
ç”¨ï¼Œè‹¥è¢«è‡ªå·±å ç”¨ï¼Œåˆ™æ›´æ–°stateå­—æ®µï¼Œè¡¨ç¤ºé‡å…¥é”çš„æ¬¡æ•°ã€‚å¦‚æœä»¥ä¸Šä¸¤ç‚¹éƒ½æ²¡æœ‰æˆåŠŸï¼Œåˆ™è·å–é”å¤±è´¥ï¼Œè¿”å›falseã€‚</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">æœ€è¿‘æ›´æ–°:</span> <span class="time">8/12/2021, 1:15:14 AM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.0c328148.js" defer></script><script src="/blog/assets/js/2.ef27732c.js" defer></script><script src="/blog/assets/js/23.00e498db.js" defer></script>
  </body>
</html>
