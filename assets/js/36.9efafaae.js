(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{470:function(_,v,s){"use strict";s.r(v);var e=s(34),a=Object(e.a)({},(function(){var _=this,v=_.$createElement,s=_._self._c||v;return s("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[s("hr"),_._v(" "),s("p",[_._v("title: æŠ„ä½œä¸š\ndate: '2020-03-26 00:00:00'\nsidebar: 'auto'\ncategories:")]),_._v(" "),s("ul",[s("li",[_._v("åˆ†å¸ƒå¼\ntags:")]),_._v(" "),s("li",[_._v("redis")]),_._v(" "),s("li",[_._v("é¢è¯•é¢˜")])]),_._v(" "),s("hr"),_._v(" "),s("h1",{attrs:{id:"redis-é¢è¯•é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redis-é¢è¯•é¢˜"}},[_._v("#")]),_._v(" Redis é¢è¯•é¢˜")]),_._v(" "),s("h2",{attrs:{id:"_1-ğŸ¤£memcached-å’Œ-redis-çš„åŒºåˆ«"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-ğŸ¤£memcached-å’Œ-redis-çš„åŒºåˆ«"}},[_._v("#")]),_._v(" 1. ğŸ¤£Memcached å’Œ Redis çš„åŒºåˆ«")]),_._v(" "),s("ul",[s("li",[_._v("memcached ä¸€èˆ¬ä¸æŒä¹…åŒ–(å¯ä»¥æŒä¹…åŒ–) ,Redis å¯ä»¥æŒä¹…åŒ–")]),_._v(" "),s("li",[_._v("memxached åªèƒ½å­˜å‚¨ç®€å•çš„å­—ç¬¦ä¸², Redis æ”¯æŒå¤šç§æ•°æ®ç±»å‹")]),_._v(" "),s("li",[_._v("memcached å®ç°:å¤šçº¿ç¨‹+é” , redis å®ç°:å•çº¿ç¨‹+IO å¤šè·¯å¤ç”¨")])]),_._v(" "),s("h2",{attrs:{id:"_2-redis-å•çº¿ç¨‹å—"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-redis-å•çº¿ç¨‹å—"}},[_._v("#")]),_._v(" 2. Redis å•çº¿ç¨‹å—")]),_._v(" "),s("blockquote",[s("p",[_._v("redis åœ¨å¤„ç†æ•°æ®çš„æ—¶å€™ç”¨çš„å•çº¿ç¨‹,å®é™…ä¸Šæ•´ä¸ªæœåŠ¡æ˜¯å¤šçº¿ç¨‹çš„")])]),_._v(" "),s("p",[s("strong",[_._v("ç”¨åˆ°å¤šçº¿ç¨‹çš„åœ°æ–¹:")])]),_._v(" "),s("ul",[s("li",[_._v("RDB æ—¶ "),s("code",[_._v("FORKå­çº¿ç¨‹")])]),_._v(" "),s("li",[_._v("ä¸»ä»åŒæ­¥æ—¶çš„"),s("code",[_._v("å¼‚æ­¥åŒæ­¥ PSYNC")])]),_._v(" "),s("li",[_._v("å…³é—­æœåŠ¡çš„æ—¶å°†"),s("code",[_._v("å†…å­˜åˆ·æ–°åˆ°ç£ç›˜")]),_._v("çš„æ“ä½œ")]),_._v(" "),s("li",[s("code",[_._v("LazyFreeæœºåˆ¶")]),_._v("(4.0 ç‰¹æ€§)\n"),s("ul",[s("li",[_._v("UNLINK å¼‚æ­¥åˆ é™¤ Key")]),_._v(" "),s("li",[_._v("FLUSHDB ASYNC-æ¸…ç©ºæœ¬åº“çš„æ•°æ®")]),_._v(" "),s("li",[_._v("FLUSHALL ASYNC-æ¸…ç©ºæ‰€æœ‰æ•°æ®åº“")])])])]),_._v(" "),s("p",[s("img",{attrs:{src:"http://md.yike.link/20200325215317_YduFEr_Screenshot.jpeg",alt:"å¼‚æ­¥é‡Šæ”¾å†…å­˜"}})]),_._v(" "),s("h2",{attrs:{id:"_3-redis-å•çº¿ç¨‹ä¸ºä»€ä¹ˆæ€§èƒ½è¿™ä¹ˆé«˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-redis-å•çº¿ç¨‹ä¸ºä»€ä¹ˆæ€§èƒ½è¿™ä¹ˆé«˜"}},[_._v("#")]),_._v(" 3. Redis å•çº¿ç¨‹ä¸ºä»€ä¹ˆæ€§èƒ½è¿™ä¹ˆé«˜")]),_._v(" "),s("ul",[s("li",[_._v("åè®®å¾ˆç®€å• å°±æ˜¯ "),s("code",[_._v("cmd key Val")]),_._v(" ä¸åƒ HTTP é‚£æ ·åˆæ˜¯è¯·æ±‚ä½“,è¯·æ±‚å¤´çš„")]),_._v(" "),s("li",[_._v("åŸºäºå†…å­˜æ“ä½œ")]),_._v(" "),s("li",[_._v("pipline æœºåˆ¶,å°†å¤šä¸ªæŒ‡ä»¤ä¸€èµ·å‘é€åˆ°æœåŠ¡å™¨æ‰§è¡Œ,å‡å°‘äº†ç½‘ç»œå¾€è¿”çš„æ—¶é—´")]),_._v(" "),s("li",[_._v("NIO å¤šè·¯å¤ç”¨")])]),_._v(" "),s("h2",{attrs:{id:"_4-ä¸ºä»€ä¹ˆ-redis-çš„æ“ä½œæ˜¯åŸå­æ€§çš„-æ€ä¹ˆä¿è¯åŸå­æ€§çš„-å¤šä¸ªå‘½ä»¤åœ¨å¹¶å‘ä¸­ä¹Ÿæ˜¯åŸå­æ€§çš„å—"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-ä¸ºä»€ä¹ˆ-redis-çš„æ“ä½œæ˜¯åŸå­æ€§çš„-æ€ä¹ˆä¿è¯åŸå­æ€§çš„-å¤šä¸ªå‘½ä»¤åœ¨å¹¶å‘ä¸­ä¹Ÿæ˜¯åŸå­æ€§çš„å—"}},[_._v("#")]),_._v(" 4. ä¸ºä»€ä¹ˆ Redis çš„æ“ä½œæ˜¯åŸå­æ€§çš„ï¼Œæ€ä¹ˆä¿è¯åŸå­æ€§çš„? å¤šä¸ªå‘½ä»¤åœ¨å¹¶å‘ä¸­ä¹Ÿæ˜¯åŸå­æ€§çš„å—")]),_._v(" "),s("p",[_._v("1.Redis çš„æ“ä½œä¹‹æ‰€ä»¥æ˜¯åŸå­æ€§çš„ï¼Œæ˜¯å› ä¸º Redis æ˜¯å•çº¿ç¨‹çš„ã€‚"),s("br"),_._v("\n2.å¤šä¸ªå‘½ä»¤åœ¨å¹¶å‘ä¸­å¹¶ä¸ä¿è¯åŸå­æ€§,å¯ä»¥ä½¿ç”¨äº‹åŠ¡æ–¹å¼è§£å†³;")]),_._v(" "),s("h2",{attrs:{id:"_5-å•-redis-å®ä¾‹æ”¯æŒå¹¶å‘è¯»å†™å—-ä¾‹å¦‚å®¢æˆ·ç«¯-a-å†™å…¥ä¸€ä¸ªå¾ˆå¤§çš„æ•°æ®-éœ€è¦è€—æ—¶å‡ ç§’-æœŸé—´å®¢æˆ·ç«¯-b-èƒ½å¦è¯»æ•°æ®-è¿˜æ˜¯éœ€è¦ç­‰å¾…å®¢æˆ·ç«¯-a-çš„æ“ä½œå®Œæˆæ‰èƒ½è¯»åˆ°æ•°æ®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-å•-redis-å®ä¾‹æ”¯æŒå¹¶å‘è¯»å†™å—-ä¾‹å¦‚å®¢æˆ·ç«¯-a-å†™å…¥ä¸€ä¸ªå¾ˆå¤§çš„æ•°æ®-éœ€è¦è€—æ—¶å‡ ç§’-æœŸé—´å®¢æˆ·ç«¯-b-èƒ½å¦è¯»æ•°æ®-è¿˜æ˜¯éœ€è¦ç­‰å¾…å®¢æˆ·ç«¯-a-çš„æ“ä½œå®Œæˆæ‰èƒ½è¯»åˆ°æ•°æ®"}},[_._v("#")]),_._v(" 5. å• redis å®ä¾‹æ”¯æŒå¹¶å‘è¯»å†™å—ï¼Ÿä¾‹å¦‚å®¢æˆ·ç«¯ A å†™å…¥ä¸€ä¸ªå¾ˆå¤§çš„æ•°æ®ï¼Œ éœ€è¦è€—æ—¶å‡ ç§’ï¼Œ æœŸé—´å®¢æˆ·ç«¯ B èƒ½å¦è¯»æ•°æ®ï¼Ÿè¿˜æ˜¯éœ€è¦ç­‰å¾…å®¢æˆ·ç«¯ A çš„æ“ä½œå®Œæˆæ‰èƒ½è¯»åˆ°æ•°æ®")]),_._v(" "),s("p",[_._v("redis æœ‰å¤šè·¯å¤ç”¨æœºåˆ¶,æ”¯æŒå¤šä¸ªè¯·æ±‚å¹¶å‘è¯·æ±‚..ä½†æ˜¯åœ¨å†™æ•°æ®æ—¶éœ€è¦ç­‰ A å†™å®Œæ‰èƒ½è½®åˆ° B å†™")]),_._v(" "),s("h2",{attrs:{id:"_6-redis-é›†ç¾¤å¤§å°-å¯ä»¥æ”¯æŒå¤šå°‘ä¸ªåˆ†ç‰‡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-redis-é›†ç¾¤å¤§å°-å¯ä»¥æ”¯æŒå¤šå°‘ä¸ªåˆ†ç‰‡"}},[_._v("#")]),_._v(" 6. Redis é›†ç¾¤å¤§å°,å¯ä»¥æ”¯æŒå¤šå°‘ä¸ªåˆ†ç‰‡")]),_._v(" "),s("p",[_._v("redis æœ‰ 16834 ä¸ªæ§½,ç†è®ºä¸Šæ”¯æŒ 16834 ä¸ªåˆ†ç‰‡,"),s("code",[_._v("ä½†æ˜¯å®˜æ–¹å»ºè®®æœ€å¤§ 1000 ä¸ªå®ä¾‹")]),_._v(",\nå› ä¸º redis "),s("code",[_._v("é›†ç¾¤æœ‰ä¸ªæ€»çº¿")]),_._v("..å¦‚æœçœŸçš„æœ‰ 1W6 åƒä¸ªèŠ‚ç‚¹,é‚£ä¹ˆ"),s("code",[_._v("æ¯ä¸ªèŠ‚ç‚¹æ€»çº¿çš„æ•°é‡å°±æ˜¯(1W6-1)\\*2")]),_._v("ä¸ª,è¿™æ ·çš„è¯æ¯ä¸ªèŠ‚ç‚¹çš„æ¶ˆæ¯é‡å°±ä¼šéå¸¸å¤§")]),_._v(" "),s("h2",{attrs:{id:"_7-é›†ç¾¤èŠ‚ç‚¹é—´æ€ä¹ˆé€šä¿¡çš„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-é›†ç¾¤èŠ‚ç‚¹é—´æ€ä¹ˆé€šä¿¡çš„"}},[_._v("#")]),_._v(" 7. é›†ç¾¤èŠ‚ç‚¹é—´æ€ä¹ˆé€šä¿¡çš„")]),_._v(" "),s("p",[_._v("æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ª TCP ç«¯å£,æ¯ä¸ªèŠ‚ç‚¹ä½¿ç”¨ TCP è¿æ¥å…¶ä»–èŠ‚ç‚¹..æ•…éšœè½¬ç§»çš„æ–¹å¼å’Œå“¨å…µæ¨¡å¼ç±»ä¼¼.")]),_._v(" "),s("h2",{attrs:{id:"_8-ask-å’Œ-moved-çš„åŒºåˆ«"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-ask-å’Œ-moved-çš„åŒºåˆ«"}},[_._v("#")]),_._v(" 8. ask å’Œ moved çš„åŒºåˆ«")]),_._v(" "),s("p",[_._v("é‡å®šå‘åŒ…æ‹¬ä¸¤ç§æƒ…å†µ")]),_._v(" "),s("ul",[s("li",[_._v("è‹¥ slot ä¸å±äºå½“å‰èŠ‚ç‚¹,redis ä¼šè¿”å› moved")]),_._v(" "),s("li",[_._v("è‹¥å½“é’±èŠ‚ç‚¹æ­£åœ¨å¤„ç† slot è¿ç§»,å¦‚æœå½“å‰è¯·æ±‚å¯¹åº”çš„ key å·²ç»è¢«è¿ç§»è‡³æ–°èŠ‚ç‚¹,å°±ä¼šè¿”å› ask å‘Šè¯‰å®¢æˆ·ç«¯æœ¬æ¬¡è¯·æ±‚é‡å®šå‘")])]),_._v(" "),s("h2",{attrs:{id:"_9-é›†ç¾¤ä¸­æ•°æ®å€¾æ–œ-è®¿é—®å€¾æ–œé—®é¢˜æ€ä¹ˆå¤„ç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-é›†ç¾¤ä¸­æ•°æ®å€¾æ–œ-è®¿é—®å€¾æ–œé—®é¢˜æ€ä¹ˆå¤„ç†"}},[_._v("#")]),_._v(" 9. é›†ç¾¤ä¸­æ•°æ®å€¾æ–œ,è®¿é—®å€¾æ–œé—®é¢˜æ€ä¹ˆå¤„ç†")]),_._v(" "),s("p",[_._v("å€¾æ–œä¼šå¯¼è‡´åŠç¾¤ä¼—æŸäº›èŠ‚ç‚¹è®¿é—®é‡å¢å¤§,å‹åŠ›å¤§.\n"),s("strong",[_._v("è§£å†³æ–¹æ¡ˆ:")])]),_._v(" "),s("ul",[s("li",[_._v("æå‰é¢„æµ‹,é‚£äº› key ä¼šæ˜¯çƒ­ç‚¹,åœ¨è®¾è®¡è¿‡ç¨‹ä¸­è§„é¿")]),_._v(" "),s("li",[_._v("åæœŸ slot è¿ç§»,å°½é‡å°†å‹åŠ›åˆ†æ‘Š(slot è°ƒæ•´æœ‰ä¸¤ç§æ–¹å¼ "),s("code",[_._v("è‡ªåŠ¨:rebalance")]),_._v("å’Œ"),s("code",[_._v("æ‰‹åŠ¨reshard")]),_._v(")")])]),_._v(" "),s("h2",{attrs:{id:"_10-é›†ç¾¤ä¸­çš„è¯»å†™åˆ†ç¦»æ€ä¹ˆæ“ä½œ-ğŸ™„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-é›†ç¾¤ä¸­çš„è¯»å†™åˆ†ç¦»æ€ä¹ˆæ“ä½œ-ğŸ™„"}},[_._v("#")]),_._v(" 10. é›†ç¾¤ä¸­çš„è¯»å†™åˆ†ç¦»æ€ä¹ˆæ“ä½œ ğŸ™„")]),_._v(" "),s("ul",[s("li",[_._v("é»˜è®¤æƒ…å†µä¸‹,redis é›†ç¾¤ä¸­è¯»å’Œå†™éƒ½ä¼šé‡å®šå‘åˆ° key æ§½æ‰€åœ¨çš„èŠ‚ç‚¹ä¸Š")]),_._v(" "),s("li",[_._v("å¯é€šè¿‡ readonly è®¾ç½®å½“å‰è¿æ¥å¯è¯»,é€šè¿‡ "),s("code",[_._v("readwrite")]),_._v(" å¯ä»¥é…ç½®ä»èŠ‚ç‚¹å¯è¯».(ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´)")])]),_._v(" "),s("h2",{attrs:{id:"_11-ğŸ’¥-ç§Ÿæˆ¿å¹³å°é¢è¯•é¢˜-å»é‡æ–¹æ¡ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_11-ğŸ’¥-ç§Ÿæˆ¿å¹³å°é¢è¯•é¢˜-å»é‡æ–¹æ¡ˆ"}},[_._v("#")]),_._v(" 11. ğŸ’¥ ç§Ÿæˆ¿å¹³å°é¢è¯•é¢˜:å»é‡æ–¹æ¡ˆ")]),_._v(" "),s("blockquote",[s("p",[_._v("æœ‰ä¸€å¼ è®¿é—®ä¿¡æ¯è¡¨,æœ‰ åœ°å€,æˆ¿é—´å·ç­‰å…¶ä»–å­—æ®µ...\nåœ¨æ·»åŠ çš„æ—¶å€™æ˜¯å¦‚ä½•åˆ¤æ–­é‡å¤çš„? (è¡¨æ•°æ® 100w)")])]),_._v(" "),s("p",[s("strong",[_._v("è§£å†³æ–¹æ¡ˆ:")])]),_._v(" "),s("p",[_._v("å¸ƒéš†è¿‡æ»¤å™¨(çœå†…å­˜.ä¼šæœ‰è¯¯å·®)\nRedis æœ‰ä¸ª bloom è¿‡æ»¤çš„æ’ä»¶,è¿˜æœ‰ä¸€ä¸ªä¸“ç”¨çš„ JReBloom åŒ…,å¯ä»¥å®ç°å¸ƒéš†è¿‡æ»¤å™¨\né€šè¿‡ "),s("code",[_._v("bf.add")]),_._v("å‘½ä»¤æ·»åŠ  æ·»åŠ çš„æ—¶å€™å¯ä»¥æŒ‡å®šè¯¯åˆ¤ç‡\nhttps://github.com/RedisBloom/RedisBloom")]),_._v(" "),s("p",[_._v("å¸ƒéš†è¿‡æ»¤å™¨åªèƒ½æ·»åŠ å…ƒç´  ä¸èƒ½åˆ é™¤å…ƒç´ ")]),_._v(" "),s("h2",{attrs:{id:"_12-ğŸ’¥-é™æµ-ä»¤ç‰Œæ¡¶-æ¼æ–—æ¡¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_12-ğŸ’¥-é™æµ-ä»¤ç‰Œæ¡¶-æ¼æ–—æ¡¶"}},[_._v("#")]),_._v(" 12. ğŸ’¥ é™æµ (ä»¤ç‰Œæ¡¶/æ¼æ–—æ¡¶)")]),_._v(" "),s("ul",[s("li",[s("strong",[_._v("ä»¤ç‰Œæ¡¶:")]),_._v(" èµ„æºæœ‰é™,å…ˆåˆ°å…ˆå¾—\n"),s("ul",[s("li",[_._v("åŸºäº "),s("code",[_._v("List")]),_._v(" çš„æ•°æ®ç»“æ„ åˆ›å»º N ä¸ªæ•°æ®é‡çš„ä»¤ç‰Œ.å–çš„æ—¶å€™é€šè¿‡ "),s("code",[_._v("leftPop")]),_._v(" è·å–ä»¤ç‰Œ")])])]),_._v(" "),s("li",[s("strong",[_._v("æ¼æ–—æ¡¶:")]),_._v(" èµ„æºæ— é™,é™æ—¶é™é‡å‘æ”¾\n"),s("img",{attrs:{src:"http://md.yike.link/20200325215337_ThLkYO_Screenshot.jpeg",alt:"ä»¤ç‰Œæ¡¶/æ¼æ–—æ¡¶"}}),_._v(" "),s("strong",[_._v("ä¸šåŠ¡åœºæ™¯:")]),_._v("\né™åˆ¶åŒä¸€ä¸ªç”¨æˆ·,åŒä¸€ä¸ªåŠŸèƒ½, 10 åˆ†é’Ÿå†…åªèƒ½è®¿é—® 60 æ¬¡\næ–¹æ¡ˆ 1: è®¾ç½®ä¸€ä¸ª 10 åˆ†é’Ÿè¿‡æœŸçš„ Key\næ–¹æ¡ˆ 2: zset, æ¯æ¬¡æ“ä½œæ’å…¥ä¸€æ¡æ•°æ®(ååˆ†é’Ÿè¿‡æœŸ),å§å½“å‰æ—¶é—´ä½œä¸º score")])]),_._v(" "),s("h2",{attrs:{id:"_13-åˆ†å¸ƒå¼é”-æœ€ä¼˜æ–¹å¼ä½¿ç”¨-zk"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_13-åˆ†å¸ƒå¼é”-æœ€ä¼˜æ–¹å¼ä½¿ç”¨-zk"}},[_._v("#")]),_._v(" 13. åˆ†å¸ƒå¼é” (æœ€ä¼˜æ–¹å¼ä½¿ç”¨ ZK)")]),_._v(" "),s("blockquote",[s("p",[_._v("èƒŒæ™¯:å¤šä¸ªæœåŠ¡åŒæ—¶æ“ä½œåŒä¸€ä¸ªèµ„æº,åè°ƒèµ„æºæ“ä½œ")])]),_._v(" "),s("ul",[s("li",[_._v("2.8 ä»¥å‰é€šè¿‡ "),s("code",[_._v("set + expire")]),_._v("ä¸¤ä¸ªå‘½ä»¤ å®ç°å¸¦è¿‡æœŸçš„é”")]),_._v(" "),s("li",[_._v("2.8 ä»¥å é€šè¿‡ "),s("code",[_._v("setnx + expire")]),_._v(" æˆ– "),s("code",[_._v("setex +expire")]),_._v(" æ¥å®ç°å¸¦è¶…æ—¶çš„é”. æ“ä½œæ‰§è¡Œå®Œæ¯•åé€šè¿‡ set çš„ value å€¼åˆ¤æ–­æ˜¯å¦æ˜¯é€šä¸€æŠŠé”æ¥åˆ é™¤é”")])]),_._v(" "),s("p",[s("strong",[_._v("ä¸ºä»€ä¹ˆè¯´ä»–ä¸æ˜¯æœ€ä¼˜æ–¹æ¡ˆ:")])]),_._v(" "),s("ul",[s("li",[_._v("ä¸»ä»ç¯å¢ƒä¸‹:,set é”åˆ°ä¸»çš„æ—¶å€™æˆåŠŸäº†,å®¢æˆ·ç«¯ 1 è·å–åˆ°äº†é” ,ç„¶åä¸»æŒ‚äº†æ•…éšœè½¬ç§»ä»å½“ä¸Šäº†ä¸»(æ•°æ®è¿˜æœªå®ŒæˆåŒæ­¥ä¸»å°±æŒ‚äº† "),s("code",[_._v("é”ä¸¢å¤±")]),_._v("). è¿™ä¸ªæ—¶å€™å®¢æˆ·ç«¯ 2 æ¥è·å–é”ä¹Ÿèƒ½æˆåŠŸè·å–åˆ°é”")]),_._v(" "),s("li",[s("code",[_._v("é”åˆ é™¤é—®é¢˜")]),_._v(": å¦‚æœè®¾ç½®äº†é”è¿‡æœŸ,å®¢æˆ·ç«¯ 1 è·å–äº†é”,å½“é”æ—¶é—´åˆ°äº†,å®¢æˆ·ç«¯ 1 è¿˜æ²¡æœ‰æ‰§è¡Œå®Œ(æ‰§è¡Œæ—¶é—´è¾ƒé•¿),ç„¶åå®¢æˆ·ç«¯ 2 è·å–åˆ°äº†æ–°çš„é”,è¿™ä¸ªæ—¶å€™å®¢æˆ·ç«¯ 1 æ‰§è¡Œå®Œäº†å°†é”åˆ é™¤ âŒ...è¿™ç§æ—¶å€™éœ€è¦ç¼–å†™é€»è¾‘è¿›è¡Œå¤„ç†(éº»çƒ¦)")])]),_._v(" "),s("h2",{attrs:{id:"_14-ä»€ä¹ˆæ˜¯ç¼“å­˜å‡»ç©¿-ç©¿é€-é›ªå´©-å¦‚ä½•é¢„é˜²"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_14-ä»€ä¹ˆæ˜¯ç¼“å­˜å‡»ç©¿-ç©¿é€-é›ªå´©-å¦‚ä½•é¢„é˜²"}},[_._v("#")]),_._v(" 14. ä»€ä¹ˆæ˜¯ç¼“å­˜å‡»ç©¿,ç©¿é€,é›ªå´©? å¦‚ä½•é¢„é˜²")]),_._v(" "),s("ul",[s("li",[s("strong",[_._v("ç¼“å­˜å‡»ç©¿:")]),_._v(" ç¼“å­˜ä¸­æœ‰å½“å‰ KEY å€¼,å½“å®¢æˆ·ç«¯è®¿é—®æ— æ³•è·å–åˆ°è¿™ä¸ªç¼“å­˜(æ¯”å¦‚ KEY æ­£å¥½è¿‡æœŸ)")]),_._v(" "),s("li",[s("strong",[_._v("ç¼“å­˜ç©¿é€:")]),_._v(" ç¼“å­˜ä¸ç¼“å­˜ null å€¼,å®¢æˆ·ç«¯ä¸€ç›´è¯·æ±‚ä¸€ä¸ªæ•°æ®åº“ä¸å­˜åœ¨çš„å€¼,æ­¤æ—¶è¯·æ±‚ä¸ä¼šèµ°ç¼“å­˜ç›´æ¥è¿›å…¥æ•°æ®åº“")]),_._v(" "),s("li",[s("strong",[_._v("ç¼“å­˜é›ªå´©:")]),_._v(" ç¼“å­˜é›ªå´©å°±æ˜¯"),s("code",[_._v("å‡»ç©¿")]),_._v("æˆ–"),s("code",[_._v("ç©¿é€")]),_._v("çš„è¿é”æ•ˆåº”, é«˜å¹¶å‘åœºæ™¯ä¸‹,å› ä¸ºä¸€ä¸ª KEY æ²¡æœ‰ç¼“å­˜å¯¼è‡´è¯·æ±‚ç›´æ¥åˆ°è¾¾æ•°æ®åº“,å¯¼è‡´æ•°æ®åº“å‹åŠ›å¤§å®•æœºçš„æƒ…å†µ;")])]),_._v(" "),s("p",[s("strong",[_._v("é¢„é˜²æ–¹å¼:")])]),_._v(" "),s("ul",[s("li",[_._v("KEY çš„è¿‡æœŸæ˜¯æ—¶é—´è®¾ç½®ä¸ä¸€æ ·,æœ€å¥½å¼„ä¸€ä¸ªéšæœºå€¼")]),_._v(" "),s("li",[_._v("å¯¹äºå•ä¸ªçƒ­ç‚¹ KEY,å½“å…¶å¤±æ•ˆåˆ·æ–°æ—¶åŠ ä¸Šäº’æ–¥é”,ä½¿åªæœ‰ä¸€ä¸ªè¯·æ±‚å»åˆ·æ–°ç¼“å­˜. é¿å…å¤§é‡è¯·æ±‚ç›´æ¥è¯·æ±‚åˆ°æ•°æ®åº“")]),_._v(" "),s("li",[_._v("å¯¹äºæœåŠ¡ä¸å¯ç”¨/æ¶æ„è¯·æ±‚/ç½‘ç»œä¸å¯ç”¨æ—¶\n"),s("ul",[s("li",[_._v("æŠŠæŸ¥åˆ°æ•°æ®åº“ä¸º null çš„å€¼ä¹Ÿç¼“å­˜èµ·æ¥(åŠ ä¸Šè¿‡æœŸæ—¶é—´),ä½¿æ¶æ„æ”»å‡»æ—¶ä¹Ÿä¼šèµ°ç¼“å­˜")]),_._v(" "),s("li",[_._v("ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨æ’é™¤ä¸€äº›ä¸å­˜åœ¨çš„ KEY,ç›´æ¥è¿›è¡Œæ‹¦æˆª (å¸ƒéš†è¿‡æ»¤å™¨æœ‰ä¸€ä¸ªç¡®å®š,æ·»åŠ äº†ä¸èƒ½åˆ é™¤)")])])])]),_._v(" "),s("h2",{attrs:{id:"_15-é¡¹ç›®ä¸­ç¼“å­˜æ˜¯å¦‚ä½•ä½¿ç”¨çš„-ä¸ºä»€ä¹ˆè¦ç”¨ç¼“å­˜-ç¼“å­˜ä½¿ç”¨ä¸å½“ä¼šé€ æˆä»€ä¹ˆåæœ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_15-é¡¹ç›®ä¸­ç¼“å­˜æ˜¯å¦‚ä½•ä½¿ç”¨çš„-ä¸ºä»€ä¹ˆè¦ç”¨ç¼“å­˜-ç¼“å­˜ä½¿ç”¨ä¸å½“ä¼šé€ æˆä»€ä¹ˆåæœ"}},[_._v("#")]),_._v(" 15. é¡¹ç›®ä¸­ç¼“å­˜æ˜¯å¦‚ä½•ä½¿ç”¨çš„ï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨ç¼“å­˜ï¼Ÿç¼“å­˜ä½¿ç”¨ä¸å½“ä¼šé€ æˆä»€ä¹ˆåæœ")]),_._v(" "),s("p",[s("strong",[_._v("ç¼“å­˜å¦‚ä½•ä½¿ç”¨:")]),_._v(" å­˜å‚¨ä¸€äº›çƒ­ç‚¹æ•°æ®, è¯»å¤šé‚ªå°‘çš„æ•°æ®\n"),s("strong",[_._v("ä¸ºå•¥è¦ä½¿ç”¨ç¼“å­˜:")]),_._v(" æå‡æœåŠ¡å“åº”é€Ÿåº¦,åˆ†æ‹…æ•°æ®åº“å‹åŠ›\n"),s("strong",[_._v("ä½¿ç”¨ä¸å½“ä¼šé€ æˆä»€ä¹ˆåæœ:")]),_._v(" ç¼“å­˜é›ªå´©æ•ˆåº”")]),_._v(" "),s("h2",{attrs:{id:"_16-ä¸ºä»€ä¹ˆ-redis-å•çº¿ç¨‹å´èƒ½æ”¯æ’‘é«˜å¹¶å‘"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_16-ä¸ºä»€ä¹ˆ-redis-å•çº¿ç¨‹å´èƒ½æ”¯æ’‘é«˜å¹¶å‘"}},[_._v("#")]),_._v(" 16. ä¸ºä»€ä¹ˆ redis å•çº¿ç¨‹å´èƒ½æ”¯æ’‘é«˜å¹¶å‘")]),_._v(" "),s("ul",[s("li",[_._v("åè®®å¾ˆç®€å• å°±æ˜¯ "),s("code",[_._v("cmd key Val")]),_._v(" ä¸åƒ HTTP é‚£æ ·åˆæ˜¯è¯·æ±‚ä½“,è¯·æ±‚å¤´çš„")]),_._v(" "),s("li",[_._v("åŸºäºå†…å­˜æ“ä½œ")]),_._v(" "),s("li",[_._v("pipline æœºåˆ¶,å°†å¤šä¸ªæŒ‡ä»¤ä¸€èµ·å‘é€åˆ°æœåŠ¡å™¨æ‰§è¡Œ,å‡å°‘äº†ç½‘ç»œå¾€è¿”çš„æ—¶é—´")]),_._v(" "),s("li",[_._v("NIO å¤šè·¯å¤ç”¨")])]),_._v(" "),s("p",[_._v("å®˜æ–¹çš„æµ‹è¯•æ•°æ®é€šè¿‡ pipline å†™ string è¯·æ±‚æ”¯æŒæ²¡ç§’ 50W æ•°æ®è¯»å†™")]),_._v(" "),s("h2",{attrs:{id:"_17-redis-éƒ½æœ‰å“ªäº›æ•°æ®ç±»å‹-åˆ†åˆ«åœ¨å“ªäº›åœºæ™¯ä¸‹ä½¿ç”¨æ¯”è¾ƒåˆé€‚"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_17-redis-éƒ½æœ‰å“ªäº›æ•°æ®ç±»å‹-åˆ†åˆ«åœ¨å“ªäº›åœºæ™¯ä¸‹ä½¿ç”¨æ¯”è¾ƒåˆé€‚"}},[_._v("#")]),_._v(" 17. redis éƒ½æœ‰å“ªäº›æ•°æ®ç±»å‹ï¼Ÿåˆ†åˆ«åœ¨å“ªäº›åœºæ™¯ä¸‹ä½¿ç”¨æ¯”è¾ƒåˆé€‚")]),_._v(" "),s("ul",[s("li",[_._v("String åœºæ™¯:\n"),s("ul",[s("li",[_._v("ç¼“å­˜å¯¹è±¡é€šè¿‡(JSON åºåˆ—åŒ–) set key value")]),_._v(" "),s("li",[_._v("å•ä¸ªå€¼ç¼“:å¦‚åˆ†å¸ƒå¼é” setNx setEx ,åˆ†å¸ƒå¼ sessionc å­˜å‚¨ TOKEN")]),_._v(" "),s("li",[_._v("å¤šä¸ªå€¼ç¼“å­˜: MSET,ä¸€æ¬¡è®¾ç½®å¤šä¸ª key value")]),_._v(" "),s("li",[_._v("è®¡æ•°å™¨: INCR")])])]),_._v(" "),s("li",[_._v("Hash åœºæ™¯:\n"),s("ul",[s("li",[_._v("å­˜å‚¨å¯¹è±¡ ,ä¸ç”¨ JOSN åºåˆ—åŒ–ç¼“å­˜,ä¹Ÿé˜”ä»¥ç›´æ¥å¯¹ KEY ä¸­æŸä¸ªå­—æ®µç›´æ¥è¿›è¡Œæ“ä½œ")])])]),_._v(" "),s("li",[_._v("List åœºæ™¯:\n"),s("ul",[s("li",[_._v("å®ç°é˜Ÿåˆ—åŠŸèƒ½ LPUSH,RPUSH,LPOP,RPOP")]),_._v(" "),s("li",[_._v("é˜»å¡é˜Ÿåˆ—å®ç°:BLPOP,BRPOP")]),_._v(" "),s("li",[_._v("å®ç°æ ˆçš„åŠŸèƒ½: åè¿›å…ˆå‡º")]),_._v(" "),s("li",[_._v("è¿”å›åŒºé—´å€¼ LRANGE 1 10")])])]),_._v(" "),s("li",[_._v("SET/ZSET åœºæ™¯:\n"),s("ul",[s("li",[_._v("é˜”ä»¥å®ç°å»é‡å­˜å‚¨")]),_._v(" "),s("li",[_._v("è¿˜é˜”ä»¥å®ç°å–äº¤é›†/å¹¶é›†/å·®é›†çš„åŠŸèƒ½")])])])]),_._v(" "),s("h2",{attrs:{id:"_18-åœ¨é›†ç¾¤æ¨¡å¼ä¸‹-redis-çš„-key-æ˜¯å¦‚ä½•å¯»å€çš„-åˆ†å¸ƒå¼å¯»å€éƒ½æœ‰å“ªäº›ç®—æ³•-äº†è§£ä¸€è‡´æ€§-hash-ç®—æ³•å—"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_18-åœ¨é›†ç¾¤æ¨¡å¼ä¸‹-redis-çš„-key-æ˜¯å¦‚ä½•å¯»å€çš„-åˆ†å¸ƒå¼å¯»å€éƒ½æœ‰å“ªäº›ç®—æ³•-äº†è§£ä¸€è‡´æ€§-hash-ç®—æ³•å—"}},[_._v("#")]),_._v(" 18. åœ¨é›†ç¾¤æ¨¡å¼ä¸‹ï¼Œredis çš„ key æ˜¯å¦‚ä½•å¯»å€çš„ï¼Ÿåˆ†å¸ƒå¼å¯»å€éƒ½æœ‰å“ªäº›ç®—æ³•ï¼Ÿäº†è§£ä¸€è‡´æ€§ hash ç®—æ³•å—")]),_._v(" "),s("p",[_._v("redis ä¸­çš„ä¸€è‡´æ€§ hash ç®—æ³•å°±æ˜¯ å¯¹ key è¿›è¡Œ hash å–æ¨¡å¾—å‡ºæ§½ "),s("code",[_._v("slot")]),_._v(" çš„ä½ç½®,ç„¶ååˆ°æ§½æ‰€åœ¨çš„æœºå™¨ä¸Šè¿›è¡Œå­˜å‚¨")]),_._v(" "),s("p",[_._v("åœ¨ JAVA å®¢æˆ·ç«¯é›†ç¾¤è¿æ¥ä¸‹,,å®¢æˆ·ç«¯ä¼šè·å–åˆ°é›†ç¾¤ç¯å¢ƒçš„ "),s("code",[_._v("slot")]),_._v(" åˆ†å¸ƒæƒ…å†µ,åœ¨å®¢æˆ·å°±å…ˆå°† key è¿›è¡Œå¯»å€ "),s("code",[_._v("slot")]),_._v(",ç„¶åç›´æ¥åˆ°ç›¸åº”é›†ç¾¤è¿›è¡Œå­˜å‚¨")]),_._v(" "),s("h2",{attrs:{id:"_19-å¦‚ä½•ä¿è¯ç¼“å­˜ä¸æ•°æ®åº“çš„åŒå†™ä¸€è‡´æ€§-åˆå-redis-çš„å¹¶å‘ç«äº‰é—®é¢˜æ˜¯ä»€ä¹ˆ-å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_19-å¦‚ä½•ä¿è¯ç¼“å­˜ä¸æ•°æ®åº“çš„åŒå†™ä¸€è‡´æ€§-åˆå-redis-çš„å¹¶å‘ç«äº‰é—®é¢˜æ˜¯ä»€ä¹ˆ-å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜"}},[_._v("#")]),_._v(" 19. å¦‚ä½•ä¿è¯ç¼“å­˜ä¸æ•°æ®åº“çš„åŒå†™ä¸€è‡´æ€§ åˆå:(redis çš„å¹¶å‘ç«äº‰é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜)")]),_._v(" "),s("p",[s("strong",[_._v("ä»€ä¹ˆæ˜¯åŒå†™:")]),_._v("\nï¼ˆ1ï¼‰çº¿ç¨‹ A æ›´æ–°äº†æ•°æ®åº“\nï¼ˆ2ï¼‰çº¿ç¨‹ B æ›´æ–°äº†æ•°æ®åº“\nï¼ˆ3ï¼‰çº¿ç¨‹ B æ›´æ–°äº†ç¼“å­˜\nï¼ˆ4ï¼‰çº¿ç¨‹ A æ›´æ–°äº†ç¼“å­˜")]),_._v(" "),s("p",[_._v("ï¼ˆ1ï¼‰è¯·æ±‚ A è¿›è¡Œå†™æ“ä½œï¼Œåˆ é™¤ç¼“å­˜\nï¼ˆ2ï¼‰è¯·æ±‚ B æŸ¥è¯¢å‘ç°ç¼“å­˜ä¸å­˜åœ¨\nï¼ˆ3ï¼‰è¯·æ±‚ B å»æ•°æ®åº“æŸ¥è¯¢å¾—åˆ°æ—§å€¼\nï¼ˆ4ï¼‰è¯·æ±‚ B å°†æ—§å€¼å†™å…¥ç¼“å­˜\nï¼ˆ5ï¼‰è¯·æ±‚ A å°†æ–°å€¼å†™å…¥æ•°æ®åº“")]),_._v(" "),s("p",[s("strong",[_._v("å»¶æ—¶åŒåˆ ç­–ç•¥:")]),_._v("\nï¼ˆ1ï¼‰å…ˆæ·˜æ±°ç¼“å­˜\nï¼ˆ2ï¼‰å†å†™æ•°æ®åº“ï¼ˆè¿™ä¸¤æ­¥å’ŒåŸæ¥ä¸€æ ·ï¼‰\nï¼ˆ3ï¼‰ä¼‘çœ  1 ç§’ï¼Œå†æ¬¡æ·˜æ±°ç¼“å­˜\nè§£å†³æ–¹æ¡ˆï¼šé‡‡ç”¨åŒåˆ é™¤ç­–ç•¥ã€‚å†™è¯·æ±‚å…ˆåˆ é™¤ç¼“å­˜ï¼Œå†å»æ›´æ–°æ•°æ®åº“ï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´åå¼‚æ­¥åˆ é™¤ç¼“å­˜ã€‚è¿™æ ·å¯ä»¥ä¿è¯åœ¨è¯»å–é”™è¯¯æ•°æ®æ—¶èƒ½åŠæ—¶è¢«ä¿®æ­£è¿‡æ¥ã€‚")]),_._v(" "),s("p",[s("strong",[_._v("ä¸¤æ¬¡æ›´æ–°ç­–ç•¥:")]),_._v("\nï¼ˆ1ï¼‰æ›´æ–°ç¼“å­˜\nï¼ˆ2ï¼‰å†å†™æ•°æ®åº“\nï¼ˆ3ï¼‰å†æ–°ç¼“å­˜\nè¿™ç§æ–¹æ¡ˆä¿è¯äº†è¯»å†™çš„ä¸€è‡´æ€§ï¼Œä½†ç”±äºè¯»è¯·æ±‚ç­‰å¾…å†™è¯·æ±‚çš„å®Œæˆï¼Œä¼šé™ä½ç³»ç»Ÿçš„ååé‡ã€‚")]),_._v(" "),s("h2",{attrs:{id:"_20-äº†è§£-redis-äº‹åŠ¡çš„-cas-æ–¹æ¡ˆå—"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_20-äº†è§£-redis-äº‹åŠ¡çš„-cas-æ–¹æ¡ˆå—"}},[_._v("#")]),_._v(" 20. äº†è§£ redis äº‹åŠ¡çš„ CAS æ–¹æ¡ˆå—")]),_._v(" "),s("p",[_._v("å°±æ˜¯æ›´æ–°ç¼“å­˜çš„æ—¶å€™è¿›è¡Œé”ä½,åŒæ—¶åªå…è®¸ä¸€ä¸ªè¯·æ±‚è¿›è¡Œæ›´æ–°æ“ä½œ,æ›´æ–°å®Œåé‡Šæ”¾é” (è§£å†³ç¼“å­˜é›ªå´©é—®é¢˜)")]),_._v(" "),s("h2",{attrs:{id:"_21-ç”Ÿäº§ç¯å¢ƒä¸­çš„-redis-æ˜¯æ€ä¹ˆéƒ¨ç½²çš„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_21-ç”Ÿäº§ç¯å¢ƒä¸­çš„-redis-æ˜¯æ€ä¹ˆéƒ¨ç½²çš„"}},[_._v("#")]),_._v(" 21. ç”Ÿäº§ç¯å¢ƒä¸­çš„ redis æ˜¯æ€ä¹ˆéƒ¨ç½²çš„")]),_._v(" "),s("p",[_._v("è¿™ä¸ªçœ‹å…¬å¸æ€ä¹ˆéƒ¨ç½²çš„,ç®€å•äº†è§£ä¸‹..\n"),s("strong",[_._v("æ¯”å¦‚:")])]),_._v(" "),s("ul",[s("li",[_._v("ä¸»ä»+å“¨å…µ")]),_._v(" "),s("li",[_._v("ä¸»ä»ä» + å“¨å…µ")]),_._v(" "),s("li",[_._v("åˆ†ç‰‡é›†ç¾¤")])]),_._v(" "),s("h2",{attrs:{id:"_22-ä»‹ç»ä¸€ä¸‹-hyperloglog"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_22-ä»‹ç»ä¸€ä¸‹-hyperloglog"}},[_._v("#")]),_._v(" 22. ä»‹ç»ä¸€ä¸‹ HyperLogLog")]),_._v(" "),s("p",[_._v("HyperLogLog æ˜¯åœ¨ 2.8 ç‰ˆæœ¬åŠ å…¥çš„ä¸€ä¸ªæ•°æ®ç±»å‹,ä¸»è¦ç”¨æ¥åšåŸºæ•°ç»Ÿè®¡ç®—æ³•çš„")]),_._v(" "),s("p",[_._v("ä¼˜ç‚¹: åœ¨æ•°æ®ä½“é‡éå¸¸å¤§æ—¶,è®¡ç®—åŸºæ•°æ‰€éœ€çš„ç©ºé—´æ˜¯å›ºå®šçš„,å¹¶ä¸”å¾ˆå°åªéœ€è¦ 12KB\nåªè¦èŠ±è´¹ 12KB å†…å­˜å°±å¯ä»¥è®¡ç®— 12^64-1 çš„æ•°æ®é‡")]),_._v(" "),s("p",[s("strong",[_._v("ä»€ä¹ˆæ˜¯è®¡ç®—åŸºæ•°:")]),_._v(" å°±æ˜¯è®¡ç®—ä¸é‡å¤çš„å…ƒç´  {1,2,3,3,4,5,5,8} -> {1,2,3,4,5,8}")]),_._v(" "),s("p",[s("strong",[_._v("ä¸ºä»€ä¹ˆç”¨å®ƒ:")]),_._v(" å¦‚æœè®¡ç®— 1 äº¿ä¸ªåŸºæ•°,å¤§çº¦éœ€è¦ 1E/8/1024/1024 =12M å†…å­˜,å¦‚æœä¸ç”¨ hyperLogLog ç»Ÿè®¡ 10000 ä¸ªå¯¹è±¡å°±å·®ä¸å¤šè¦ 120G")]),_._v(" "),s("h2",{attrs:{id:"_23-redis-åˆ†åŒºæœ‰ä»€ä¹ˆç¼ºç‚¹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_23-redis-åˆ†åŒºæœ‰ä»€ä¹ˆç¼ºç‚¹"}},[_._v("#")]),_._v(" 23. Redis åˆ†åŒºæœ‰ä»€ä¹ˆç¼ºç‚¹")]),_._v(" "),s("p",[_._v("ä¼˜ç‚¹ æ€§èƒ½é«˜\nç¼ºç‚¹ é›†ç¾¤åˆ†ç‰‡å¾ˆéš¾ç©(è¯·æ±‚å€¾æ–œé—®é¢˜/KEY è½åœ¨ä¸åŒåˆ†ç‰‡é—®é¢˜/åŠ¨æ€æ‰©å®¹/å®¹ç¼©éå¸¸å¤æ‚)")]),_._v(" "),s("h2",{attrs:{id:"_24-redis-æ˜¯å•çº¿ç¨‹çš„-å¦‚ä½•æé«˜å¤šæ ¸-cpu-çš„åˆ©ç”¨ç‡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_24-redis-æ˜¯å•çº¿ç¨‹çš„-å¦‚ä½•æé«˜å¤šæ ¸-cpu-çš„åˆ©ç”¨ç‡"}},[_._v("#")]),_._v(" 24. Redis æ˜¯å•çº¿ç¨‹çš„ï¼Œ å¦‚ä½•æé«˜å¤šæ ¸ CPU çš„åˆ©ç”¨ç‡")]),_._v(" "),s("p",[_._v("å¯ä»¥è€ƒè™‘ä¸‹æœºå™¨åˆ†ç‰‡,åœ¨ä¸€ä¸ªæœºå™¨ä¸Šå¤šéƒ¨ç½²å‡ ä¸ª redis å®ä¾‹")]),_._v(" "),s("h2",{attrs:{id:"_25-ä¿®æ”¹é…ç½®ä¸é‡å¯-redis-ä¼šå®æ—¶ç”Ÿæ•ˆå—"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_25-ä¿®æ”¹é…ç½®ä¸é‡å¯-redis-ä¼šå®æ—¶ç”Ÿæ•ˆå—"}},[_._v("#")]),_._v(" 25. ä¿®æ”¹é…ç½®ä¸é‡å¯ Redis ä¼šå®æ—¶ç”Ÿæ•ˆå—")]),_._v(" "),s("p",[_._v("å¯é€šè¿‡ CONFIG SET å‘½ä»¤è¿›è¡Œä¿®æ”¹,æ— éœ€é‡å¯")]),_._v(" "),s("h2",{attrs:{id:"_26-redisæŒä¹…åŒ–æ–¹å¼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_26-redisæŒä¹…åŒ–æ–¹å¼"}},[_._v("#")]),_._v(" 26. RedisæŒä¹…åŒ–æ–¹å¼")]),_._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[_._v("RedisæŒä¹…åŒ–æ–¹å¼")]),_._v(" "),s("ul",[s("li",[_._v("RDB : å¿«ç…§æ¨¡å¼ , æ¯é—´éš”ä¸€æ®µæ—¶é—´forkä¸€ä¸ªå­çº¿ç¨‹è¿›è¡Œæ•°æ®å¿«ç…§ä¿å­˜åˆ° .RDBçš„æ–‡ä»¶ä¸­")]),_._v(" "),s("li",[_._v("AOF : å†™æ—¥å¿—æ¨¡å¼ , é»˜è®¤æ¯é—´éš”ä¸€åˆ†é’Ÿå°±è¡Œä¸€æ¬¡æ—¥å¿—è¿½åŠ ")])]),_._v(" "),s("p",[_._v("ä¸¤ç§æ–¹å¼çš„ä¼˜ç¼ºç‚¹:"),s("br"),_._v(" "),s("strong",[_._v("RDB ä¼˜ç‚¹")])]),_._v(" "),s("ul",[s("li",[_._v("å¯ç”¨ç”¨æ¥åšæ•°æ®åº“å®šæ—¶å¤‡ä»½")]),_._v(" "),s("li",[_._v("å¤‡ä»½æ•°æ®å ç”¨ç£ç›˜ç©ºé—´ç›¸å¯¹AOFè¾ƒå°")]),_._v(" "),s("li",[_._v("æ•°æ®åº“å¯åŠ¨æ—¶æ¢å¤æ•°æ®é€Ÿåº¦æ¯”è¾ƒå¿«")])]),_._v(" "),s("p",[s("strong",[_._v("RDBç¼ºç‚¹")])]),_._v(" "),s("ul",[s("li",[_._v("å­˜åœ¨æ•°æ®ä¸¢å¤±é—®é¢˜,å› ä¸ºå¿«ç…§æ˜¯æœ‰ä¸€å®šå‘¨æœŸçš„,åœ¨è¿˜æ²¡æœ‰è¾¾åˆ°ä¸‹ä¸€æ¬¡å¿«ç…§å‘¨æœŸæ˜¯æœåŠ¡å™¨å®•æœºä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±")]),_._v(" "),s("li",[_._v("ç³»ç»Ÿé»˜è®¤çš„è®¾ç½®æ˜¯åœ¨è§„å®šå‘¨æœŸå†…æ ¹æ®æ”¹å˜æ•°æ®çš„æ•°é‡æ¥è¿›è¡Œè§¦å‘å¿«ç…§çš„,åœ¨æ•°æ®é‡è¾ƒå¤§çš„æƒ…å†µä¸‹è¿™ç§å¤‡ä»½æœºåˆ¶ä¼šå¯¼è‡´æœåŠ¡å™¨å‹åŠ›è¿‡å¤§ (æ•°æ®æ”¹å˜é¢‘ç¹æ—¶,æ¯åˆ†é’Ÿéƒ½è¦è¿›è¡Œæ•°æ®åº“å…¨é‡å¿«ç…§ç„¶åå†™å…¥ç£ç›˜)")]),_._v(" "),s("li",[_._v("forkå­çº¿ç¨‹çš„æ—¶å€™å›å ç”¨ä¸€äº›æœåŠ¡å™¨å†…å­˜æ¥è¿›è¡Œæ•°æ®å¿«ç…§, ä¼šæ¶ˆè€—æœåŠ¡å™¨å†…å­˜")])]),_._v(" "),s("p",[s("strong",[_._v("AOFä¼˜ç‚¹:")])]),_._v(" "),s("ul",[s("li",[_._v("æ•°æ®ä¸¢å¤±é£é™©è¾ƒå°, å› ä¸º1åˆ†é’Ÿä¸€æ¬¡å†™LOG,å³ä½¿æ•°æ®ä¸¢å¤±ä¹Ÿå°±ä¸¢å¤±ä¸€åˆ†é’Ÿçš„æ•°æ®")]),_._v(" "),s("li",[_._v("AOFæœ‰ä¸€ä¸ªæ—¥å¿—é‡å†™æ–¹æ³•,å¯ä»¥å°†éƒ¨åˆ†æ²¡å¿…è¦çš„æ—¥å¿—è¿›è¡Œåˆå¹¶ (æ¯”å¦‚è¿ç»­çš„ä¸‰ä¸ªsetåŒä¸€ä¸ªK ,å¯ä»¥ç›´æ¥å–æœ€åä¸€ä¸ªæ“ä½œ)")])]),_._v(" "),s("p",[s("strong",[_._v("AOFç¼ºç‚¹:")])]),_._v(" "),s("ul",[s("li",[_._v("å¯åŠ¨æ—¶å› ä¸ºè¦ä»æ—¥å¿—ä¸­æ¢å¤æ•°æ®,æ‰€ä»¥å¯åŠ¨é€Ÿåº¦æ¯”è¾ƒæ…¢")]),_._v(" "),s("li",[_._v("æ—¥å¿—çš„æ–¹å¼æ¯”å¿«ç…§çš„æ–¹å¼æ›´å ç”¨ç£ç›˜ç©ºé—´")])])]),_._v(" "),s("h3",{attrs:{id:"_26-1-rdb"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_26-1-rdb"}},[_._v("#")]),_._v(" 26.1. RDB")]),_._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[_._v("RDBå¿«ç…§æ¨¡å¼ - é»˜è®¤é‡‡ç”¨å­è¿›ç¨‹æ–¹å¼")]),_._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[_._v("æœ‰ä¸¤ç§å®ç°æ–¹å¼ ä¸€ä¸ªé˜»å¡(saveå‘½ä»¤) ä¸€ä¸ªå¼‚æ­¥éé˜»å¡(bgSaveå‘½ä»¤)\n")])])]),s("ul",[s("li",[_._v("saveå‘½ä»¤ä¼šå¯¼è‡´Redisæ•´ä¸ªæ“ä½œé˜»å¡")]),_._v(" "),s("li",[_._v("bgsaveæ˜¯ç›´æ¥forkä¸€ä¸ªå­çº¿ç¨‹è¿›è¡Œå¿«ç…§,å¿«ç…§åˆ°ä¸€ä¸ªé›¶æ—¶æ–‡ä»¶ç„¶åè¦†ç›–åŸæœ‰å¿«ç…§æ–‡ä»¶")])])]),_._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[_._v("WARNING")]),_._v(" "),s("p",[_._v("ç³»ç»Ÿé»˜è®¤è§¦å‘bgsaveçš„æ¡ä»¶")]),_._v(" "),s("ul",[s("li",[_._v("15åˆ†é’Ÿä¸€ä¸ªæ•°æ®æ”¹å˜")]),_._v(" "),s("li",[_._v("5åˆ†é’Ÿ100ä¸ªæ•°æ®æ”¹å˜")]),_._v(" "),s("li",[_._v("1åˆ†é’Ÿ 1Wä¸ªæ•°æ®æ”¹å˜")])])]),_._v(" "),s("h3",{attrs:{id:"_26-2-aof"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_26-2-aof"}},[_._v("#")]),_._v(" 26.2. AOF")]),_._v(" "),s("ul",[s("li",[_._v("AOFé»˜è®¤æ–¹å¼æ˜¯ 1åˆ†é’Ÿå†™ä¸€æ¬¡LOG\n"),s("ul",[s("li",[_._v("è¿™ç§æ¨¡å¼é»˜è®¤ä¼šæœ‰ä¸€ä¸ªå­çº¿ç¨‹è¿›è¡Œå†™LOG,,è¿˜æœ‰ä¸€ä¸ªç¼“å†²åŒºè¿›è¡Œè®°å½•æ•°æ®çš„å˜åŒ– , ä¸»çº¿ç¨‹ä¸»è¦è´Ÿè´£æ•°æ®å­˜å‚¨,å­çº¿ç¨‹å®šæœŸè¯»å–ç¼“å†²åŒºçš„æ•°æ®è¿›è¡Œåˆ·ç›˜")])])])]),_._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[_._v("AOFæ”¯æŒçš„æ–¹å¼")]),_._v(" "),s("ul",[s("li",[_._v("always : æ¯ä¸€æ¬¡æ•°æ®æ”¹å˜éƒ½ä¼šå†™å…¥æ—¥å¿—")]),_._v(" "),s("li",[_._v("everysec : æ¯ä¸€åˆ†é’Ÿè¿›è¡Œä¸€æ¬¡å†™å…¥æ—¥å¿— (é»˜è®¤æ–¹å¼)")]),_._v(" "),s("li",[_._v("no : å°±æ˜¯æ ¹æ®ç³»ç»Ÿè‡ªåŠ¨åˆ¤æ–­å†™æ—¥å¿—æ–¹å¼")])])]),_._v(" "),s("p",[s("strong",[_._v("AOFæ¨¡å¼ä¼šå¯¼è‡´æ—¥å¿—æ–‡ä»¶å·¨å¤§,å¦‚ä½•è§£å†³?")])]),_._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[_._v("ç³»ç»Ÿæœ‰ä¸€ä¸ªæ—¥å¿—é‡å†™åŠŸèƒ½, å°±æ˜¯è®²æ—¥å¿—éƒ¨åˆ†å‘½ä»¤è¿›è¡Œåˆå¹¶,å‡å°‘äº†æ—¥å¿—æ–‡ä»¶å¤§å°,èŠ‚çº¦äº†æ•°æ®åº“å¯åŠ¨æ—¶é—´\n")])])]),s("h2",{attrs:{id:"_27-redisä¸»ä»å¤åˆ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_27-redisä¸»ä»å¤åˆ¶"}},[_._v("#")]),_._v(" 27. Redisä¸»ä»å¤åˆ¶")]),_._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[_._v("ä¸»ä»ç¯å¢ƒä¸‹ä»åº“é»˜è®¤æ˜¯å¯ä»¥å†™å…¥æ•°æ®çš„,ä½†æ˜¯ä¸ä¼šå‘ä¸ŠåŒæ­¥,,ä¸€èˆ¬ä¼šå¼€å¯ä»åº“åªè¯»é…ç½®,,\nåœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®   slave-read-only ä¸ºyes\n")])])]),s("ul",[s("li",[s("p",[s("strong",[_._v("ä¸»ä»å¤åˆ¶å¼€å¯:")])]),_._v(" "),s("ul",[s("li",[_._v("æ–¹å¼1 : é…ç½®æ–‡ä»¶ä¸­é…ç½®slaveof (éœ€è¦é‡å¯)")]),_._v(" "),s("li",[_._v("æ–¹å¼2 : å®¢æˆ·ç«¯ç›´æ¥è¾“å…¥å‘½ä»¤(ä¸éœ€é‡å¯,é‡å¯åå¤±æ•ˆ)")])])]),_._v(" "),s("li",[s("p",[s("strong",[_._v("ä¸»ä»å¤åˆ¶æ¨¡å¼:")])]),_._v(" "),s("ul",[s("li",[_._v("ä¸€ä¸»å¤šä» : è¿™ç§æ‰€æœ‰çš„ä»åº“éƒ½ç›´æ¥å¤‡ä»½ä¸»åº“çš„æ•°æ® ä¸»å‹åŠ›è¾ƒå¤§")]),_._v(" "),s("li",[_._v("ä¸»ä»ä» : ä»åº“1å¤‡ä»½ä¸»åº“æ•°æ®, ä»åº“2å¤‡ä»½ä»åº“1 , è¿™ç§æ–¹å¼é€šè¿‡ä»åº“æ¥RDBå¤‡ä»½æ˜¯å¾ˆå¥½çš„æ–¹å¼")])])]),_._v(" "),s("li",[s("p",[s("strong",[_._v("ä¸»ä»å¤åˆ¶çš„åŸç†:")])]),_._v(" "),s("ul",[s("li",[_._v("å»ºç«‹ä¸»ä»å…³ç³»ä¹‹å,ä»åº“ä¼šæƒ³ä½å‘èµ·åŒæ­¥å‘½ä»¤")]),_._v(" "),s("li",[_._v("ä¸»åº“æ¥åˆ°å‘½ä»¤åå¼€å§‹RDBå¿«ç…§(å¿«ç…§æœŸé—´æ”¹å˜çš„æ•°æ®ä¼šç¼“å­˜èµ·æ¥)")]),_._v(" "),s("li",[_._v("ä¸»å°†å¿«ç…§æ–‡ä»¶å’Œç¼“å­˜ä¸€å¹¶å‘ç»™ä»")]),_._v(" "),s("li",[_._v("ä»åº“å®ŒæˆåŒæ­¥")]),_._v(" "),s("li",[_._v("åç»­å‘ç”Ÿçš„æ•°æ®æ”¹å˜å‘½ä»¤ä¸»åº“ä¼šå°†å‘½ä»¤å‘é€ç»™ä»åº“,ä»è€Œä¿è¯æ•°æ®ä¸€è‡´æ€§")])])])]),_._v(" "),s("h2",{attrs:{id:"_28-è¯´ä¸€è¯´ä½ åœ¨å·¥ä½œä¸­çš„åº”ç”¨åœºæ™¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_28-è¯´ä¸€è¯´ä½ åœ¨å·¥ä½œä¸­çš„åº”ç”¨åœºæ™¯"}},[_._v("#")]),_._v(" 28. è¯´ä¸€è¯´ä½ åœ¨å·¥ä½œä¸­çš„åº”ç”¨åœºæ™¯?")]),_._v(" "),s("ul",[s("li",[_._v("äº”å¤§ç±»å‹")]),_._v(" "),s("li",[_._v("åŸºæœ¬ä¸Šå°±æ˜¯ç¼“å­˜ç”¨ (ä¸è¦å¾€å­˜å‚¨ä¸Šèµ°)")]),_._v(" "),s("li",[_._v("token,session,é˜Ÿåˆ—ç­‰.  ä¸­å¿ƒæ€æƒ³:æœåŠ¡æ— çŠ¶æ€")]),_._v(" "),s("li",[_._v("åˆ†å¸ƒå¼é”")])]),_._v(" "),s("h2",{attrs:{id:"_29-redisæ˜¯ä¸æ˜¯å¤šçº¿ç¨‹çš„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_29-redisæ˜¯ä¸æ˜¯å¤šçº¿ç¨‹çš„"}},[_._v("#")]),_._v(" 29. Redisæ˜¯ä¸æ˜¯å¤šçº¿ç¨‹çš„")]),_._v(" "),s("ul",[s("li",[s("p",[_._v("æ— è®ºæ˜¯ä»€ä¹ˆç‰ˆæœ¬, worketçº¿ç¨‹å°±ä¸€ä¸ª")])]),_._v(" "),s("li",[s("p",[_._v("6.xç‰ˆæœ¬å‡ºç°äº†IO Threads")])]),_._v(" "),s("li",[s("p",[_._v("[å­¦ä¸€ä¸‹IOè¯¾],é¢å‘IOæ¨¡å‹ç¼–ç¨‹")])]),_._v(" "),s("li",[s("p",[_._v("å»¶ä¼¸netty")])]),_._v(" "),s("li",[s("p",[_._v("popline: å¤šä¸ªæŒ‡ä»¤é¡ºåºæ‰§è¡Œçš„,åŸå­çš„")]),_._v(" "),s("ul",[s("li",[_._v("poplineæ˜¯å¤šä¸ªæŒ‡ä»¤ç§¯æ”’åˆ°ä¸€èµ·ç„¶åå‘ç»™æœåŠ¡ç«¯æ‰§è¡Œ")])])]),_._v(" "),s("li",[s("p",[_._v("äº‹åŠ¡:äº‹åŠ¡æ‰§è¡Œæ—¶æœŸæ˜¯åŸå­çš„,å¤šæ¡æŒ‡ä»¤äº‹åŠ¡æ‰§è¡Œæ—¶å¤±è´¥å°±æ˜¯å¤±è´¥,æˆåŠŸå°±æ˜¯æˆåŠŸ,æ²¡æœ‰å›æ»šæœºåˆ¶")]),_._v(" "),s("ul",[s("li",[_._v("äº‹åŠ¡æ˜¯æœåŠ¡ç«¯å…ˆå¼€å¯äº‹åŠ¡,ç„¶åå®¢æˆ·ç«¯æ‰§è¡Œå‘½ä»¤,å†å…³é—­äº‹åŠ¡")]),_._v(" "),s("li",[_._v("å°‘ä½¿ç”¨äº‹åŠ¡")]),_._v(" "),s("li",[_._v("äº‹åŠ¡å†…çš„æŒ‡ä»¤å°½é‡å°‘å’Œå¿«,")]),_._v(" "),s("li",[_._v("äº‹åŠ¡æœ‰ä¸€ä¸ªqueueçš„æ¦‚å¿µ,å…ˆå­˜å‘½ä»¤,ç„¶åä¸€èµ·ç»™worketçº¿ç¨‹æ‰§è¡Œ")])])])]),_._v(" "),s("p",[_._v("å†…æ ¸\nå¤šè·¯å¤ç”¨å™¨(ä¸è´Ÿè´£å†…å­˜çš„è¯»å†™),å€¼ç®¡ç†è¯»å†™çš„äº‹ä»¶\nredisæ­»å¾ªç¯è¯»å–å†…å­˜äº‹ä»¶")]),_._v(" "),s("h2",{attrs:{id:"_30-rediså­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜å—-ä¸ºä»€ä¹ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_30-rediså­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜å—-ä¸ºä»€ä¹ˆ"}},[_._v("#")]),_._v(" 30. Rediså­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜å—? ä¸ºä»€ä¹ˆ")]),_._v(" "),s("p",[_._v("redisåªæœ‰ä¸€ä¸ªå·¥ä½œçº¿ç¨‹,å¤šä¸ªæ“ä½œæ˜¯å¹¶è¡Œçš„. å•ä¸ªæ“ä½œæ˜¯åŸå­çš„")]),_._v(" "),s("p",[_._v("rediså¯ä»¥æŠ¥éšœå†…éƒ¨ä¸²è¡Œ\nå¤–ç•Œä½¿ç”¨çš„æ—¶å€™è¦ä¿éšœ,ä¸šåŠ¡ä¸Šçš„é¡ºåºè¦è‡ªè¡Œæ§åˆ¶")]),_._v(" "),s("h2",{attrs:{id:"_31-é‡åˆ°è¿‡ç¼“å­˜ç©¿é€å—-é‡åˆ°è¿‡ç¼“å­˜å‡»ç©¿å—-å¦‚ä½•é¿å…ç¼“å­˜é›ªå´©"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_31-é‡åˆ°è¿‡ç¼“å­˜ç©¿é€å—-é‡åˆ°è¿‡ç¼“å­˜å‡»ç©¿å—-å¦‚ä½•é¿å…ç¼“å­˜é›ªå´©"}},[_._v("#")]),_._v(" 31. é‡åˆ°è¿‡ç¼“å­˜ç©¿é€å—? é‡åˆ°è¿‡ç¼“å­˜å‡»ç©¿å—? å¦‚ä½•é¿å…ç¼“å­˜é›ªå´©")]),_._v(" "),s("p",[_._v("åŸåˆ™: æŠŠæœ‰æ•ˆçš„è¯·æ±‚äº¤ç»™æ•°æ®åº“,æ— æ•ˆçš„è¯·æ±‚è¿‡æ»¤æ‰..å³ä¾¿æ”¾å¤§å‰ç½®ç¯å¢ƒçš„å¤æ‚åº¦å’Œæˆæœ¬")]),_._v(" "),s("ul",[s("li",[_._v("ç©¿é€: ç›´æ¥è®¿é—®åˆ°äº†æ²¡æœ‰çš„æ•°æ®,å¯¼è‡´æ¯æ¬¡éƒ½è¯·æ±‚æ•°æ®åº“..\n"),s("ul",[s("li",[_._v("å¯¹nullkeyè¿›è¡Œç¼“å­˜, é«˜å¹¶å‘æƒ…å†µä¸‹éœ€è¦åŠ é”,å…ˆå–é”åœ¨æŸ¥è¯¢ç¼“å­˜")]),_._v(" "),s("li",[_._v("ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨")])])]),_._v(" "),s("li",[_._v("å‡»ç©¿: è¯·æ±‚äº† è¿‡æœŸçš„keyæ´»æ²¡æœ‰è¢«ç¼“å­˜çš„key,å¯¼è‡´è¯·æ±‚ç›´æ¥èµ°åˆ°æ•°æ®åº“\n"),s("ul",[s("li",[_._v("å¤„ç†æ–¹æ³•:å¤§å®¶æŠ¢é”,æ²¡æŠ¢åˆ°çš„sleep,æŠ¢åˆ°çš„å»DB,ç„¶åæ›´æ–°redis,sleepçš„è¿”å›åˆ°ç¬¬ä¸€æ­¥;\n"),s("ul",[s("li",[_._v("çº¿ç¨‹sleepçš„æ—¶å€™æ˜¯blokingçš„è½»é‡çº§è¿›ç¨‹,ä¸å‚ä¸CPUåŠå†…æ ¸è°ƒåº¦,åšå¥½çº¿ç¨‹æ± æ‰©ç¼©å®¹å°±å¯ä»¥äº†")])])]),_._v(" "),s("li",[_._v("é”è¦ç”¨å•æœºçš„,è¦æœ‰æ’ä»–æ€§")])])])]),_._v(" "),s("p",[_._v("å¦‚ä½•é¿å…ç¼“å­˜é›ªå´©:")]),_._v(" "),s("ol",[s("li",[_._v("å‚ç…§å‡»ç©¿å¤„ç†åŠæ³•")]),_._v(" "),s("li",[_._v("å‡»ç©¿é”å¯ä»¥æ˜¯åˆ†ç‰‡çš„,å› ä¸ºæ¯ä¸ªkeyäº’ä¸å¹²æ‰°")])]),_._v(" "),s("p",[s("strong",[_._v("æ ¸å¿ƒæ€æƒ³,é¿å…DBçš„æ— æ•ˆ/é‡å¤è¯·æ±‚")])]),_._v(" "),s("h2",{attrs:{id:"_32-å¦‚ä½•è¿›è¡Œç¼“å­˜é¢„çƒ­"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_32-å¦‚ä½•è¿›è¡Œç¼“å­˜é¢„çƒ­"}},[_._v("#")]),_._v(" 32. å¦‚ä½•è¿›è¡Œç¼“å­˜é¢„çƒ­")]),_._v(" "),s("ul",[s("li",[_._v("æå‰å§æ•°æ®å¡å¦‚Redis,")]),_._v(" "),s("li",[_._v("åœ¨å¼€å‘é€»è¾‘ä¸Š,ä¹Ÿè¦è§„é¿å·®é›†(æ²¡æœ‰è¢«é¢„çƒ­çš„æ•°æ®), ä¸€åŠ³æ°¸é€¸")])]),_._v(" "),s("p",[_._v("ä½ çŸ¥é“é‚£äº›æ˜¯çƒ­ç‚¹keyå—?(è‚¯å®šä¸çŸ¥é“,ä¼šé€ æˆçº¿ä¸Šå¾ˆå¤šç¼“å­˜æ²¡æœ‰è¢«å‘½ä¸­)")]),_._v(" "),s("h2",{attrs:{id:"_33-redisæ˜¯å¦‚ä½•åˆ é™¤è¿‡æœŸkeyçš„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_33-redisæ˜¯å¦‚ä½•åˆ é™¤è¿‡æœŸkeyçš„"}},[_._v("#")]),_._v(" 33. Redisæ˜¯å¦‚ä½•åˆ é™¤è¿‡æœŸKeyçš„")]),_._v(" "),s("h2",{attrs:{id:"_34-ç¼“å­˜æ˜¯å¦‚ä½•å›æ”¶çš„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_34-ç¼“å­˜æ˜¯å¦‚ä½•å›æ”¶çš„"}},[_._v("#")]),_._v(" 34. ç¼“å­˜æ˜¯å¦‚ä½•å›æ”¶çš„")]),_._v(" "),s("p",[_._v("å¦‚æœä½œä¸ºå­˜å‚¨ä½¿ç”¨,ä½¿ç”¨å›æ”¶æœºåˆ¶")]),_._v(" "),s("ol",[s("li",[_._v("åå°åœ¨è½®è¯¢,åˆ†æ‰¹åˆ†æ®µçš„åˆ é™¤é‚£äº›è¿‡æœŸkeyçš„")]),_._v(" "),s("li",[_._v("è¯·æ±‚æ—¶å€™åˆ¤æ–­æ˜¯å¦å·²ç»è¿‡æœŸ, å°½é‡å§æ— ç”¨å†…å­˜å›æ”¶å›æ¥")])]),_._v(" "),s("h2",{attrs:{id:"_35-ç¼“å­˜æ˜¯å¦‚ä½•æ·˜æ±°çš„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_35-ç¼“å­˜æ˜¯å¦‚ä½•æ·˜æ±°çš„"}},[_._v("#")]),_._v(" 35. ç¼“å­˜æ˜¯å¦‚ä½•æ·˜æ±°çš„")]),_._v(" "),s("p",[_._v("å¦‚æœä½œä¸ºç¼“å­˜ä½¿ç”¨,ç›´æ¥ä½¿ç”¨æ·˜æ±°æœºåˆ¶")]),_._v(" "),s("p",[_._v("å†…å­˜ç©ºé—´ä¸è¶³çš„æƒ…å†µä¼šå‡ºç°æ·˜æ±°")]),_._v(" "),s("ol",[s("li",[_._v("æ·˜æ±°æœºåˆ¶æœ‰ä¸å…è®¸æ·˜æ±°,")]),_._v(" "),s("li",[_._v("LRU,RFU,Random,TTL")]),_._v(" "),s("li",[_._v("å…¨ç©ºé—´,")]),_._v(" "),s("li",[_._v("è®¾ç½®è¿‡æœŸé›†ç¾¤ä¸­")])]),_._v(" "),s("h2",{attrs:{id:"_36-ç¼“å­˜æ›´æ–°æœºåˆ¶-åŒå†™ä¸€è‡´æ€§"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_36-ç¼“å­˜æ›´æ–°æœºåˆ¶-åŒå†™ä¸€è‡´æ€§"}},[_._v("#")]),_._v(" 36. ç¼“å­˜æ›´æ–°æœºåˆ¶(åŒå†™ä¸€è‡´æ€§)")]),_._v(" "),s("p",[s("strong",[_._v("åŒå†™ä¸€è‡´æ€§")])]),_._v(" "),s("ul",[s("li",[_._v("Cache Aside Pattern")]),_._v(" "),s("li",[_._v("Read/Write Through Pattern")]),_._v(" "),s("li",[_._v("Write Behind Caching Pattern")])]),_._v(" "),s("p",[_._v("å‰ç½®çŸ¥è¯†ç‚¹:\næœ¬æœºçš„å†™æ“ä½œéƒ½ä¸ä¸€å®šèƒ½ä¿è¯100%å¯é  æ¶‰åŠåˆ°app->å†…æ ¸->åˆ·ç›˜\nJava NIOä¸­è°ƒç”¨forceåˆ·ç›˜ é‚£ä¹ˆç»å¯¹å¯é ")]),_._v(" "),s("p",[_._v("å¸¸è§„æ–¹å¼: åˆ é™¤ç¼“å­˜ -> æ›´æ–°æ•°æ®æä¾›æ–¹ -> è®¾ç½®ç¼“å­˜\nå»¶æ—¶åŒåˆ : åˆ é™¤ç¼“å­˜ -> æ›´æ–°æ•°æ®æä¾›æ–¹ -> ç¡çœ ä¸€æ®µæ—¶é—´(æ ¹æ®å®é™…ä¸šåŠ¡) -> å†åˆ é™¤ç¼“å­˜")]),_._v(" "),s("h2",{attrs:{id:"_37-redisæ‰›ä¸ä½äº†-ç™¾ä¸‡æ•°æ®æ‰“åˆ°dbä¸Š-è¯¥æ€ä¹ˆå¤„ç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_37-redisæ‰›ä¸ä½äº†-ç™¾ä¸‡æ•°æ®æ‰“åˆ°dbä¸Š-è¯¥æ€ä¹ˆå¤„ç†"}},[_._v("#")]),_._v(" 37. Redisæ‰›ä¸ä½äº†,ç™¾ä¸‡æ•°æ®æ‰“åˆ°DBä¸Š,è¯¥æ€ä¹ˆå¤„ç†")]),_._v(" "),s("h2",{attrs:{id:"_38-rediså¦‚ä½•å®ç°åˆ†å¸ƒå¼é”"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_38-rediså¦‚ä½•å®ç°åˆ†å¸ƒå¼é”"}},[_._v("#")]),_._v(" 38. Rediså¦‚ä½•å®ç°åˆ†å¸ƒå¼é”")]),_._v(" "),s("h2",{attrs:{id:"_39-redisçš„ç”¨é€”å®šä¹‰"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_39-redisçš„ç”¨é€”å®šä¹‰"}},[_._v("#")]),_._v(" 39. Redisçš„ç”¨é€”å®šä¹‰")]),_._v(" "),s("ul",[s("li",[_._v("å¦‚æœå®šä¹‰ä¸ºç¼“å­˜æœåŠ¡å™¨çš„è¯,éœ€è¦æœ‰å†…å­˜æ·˜æ±°ç­–ç•¥. é‚£ä¹ˆå°†ä¸é€‚ç”¨äºåšåˆ†å¸ƒå¼é”")]),_._v(" "),s("li",[_._v("å¦‚æœå®šä¹‰ä¸ºå­˜å‚¨çš„è¯æ·˜æ±°ç­–ç•¥è®¾ç½®ä¸ºLRU,åªæ·˜æ±°è¿‡æœŸçš„key\n"),s("ul",[s("li",[_._v("è¿™æ ·å°±å…·å¤‡äº†å­˜å‚¨å’Œç¼“å­˜çš„ç»¼åˆèƒ½åŠ›")]),_._v(" "),s("li",[_._v("å¦‚è¿‡ä½œä¸ºlock,lockKeyè‚¯å®šéœ€è¦è®¾ç½®è¿‡æœŸæ—¶é—´. é‚£ä¹ˆå®ƒä¸€ä¸å°å¿ƒå°±æœ‰å¯èƒ½ä¼šæˆä¸ºæ·˜æ±°çš„å¯¹è±¡")]),_._v(" "),s("li",[_._v("å¦‚æœéè¦åšåˆ†å¸ƒå¼é”,å»ºè®®å•ç‚¹å¼€ä¸€å°redisåšé”")])])])]),_._v(" "),s("h3",{attrs:{id:"_39-1-å¦‚æœredisåªä½œä¸ºç¼“å­˜ä½¿ç”¨-éœ€è¦å¼€å¯æŒä¹…åŒ–å—-rdb-aof"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_39-1-å¦‚æœredisåªä½œä¸ºç¼“å­˜ä½¿ç”¨-éœ€è¦å¼€å¯æŒä¹…åŒ–å—-rdb-aof"}},[_._v("#")]),_._v(" 39.1. å¦‚æœRedisåªä½œä¸ºç¼“å­˜ä½¿ç”¨,éœ€è¦å¼€å¯æŒä¹…åŒ–å—(RDB,AOF)")]),_._v(" "),s("p",[_._v("æŒä¹…åŒ–çš„ç›®çš„: æå‡æ•°æ®çš„å¯é æ€§\nå¯ä»¥ä½¿ç”¨å¤‡ä»½,HA,å“¨å…µç­‰æ–¹å¼æ¥æé«˜å¯é æ€§\nå»ºè®®å…³é—­æœ¬æœºæŒä¹…åŒ–, å¼€å¯å¤åˆ¶çš„æŒä¹…åŒ–æ¥æå‡åå")])])}),[],!1,null,null,null);v.default=a.exports}}]);