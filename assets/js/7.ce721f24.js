(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{432:function(t,a,_){t.exports=_.p+"assets/img/jvm_thread.c5175059.png"},433:function(t,a,_){t.exports=_.p+"assets/img/TLAB.d64c7d4d.png"},446:function(t,a,_){"use strict";_.r(a);var s=_(34),v=Object(s.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("hr"),t._v(" "),s("h2",{attrs:{id:"title-jvm-jmm-8ç‰ˆæœ¬"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#title-jvm-jmm-8ç‰ˆæœ¬"}},[t._v("#")]),t._v(" title: JVM&&JMM(8ç‰ˆæœ¬)")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("JVMç›¸å…³çŸ¥è¯†")]),t._v(" "),s("ul",[s("li",[t._v("JVM ä¸ä»…ä»…åªèƒ½è¿è¡Œ Java ç¨‹åºï¼Œè¿˜èƒ½è¿è¡Œ Scalaï¼ŒGroovyï¼Œkotlin ç­‰å¤šç§è¯­è¨€ï¼ˆç›®å‰çº¦ 10 ç§ï¼‰,JVM å®˜æ–¹æœ‰ä¸€å¥—å®˜æ–¹è§„èŒƒï¼Œåªè¦ç¬¦åˆè§„èŒƒçš„æ–‡ä»¶éƒ½å¯ä»¥åœ¨ JVM ä¸­è¿è¡Œ")]),t._v(" "),s("li",[t._v("ç›®å‰ä¸»æµè™šæ‹Ÿæœºå« ğŸ”¥"),s("code",[t._v("HotSpotï¼ˆOracleçš„ï¼‰")]),t._v("ï¼Œè¿˜æœ‰ N å¤šå…¶ä»–çš„å…¬å¸çš„è™šæ‹Ÿæœº,æ¯”å¦‚ JRockit VM ï¼ˆSUN å…¬å¸ï¼‰,OpenJDK(å¼€æºçš„)ï¼Œ IBM çš„ J9 VM ç­‰ç­‰ï¼›")]),t._v(" "),s("li",[t._v("JDK8 çš„æ–¹æ³•åŒºæ”¹åä¸º MetaSpaceï¼ˆå…ƒç©ºé—´ï¼‰ï¼Œç›´æ¥å­˜æ”¾åœ¨ç‰©ç†å†…å­˜ä¸Š")])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/00831rSTgy1gcttslwnrvj31bn0u0u0x.jpg",alt:"JVMå†…å­˜æ¨¡å‹"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/00831rSTgy1gcttt0eez1j31360hy7j9.jpg",alt:"å †å†…å­˜æ¨¡å‹"}})]),t._v(" "),s("p",[s("strong",[t._v("Hotspot JVM åå°è¿è¡Œçš„ç³»ç»Ÿçº¿ç¨‹ä¸»è¦æœ‰ä¸‹é¢å‡ ä¸ªï¼š")]),t._v(" "),s("img",{attrs:{src:_(432),alt:"jvmçº¿ç¨‹"}})]),t._v(" "),s("p",[t._v("æ‰€æœ‰çº¿ç¨‹å…±äº«:")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Method Area")])]),t._v(" "),s("li",[s("p",[t._v("Headå †")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("çº¿ç¨‹éš”ç¦»æ•°æ®åŒº")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("ç¨‹åºè®¡æ•°å™¨:")]),t._v(" "),s("ul",[s("li",[t._v("BPC (bytecode pointer),åœ¨ç¨‹åºæ‰§è¡Œæ—¶æ ‡è®°ç¨‹åºæ‰§è¡Œåˆ°å“ªé‡Œäº†")])])]),t._v(" "),s("li",[s("strong",[t._v("è™šæ‹Ÿæœºæ ˆ VM Stack:")]),t._v(" æ¯ä¸ªæ–¹æ³•æ‰§è¡Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§, ç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯\n"),s("ul",[s("li",[t._v("å±€éƒ¨å˜é‡è¡¨: "),s("code",[t._v("ä¿å­˜æ ˆæ‰§è¡Œè¿‡ç¨‹ä¸­çš„å¸¸é‡")])]),t._v(" "),s("li",[t._v("æ“ä½œæ•°æ ˆ: "),s("code",[t._v("å…ˆè¿›åå‡ºçš„æ ˆ")])]),t._v(" "),s("li",[t._v("æŒ‡å‘å¸¸é‡æ± çš„æŒ‡é’ˆ")])])]),t._v(" "),s("li",[s("strong",[t._v("æœ¬åœ°æ–¹æ³•æ ˆ( Nvtive Method Stack):")]),t._v(" æœ¬åœ°æ–¹æ³•æ ˆåˆ™ä¸º Native æ–¹æ³•")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("çº¿ç¨‹å…±äº«åŒºåŸŸã€JAVA å †ã€æ–¹æ³•åŒºã€‘ã€ç›´æ¥å†…å­˜")])]),t._v(" "),s("ul",[s("li",[t._v("å †: è¿è¡Œæ—¶æ•°æ®åŒº")]),t._v(" "),s("li",[t._v("æ–¹æ³•åŒº: metaspace è¿è¡Œæ—¶å¸¸é‡æ± ")])])])]),t._v(" "),s("h2",{attrs:{id:"_1-å¯¹è±¡å†…å­˜å­˜å‚¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-å¯¹è±¡å†…å­˜å­˜å‚¨"}},[t._v("#")]),t._v(" 1. å¯¹è±¡å†…å­˜å­˜å‚¨")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://md.yike.link/20200406162442_9TNvfb_Screenshot.jpeg",alt:"å¯¹è±¡å†…å­˜å­˜å‚¨"}})]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Markwordï¼š")]),t._v(" å­˜æ”¾é”çŠ¶æ€ï¼Œå¯¹è±¡åˆ†ä»£ï¼Œhashcod ç­‰,ä¸å‹ç¼©å  8 ä¸ª,å‹ç¼©å  4 ä¸ª")]),t._v(" "),s("li",[s("code",[t._v("Class pointï¼š")]),t._v(" å­˜æ”¾å½“å‰å¯¹è±¡ç±»å‹çš„å¼•ç”¨,æ‰€æœ‰çš„ Class ç±»å‹éƒ½ä¼šè¢«å­˜æ”¾ç‚¹ MetaSpace ä¸­")]),t._v(" "),s("li",[s("code",[t._v("Instance Dataï¼š")]),t._v(" æ¯ä¸ªå˜é‡æŒ‡é’ˆå  8 ä¸ªå­—èŠ‚,å¼€å¯å‹ç¼©å  4 ä¸ª")]),t._v(" "),s("li",[s("code",[t._v("Pandingï¼š")]),t._v(" å¦‚æœå‰é¢å‡ é¡¹åŠ èµ·æ¥å­—èŠ‚æ•°ä¸èƒ½è¢« 8 æ•´é™¤ï¼Œå°±ä¼šä½¿ç”¨è¿™ä¸ªåŒºåŸŸè¡Œè¡¥é½..å¦‚æœæ»¡è¶³è¢« 8 æ•´é™¤è¿™ä¸ªåŒºåŸŸåˆ™æ²¡æœ‰")])]),t._v(" "),s("h3",{attrs:{id:"_1-1-javaå¯¹è±¡å¤´é•¿åº¦"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-javaå¯¹è±¡å¤´é•¿åº¦"}},[t._v("#")]),t._v(" 1.1. Javaå¯¹è±¡å¤´é•¿åº¦")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://md.yike.link/20200709142319_qUieai_Screenshot.jpeg",alt:"å¯¹è±¡å¤´é•¿åº¦"}})]),t._v(" "),s("h3",{attrs:{id:"_1-2-javaå¯¹è±¡å¤´çš„å­˜å‚¨ç»“æ„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-javaå¯¹è±¡å¤´çš„å­˜å‚¨ç»“æ„"}},[t._v("#")]),t._v(" 1.2. Javaå¯¹è±¡å¤´çš„å­˜å‚¨ç»“æ„")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("32ä½JVMçš„Mark Word é»˜è®¤å­˜å‚¨ç»“æ„\n")])])]),s("p",[s("img",{attrs:{src:"http://md.yike.link/20200709142451_Q1LhAl_Screenshot.jpeg",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"_1-3-mark-wordçš„çŠ¶æ€å˜åŒ–"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-mark-wordçš„çŠ¶æ€å˜åŒ–"}},[t._v("#")]),t._v(" 1.3. Mark Wordçš„çŠ¶æ€å˜åŒ–")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("Mark Word å­˜å‚¨çš„æ•°æ®ä¼šéšç€é”æ ‡å¿—ä¸ºçš„å˜åŒ–è€Œå˜åŒ–ã€‚\n")])])]),s("p",[s("img",{attrs:{src:"http://md.yike.link/20200709142527_sxUE3z_Screenshot.jpeg",alt:""}})]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("64ä½è™šæ‹Ÿæœºä¸‹ï¼ŒMark Wordæ˜¯64bitå¤§å°çš„\n")])])]),s("p",[s("img",{attrs:{src:"http://md.yike.link/20200709142552_cVgznC_Screenshot.jpeg",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"_2-å¯¹è±¡å‹ç¼©"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-å¯¹è±¡å‹ç¼©"}},[t._v("#")]),t._v(" 2. å¯¹è±¡å‹ç¼©")]),t._v(" "),s("p",[t._v("JVM ä¸­é»˜è®¤å¼€å¯äº†å¯¹è±¡å‹ç¼©,åœ¨å†…å­˜è¶…è¿‡ 32G æ—¶å¯¹è±¡å‹ç¼©è‡ªåŠ¨å¤±æ•ˆ;\nå¦‚æœå¼€å¯å‹ç¼©äº†:Markwordï¼šå  4 ä¸ªå­—èŠ‚,Instance Dataï¼šæ¯ä¸ªå  4 å­—èŠ‚;")]),t._v(" "),s("p",[t._v("æ‰€ä»¥åŸç‰ˆåœ¨ 32G å†…å­˜ä¸­è¿è¡Œå¤Ÿç”¨,æ¢åˆ° 64 çš„æœºå™¨åå‘ç°å†…å­˜æ²¡å¤šå‡ºæ¥å¤šå°‘å°±æ˜¯å› ä¸ºå¯¹è±¡å‹ç¼©å…³é—­äº†\nå¯èƒ½åŸæœ¬åœ¨ 32G ç¯å¢ƒä¸­å  30G å†…å­˜,è¿›è¡Œå†…å­˜æ‰©å®¹å 30G çš„æ•°æ®ç›´æ¥å˜æˆäº†å ç”¨ 45G")]),t._v(" "),s("h3",{attrs:{id:"_2-1-æ ˆä¸Šåˆ†é…"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-æ ˆä¸Šåˆ†é…"}},[t._v("#")]),t._v(" 2.1. æ ˆä¸Šåˆ†é…")]),t._v(" "),s("blockquote",[s("p",[t._v("JDK8 é»˜è®¤å¼€å¯æ ˆä¸Šåˆ†é…,æ ˆä¸Šåˆ†é…æ˜¯ç‰¹åˆ«çˆ½çš„äº‹æƒ…,å› ä¸ºæ–¹æ³•æ‰§è¡Œå®Œæ ˆå°±è‡ªåŠ¨å¼¹å‡ºäº†(å†…å­˜é‡Šæ”¾),ä¸ç”¨è€ƒè™‘åƒåœ¾å›æ”¶çš„é—®é¢˜")])]),t._v(" "),s("p",[s("img",{attrs:{src:"http://md.yike.link/20200406152450_3kUNGr_Screenshot.jpeg",alt:"æ ˆä¸Šåˆ†é…"}})]),t._v(" "),s("p",[t._v("åœ¨åˆ†ä»£æ¨¡å‹ä¸­,å½“ new å¯¹è±¡çš„æ—¶å€™é¦–å…ˆåœ¨æ ˆä¸Šåˆ†é…(æ ˆä¸Šèƒ½åˆ†é…çš„æƒ…å†µä¸‹),å¦åˆ™å°±åˆ¤æ–­å¯¹è±¡å¤§å°,å¦‚æœå¤ªå¤§ç›´æ¥æ”¾å…¥è€å¹´ä»£,å¦‚æœä¸å¤§å°±åˆ¤æ–­èƒ½å¦åœ¨ TLAB å­˜æ”¾,ä¸èƒ½åˆ™å­˜å…¥æ ˆä¸­")]),t._v(" "),s("h3",{attrs:{id:"_2-2-tlab-tread-local-allocation-buffer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-tlab-tread-local-allocation-buffer"}},[t._v("#")]),t._v(" 2.2. TLAB (Tread Local Allocation Buffer)")]),t._v(" "),s("blockquote",[s("p",[t._v("æœ¬åœ°çº¿ç¨‹ç¼“å†²åŒº")])]),t._v(" "),s("p",[t._v("JVM ä¼šä¸ºæ¯ä¸ªçº¿ç¨‹åœ¨å †ä¸­å¼€è¾Ÿä¸€å°å—ç©ºé—´ç”¨äºå­˜æ”¾è¿™ä¸ªçº¿ç¨‹çš„å¯¹è±¡;")]),t._v(" "),s("p",[s("strong",[t._v("ä¸ºä»€ä¹ˆè¦æœ‰ TLAB?")]),t._v("\nä¸€ä¸ª JVM ä¸­ä¼šè¿è¡Œ N ä¸ªçº¿ç¨‹,å¦‚æœåŒæ—¶åˆ›å»ºå¯¹è±¡çš„è¯ä¼šå­˜åœ¨å†…å­˜åŒºåŸŸç«äº‰é—®é¢˜."),s("br"),t._v("\nå‡å¦‚ä¸€ä¸ªçº¿ç¨‹è¦è¦åˆ›å»ºå¯¹è±¡åœ¨ 0x01 åŒºåŸŸ,å¦ä¸€ä¸ªçº¿ç¨‹ä¹Ÿè¦åˆ›å»ºå¯¹è±¡åœ¨ 0x01 åŒºåŸŸ è¿™ä¸ªæ—¶å€™å°±å­˜åœ¨é”ç«äº‰é—®é¢˜"),s("code",[t._v("(CAS é”)")]),t._v("ä¼šå¯¼è‡´ CPU èµ„æºæµªè´¹,æ‰€ä»¥æœ‰äº† TLAB é¿å…äº†ä¸€å¤§éƒ¨åˆ†çš„ç«äº‰é—®é¢˜.")]),t._v(" "),s("p",[t._v("Thread Local Allocation Buffersï¼Œçº¿ç¨‹æœ¬åœ°åˆ†é…ç¼“å­˜ã€‚JVMä½¿ç”¨äº†TLABè¿™ç§çº¿ç¨‹ä¸“å±çš„åŒºé—´æ¥é¿å…å¤šçº¿ç¨‹å†²çªï¼ˆæ— é”æ–¹å¼ï¼‰ï¼Œæé«˜å¯¹è±¡åˆ†é…æ•ˆç‡ã€‚TLABæœ¬èº«å ç”¨äº†Edenç©ºé—´ï¼Œå³JVMä¼šä¸ºæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½åˆ†é…ä¸€å—TLABç©ºé—´")]),t._v(" "),s("p",[s("img",{attrs:{src:_(433),alt:"TLAB"}})]),t._v(" "),s("h2",{attrs:{id:"_3-jmmå†…å­˜æ¨¡å‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-jmmå†…å­˜æ¨¡å‹"}},[t._v("#")]),t._v(" 3. JMMå†…å­˜æ¨¡å‹")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://md.yike.link/20200709195306_7lnpy0_Screenshot.jpeg",alt:"JMMå†…å­˜æ¨¡å‹"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"http://md.yike.link/20200709205344_kWH8ua_Screenshot.jpeg",alt:"JMMå†…å­˜æ¨¡å‹2"}})])])}),[],!1,null,null,null);a.default=v.exports}}]);