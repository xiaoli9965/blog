(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{468:function(s,t,e){"use strict";e.r(t);var a=e(34),r=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"_1-redis-é›†ç¾¤æ­å»º-5"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-redis-é›†ç¾¤æ­å»º-5"}},[s._v("#")]),s._v(" 1. Redis é›†ç¾¤æ­å»º(5.+)")]),s._v(" "),e("blockquote",[e("p",[s._v("æ­å»º redis é›†ç¾¤ç¯å¢ƒæœ€å°‘éœ€è¦ 6 ä¸ªèŠ‚ç‚¹å®Œæˆ\nä¸¤å°æœºå™¨,6 ä¸ªèŠ‚ç‚¹ æ­å»º redis é›†ç¾¤")])]),s._v(" "),e("p",[e("code",[s._v("æ­å»ºredisé›†ç¾¤å‰ææ˜¯ä½ å·²ç»ä¸‹è½½äº†redis")])]),s._v(" "),e("h3",{attrs:{id:"_1-1-åˆ›å»º-redis-èŠ‚ç‚¹å®‰è£…ç›®å½•"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-åˆ›å»º-redis-èŠ‚ç‚¹å®‰è£…ç›®å½•"}},[s._v("#")]),s._v(" 1.1. åˆ›å»º Redis èŠ‚ç‚¹å®‰è£…ç›®å½•")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#åˆ›å»ºé›†ç¾¤æ–‡ä»¶å¤¹")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /opt/redis-cluster/\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#è¿›å…¥é›†ç¾¤æ–‡ä»¶å¤¹")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v("  /opt/redis-cluster/\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#åˆ›å»ºä¸‰ä¸ªèŠ‚ç‚¹ç›®å½•")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("7001")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("7002")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ‹·è´è§£å‹åredisç›®å½•ä¸­srcæ–‡ä»¶åˆ°redis-cluster")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -r "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/redis-5.0.8/src/ ./\n")])])]),e("p",[s._v("ä¸¤å°æœºå™¨æ‰§è¡Œç›¸åº”çš„æ“ä½œ")]),s._v(" "),e("p",[e("img",{attrs:{src:"http://md.yike.link/20200325214821_5PgNpT_Screenshot.jpeg",alt:"ç›®å½•ç»“æ„"}})]),s._v(" "),e("h3",{attrs:{id:"_1-2-é…ç½®æ–‡ä»¶åˆå§‹åŒ–"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-é…ç½®æ–‡ä»¶åˆå§‹åŒ–"}},[s._v("#")]),s._v(" 1.2. é…ç½®æ–‡ä»¶åˆå§‹åŒ–")]),s._v(" "),e("blockquote",[e("p",[s._v("è¦åˆ›å»º redis é›†ç¾¤,å¿…é¡»è¦ä¿®æ”¹ä»¥ä¸‹é…ç½®:")])]),s._v(" "),e("p",[e("strong",[s._v("å®˜æ–¹æ¨è:")])]),s._v(" "),e("ul",[e("li",[s._v("è®¾ç½®ç«¯å£:"),e("code",[s._v("port 7000")])]),s._v(" "),e("li",[s._v("å¼€å¯é›†ç¾¤:"),e("code",[s._v("cluster-enabled yes")])]),s._v(" "),e("li",[e("code",[s._v("cluster-config-file nodes-7000.conf")])]),s._v(" "),e("li",[s._v("èŠ‚ç‚¹è¿æ¥è¶…æ—¶:"),e("code",[s._v("cluster-node-timeout 5000")])]),s._v(" "),e("li",[s._v("å¼€å¯ AOF æ¨¡å¼:"),e("code",[s._v("appendonly yes")])])]),s._v(" "),e("p",[e("strong",[s._v("ä¸ªäººé™„åŠ :")])]),s._v(" "),e("ul",[e("li",[s._v("å…³é—­ä¿æŠ¤æ¨¡å¼:"),e("code",[s._v("protected-mode no")])]),s._v(" "),e("li",[s._v("åå°å¯åŠ¨:"),e("code",[s._v("daemonize yes")])]),s._v(" "),e("li",[s._v("ä¿®æ”¹è¿›ç¨‹æ—¥å¿—æ–‡ä»¶åä¸ç«¯å£ä¸€è‡´:"),e("code",[s._v("pidfile /var/run/redis_7000.pid")]),s._v(" (ä¸æ”¹ä¹Ÿè¡Œ)")]),s._v(" "),e("li",[s._v("æŒ‡å®šæ—¥å¿—æ–‡ä»¶å:"),e("code",[s._v('logfile "7000.log"')]),s._v(" (ä¸å†™ä¹Ÿè¡Œ)")]),s._v(" "),e("li",[s._v("æŒ‡å®šé›†ç¾¤ç¯å¢ƒ master è¿æ¥å¯†ç :"),e("code",[s._v("masterauth xiaoli")])]),s._v(" "),e("li",[s._v("å„å„èŠ‚ç‚¹çš„è¿æ¥å¯†ç :"),e("code",[s._v("requirepass xiaoli")])])]),s._v(" "),e("blockquote",[e("p",[s._v("ğŸŒˆ å°†é…ç½®æ–‡ä»¶ä¿®æ”¹å¥½ä¹‹åä¸€ä¸€å­˜æ”¾åˆ° 7000,7001,7002 æ–‡ä»¶å¤¹ä¸­ (é…ç½®æ–‡ä»¶åœ¨è§£å‹æ–‡ä»¶å¤¹ä¸­)"),e("br"),s._v("\nä¸¤å°æœºå™¨æ‰§è¡Œç›¸åº”çš„æ“ä½œ")])]),s._v(" "),e("h3",{attrs:{id:"_1-3-å¯åŠ¨-redis-èŠ‚ç‚¹"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-å¯åŠ¨-redis-èŠ‚ç‚¹"}},[s._v("#")]),s._v(" 1.3. å¯åŠ¨ redis èŠ‚ç‚¹")]),s._v(" "),e("blockquote",[e("p",[s._v("å› ä¸ºæœ‰ä¸¤å°æœºå™¨,æ‰€ä»¥æˆ‘ä»¬ä¸¤å°æœºå™¨éƒ½è¦æ‰§è¡ŒåŒæ ·çš„æ“ä½œ")])]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#è¿›å…¥ç›®å½•,å¯åŠ¨èŠ‚ç‚¹ (ä¸¤å°æœºå™¨æ‰§è¡Œç›¸åº”çš„æ“ä½œ)")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /opt/redis-cluster/\n./src/redis-server ./7000/redis.conf\n./src/redis-server ./7001/redis.conf\n./src/redis-server ./7002/redis.conf\n")])])]),e("p",[e("img",{attrs:{src:"http://md.yike.link/20200325214842_o6XuB5_Screenshot.jpeg",alt:"å¯åŠ¨æˆåŠŸ"}})]),s._v(" "),e("h2",{attrs:{id:"_1-4-ğŸ˜ˆ-åˆ›å»ºé›†ç¾¤-å»ºç«‹-redis-ä¸»ä»å…³ç³»"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-ğŸ˜ˆ-åˆ›å»ºé›†ç¾¤-å»ºç«‹-redis-ä¸»ä»å…³ç³»"}},[s._v("#")]),s._v(" 1.4. ğŸ˜ˆ åˆ›å»ºé›†ç¾¤(å»ºç«‹ Redis ä¸»ä»å…³ç³»)")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åˆ›å»ºé›†ç¾¤å‘½ä»¤   -a {è®¿é—®å¯†ç }")]),s._v("\n./src/redis-cli --cluster create -a xiaoli "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".191.128:7000 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".191.128:7001 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".191.128:7002  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".191.129:7000 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".191.129:7001 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".191.129:7002 --cluster-replicas "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æ ¹æ®æç¤ºè¾“å¦‚yeså°±å®Œæˆäº†é›†ç¾¤æ­å»º")]),s._v("\n")])])]),e("p",[e("img",{attrs:{src:"http://md.yike.link/20200325214857_9EYq8O_Screenshot.jpeg",alt:"é›†ç¾¤å¯åŠ¨æˆåŠŸ"}}),s._v(" "),e("img",{attrs:{src:"http://md.yike.link/20200325214913_KNUVf7_Screenshot.jpeg",alt:"å¯åŠ¨2"}}),s._v(" "),e("strong",[s._v("é›†ç¾¤éªŒè¯:")])]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# é€šè¿‡å®¢æˆ·ç«¯éšä¾¿é“¾æ¥ä¸€å°æœåŠ¡å™¨ -cä»£è¡¨é›†ç¾¤æ¨¡å¼è¿æ¥")]),s._v("\n./src/redis-cli -c -h  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v(" -a xiaoli\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è¾“å…¥ æŸ¥çœ‹å½“å‰èŠ‚ç‚¹ä¿¡æ¯")]),s._v("\ninfo replication\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯")]),s._v("\ncluster nodes\n")])])]),e("p",[e("img",{attrs:{src:"http://md.yike.link/20200325214928_c6BzWW_Screenshot.jpeg",alt:"æŸ¥çœ‹å½“å‰èŠ‚ç‚¹ä¿¡æ¯"}})]),s._v(" "),e("p",[e("img",{attrs:{src:"http://md.yike.link/20200325214945_Ewzgk9_Screenshot.jpeg",alt:"æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯"}})]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("å½“ä½ è¿æ¥åˆ°ä»èŠ‚ç‚¹è¿›è¡Œå†™å…¥æ—¶,ä¼šé»˜è®¤ç§»åŠ¨åˆ°ä¸»èŠ‚ç‚¹è¿›è¡Œå†™å…¥")])]),s._v(" "),e("li",[e("strong",[s._v("åœ¨è¯»å–æ—¶ç›´æ¥é€šè¿‡ä»èŠ‚ç‚¹è¿›è¡Œè¯»å–")]),s._v(" "),e("img",{attrs:{src:"http://md.yike.link/20200325214959_qs5L4h_Screenshot.jpeg",alt:"7002"}}),s._v(" "),e("code",[s._v("æ¯ä¸ªRedisèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªæ°¸ä¹…çš„IDå€¼,é›†ç¾¤å†…éƒ¨é€šè¿‡idå€¼è¿›è¡Œé€šä¿¡(è€Œä¸æ˜¯IP)")])])]),s._v(" "),e("p",[e("strong",[s._v("é›†ç¾¤å…³é—­:")]),s._v(" ç¼–å†™å…³é—­è„šæœ¬")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /opt/redis-cluster/shutdown.sh\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è¾“å‡ºå…¥ä»¥ä¸‹å‘½ä»¤ ,ç„¶åä¿å­˜:wq")]),s._v("\n/opt/redis-cluster/src/redis-cli -c -h  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v(" -a xiaoli "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v("\n/opt/redis-cluster/src/redis-cli -c -h  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("7001")]),s._v(" -a xiaoli "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v("\n/opt/redis-cluster/src/redis-cli -c -h  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("7002")]),s._v(" -a xiaoli "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# èµ‹æƒé™")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" u+x shutdown.sh\n "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ‰§è¡Œ")]),s._v("\n./shutdown.sh\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥çœ‹æ˜¯å¦å…³é—­æˆåŠŸ")]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" redis\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å› ä¸ºæœ‰ä¸¤å°æœºå™¨,æ‰€ä»¥ä¸¤å°æœºå™¨æ‰§è¡Œç›¸åº”æ“ä½œå³å¯")]),s._v("\n")])])]),e("p",[e("strong",[s._v("ç¼–å†™å¯åŠ¨è„šæœ¬:")])]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åˆ›å»ºæ–‡ä»¶")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /opt/redis-cluster/start.sh\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è¾“å¦‚ä»¥ä¸‹å‘½ä»¤")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /opt/redis-cluster/\n./src/redis-server ./7000/redis.conf\n./src/redis-server ./7001/redis.conf\n./src/redis-server ./7002/redis.conf\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# èµ‹æƒ")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" u+x start.sh\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥çœ‹æ˜¯å¦å¯åŠ¨æˆåŠŸ")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" redis\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å› ä¸ºæœ‰ä¸¤å°æœºå™¨,æ‰€ä»¥ä¸¤å°æœºå™¨æ‰§è¡Œç›¸åº”æ“ä½œå³å¯")]),s._v("\n")])])]),e("h2",{attrs:{id:"_1-5-1-5-5-é›†ç¾¤ç»´æŠ¤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-1-5-5-é›†ç¾¤ç»´æŠ¤"}},[s._v("#")]),s._v(" 1.5. 1.5.5. é›†ç¾¤ç»´æŠ¤")]),s._v(" "),e("h3",{attrs:{id:"_1-5-1-æ‰©å®¹-æ–°å¢èŠ‚ç‚¹"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-1-æ‰©å®¹-æ–°å¢èŠ‚ç‚¹"}},[s._v("#")]),s._v(" 1.5.1. (æ‰©å®¹)æ–°å¢èŠ‚ç‚¹")]),s._v(" "),e("blockquote",[e("p",[s._v("é€šè¿‡ --cluster add-node æ–°å¢èŠ‚ç‚¹æ—¶å¹¶ä¸ä¼šåˆ†é…æ§½,éœ€è¦è‡ªå·±æ‰‹åŠ¨è¿›è¡Œåˆ†é…")])]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ–°å¢èŠ‚ç‚¹  add-node {è¦åŠ çš„èŠ‚ç‚¹} {æ‰§è¡Œæ“ä½œçš„èŠ‚ç‚¹}")]),s._v("\n ./src/redis-cli --cluster add-node "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".191.129:7004 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".191.129:7000\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ–°å¢slaveèŠ‚ç‚¹  add-node {è¦åŠ çš„èŠ‚ç‚¹} {æ‰§è¡Œæ“ä½œçš„èŠ‚ç‚¹}")]),s._v("\n ./src/redis-cli --cluster add-node "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".191.129:7004 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".191.129:7000 --cluster-slave\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ–°å¢slaveèŠ‚ç‚¹,æŒ‡å®šä¸»èŠ‚ç‚¹  add-node {è¦åŠ çš„èŠ‚ç‚¹} {æ‰§è¡Œæ“ä½œçš„èŠ‚ç‚¹}  --master-id {ä¸»èŠ‚ç‚¹ID}")]),s._v("\n ./src/redis-cli --cluster add-node "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".191.129:7004 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".191.129:7000 --cluster-slave --cluster-master-id xxxxxxxxxxxxxxxxxxx\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä¸ºèŠ‚ç‚¹åˆ†é…æ’æ§½")]),s._v("\n ./src/redis-cli --cluster reshard "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".191.129:7004\n\n")])])]),e("p",[e("img",{attrs:{src:"http://md.yike.link/20200325215018_RpIFNI_Screenshot.jpeg",alt:"èŠ‚ç‚¹æ·»åŠ æˆåŠŸ1"}}),s._v(" "),e("img",{attrs:{src:"http://md.yike.link/20200325215031_UsoO5D_Screenshot.jpeg",alt:"èŠ‚ç‚¹æ·»åŠ æˆåŠŸ2"}})]),s._v(" "),e("h3",{attrs:{id:"_1-5-2-å‰¥ç¦»-å®¹ç¼©"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-2-å‰¥ç¦»-å®¹ç¼©"}},[s._v("#")]),s._v(" 1.5.2. (å‰¥ç¦»)å®¹ç¼©")]),s._v(" "),e("blockquote",[e("p",[s._v("cluster reset æ¸…é™¤æœ¬èŠ‚ç‚¹çš„é›†ç¾¤ä¿¡æ¯,ä¼šé€€å‡ºé›†ç¾¤")])]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# (å®¹ç¼©)å‰¥ç¦»ä¸»èŠ‚ç‚¹çš„æ—¶å€™éœ€è¦å…ˆå¹²æ‰ä»èŠ‚ç‚¹")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --cluster del-node {æ‰§è¡Œçš„èŠ‚ç‚¹} {è¦åˆ é™¤çš„ID}")]),s._v("\n./src/redis-cli --cluster del-node "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".191.128:7002 067f4af2d27fddca7b2aa7c63fb5d4add8a47aab\n\n")])])]),e("h2",{attrs:{id:"_1-6-éå®˜æ–¹çš„é›†ç¾¤æ–¹æ¡ˆ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-éå®˜æ–¹çš„é›†ç¾¤æ–¹æ¡ˆ"}},[s._v("#")]),s._v(" 1.6. éå®˜æ–¹çš„é›†ç¾¤æ–¹æ¡ˆ")]),s._v(" "),e("ul",[e("li",[s._v("è±Œè±†èšå¼€æº Codis")]),s._v(" "),e("li",[s._v("æ¨ç‰¹çš„å¼€æº Twemproxy")])]),s._v(" "),e("h2",{attrs:{id:"_2-å“¨å…µ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-å“¨å…µ"}},[s._v("#")]),s._v(" 2. å“¨å…µ")]),s._v(" "),e("p",[s._v("redis å“¨å…µæœºåˆ¶ä¸»è¦æœ‰ä¸‰ä¸ªä½œç”¨:")]),s._v(" "),e("ul",[e("li",[s._v("ç›‘æ§,é€šçŸ¥")]),s._v(" "),e("li",[s._v("è‡ªåŠ¨åšæ•…éšœè½¬ç§» (ä¸»æŒ‚äº†è‡ªåŠ¨æå‡ä»ä¸ºä¸»,ä¸»æ´»äº†ä»è‡ªåŠ¨é€€ä½)")]),s._v(" "),e("li",[s._v("é…ç½®æä¾›")])]),s._v(" "),e("p",[e("strong",[s._v("ä¼˜ç‚¹:")]),s._v(" å“¨å…µæœºåˆ¶æ˜¯ç®€å•é›†ç¾¤ç®¡ç†çš„åˆ©å™¨,å¯ä»¥ä¿è¯ä¸»ä»çš„é«˜å¯ç”¨.\n"),e("strong",[s._v("ç¼ºç‚¹:")]),s._v(" åªè§£å†³äº†é«˜å¯ç”¨,å¹¶æ²¡æœ‰è§£å†³ä¸»èŠ‚ç‚¹çš„å†™å‹åŠ›(åˆ†ç‰‡è§£å†³)")]),s._v(" "),e("blockquote",[e("p",[s._v("åœ¨ redis é›†ç¾¤åˆ†ç‰‡ä¸­ä¸éœ€è¦ç”¨åˆ°å“¨å…µ,å› ä¸ºé‚£ä¸ªé‡Œé¢çš„é«˜å¯ç”¨æœºåˆ¶ç±»ä¼¼å“¨å…µå¹¶ä¸”æ›´å¼ºå¤§")])]),s._v(" "),e("p",[e("img",{attrs:{src:"http://md.yike.link/20200325215117_IxfS4A_Screenshot.jpeg",alt:"å“¨å…µæ¶æ„"}})]),s._v(" "),e("h2",{attrs:{id:"_3-é›†ç¾¤åˆ†ç‰‡"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-é›†ç¾¤åˆ†ç‰‡"}},[s._v("#")]),s._v(" 3. é›†ç¾¤åˆ†ç‰‡")]),s._v(" "),e("ul",[e("li",[s._v("é›†ç¾¤ä¼šè‡ªåŠ¨è¿›è¡Œæ•…éšœè½¬ç§»,ä¸»æŒ‚äº†ä»ä¼šé¡¶ä¸Š. ä½†æ˜¯åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­"),e("code",[s._v("ä¼šä¸¢å¤±éƒ¨åˆ†è¯·æ±‚(æ— æ³•é¿å…)")]),s._v(",å½“ä¸»åœ¨æ¬¡èµ·æ¥åä»è‡ªåŠ¨é€€ä½")]),s._v(" "),e("li",[s._v("é›†ç¾¤ä¸­ä¼šè‡ªåŠ¨å¹³è¡¡ä¸»ä»å…³ç³»(é»˜è®¤æ¯ä¸ªä¸»éƒ½ä¼šåˆ†é…ä¸€ä¸ªä»). æ¯”å¦‚:A ä¸»æœ‰ 2 ä¸ªä»,B ä¸»åªæœ‰ä¸€ä¸ªä» å½“ B ä¸»æŒ‚äº†å B ä»å‡çº§ä¸ºä¸»,æ¬¡æ•°é›†ç¾¤ä¼šå°† A ä¸»å…¶ä¸­çš„ä¸€ä¸ªä»ä¸€åˆ° B æ¥å½“ä»")]),s._v(" "),e("li",[s._v("åœ¨ä»£ç ä¸­è¿æ¥é›†ç¾¤æ—¶ç¢°åˆ°èŠ‚ç‚¹æŒ‚äº†çš„æƒ…å†µè¿æ¥ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°å¯ç”¨èŠ‚ç‚¹ä¸­")]),s._v(" "),e("li",[s._v("åˆ†ç‰‡ä¹Ÿæ˜¯æœ‰å¼Šç«¯çš„, æ¯”å¦‚è¦åšä¸€ä¸ªå–äº¤/å·®é›†: å¦‚æœä¸€ä¸ª KEY åœ¨åˆ†ç‰‡ 1 ä¸€ä¸ª KEY åœ¨åˆ†ç‰‡ 2 è¿™ä¸ªæ—¶å€™æ˜¯ä¸æ”¯æŒåšçš„,éœ€è¦ç”¨åˆ° TAG æ ‡ç­¾ä½¿ key éƒ½è½åœ¨ä¸€ä¸ªåˆ†ç‰‡ä¸­ ä¾‹: USER:INFO:I ä¸­çš„ "),e("code",[s._v("USER:INFO")]),s._v("å°±æ˜¯ TAG")])]),s._v(" "),e("h3",{attrs:{id:"_3-1-æŠ•ç¥¨æœºåˆ¶"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-æŠ•ç¥¨æœºåˆ¶"}},[s._v("#")]),s._v(" 3.1. æŠ•ç¥¨æœºåˆ¶")]),s._v(" "),e("ol",[e("li",[s._v("å½“ä¸€ä¸ªèŠ‚ç‚¹é€šä¿¡è¶…æ—¶"),e("code",[s._v("cluster-node-timeout")]),s._v("å,ä¼šæœ‰ä¸€ä¸ª master èŠ‚ç‚¹å‘èµ·å¹¿æ’­æŠ•ç¥¨")]),s._v(" "),e("li",[s._v("è¶…è¿‡åŠæ•°åŠè¯¶å•è®¤åŒè¿™ä¸ªèŠ‚ç‚¹æŒ‚è°ƒä¹‹åå³æ•´ä¸ªé›†ç¾¤è®¤å®šè¿™ä¸ªæœºå™¨æŒ‚äº†(èŠ‚ç‚¹ä¸‹çº¿,ä»èŠ‚ç‚¹é¡¶ä¸Š)")]),s._v(" "),e("li",[s._v("å½“æ•´ä¸ªé›†ç¾¤åŠæ•°ä»¥ä¸ŠèŠ‚ç‚¹æŒ‚æ‰åæ•´ä¸ªé›†ç¾¤ä¸å¯ç”¨")])]),s._v(" "),e("h2",{attrs:{id:"_5-redis-åŠŸèƒ½æ¡ˆä¾‹"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-redis-åŠŸèƒ½æ¡ˆä¾‹"}},[s._v("#")]),s._v(" 5. Redis åŠŸèƒ½æ¡ˆä¾‹")]),s._v(" "),e("h3",{attrs:{id:"_4-çŸ­ä¿¡éªŒè¯ç "}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-çŸ­ä¿¡éªŒè¯ç "}},[s._v("#")]),s._v(" 4. çŸ­ä¿¡éªŒè¯ç ")]),s._v(" "),e("p",[e("em",[s._v("å‡†å¤‡ä¸¤ä¸ª Key:")]),s._v(" è¿‡æœŸæ—¶é—´ 2 åˆ†é’Ÿ")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("å‘é€æ¬¡æ•° KEY:"),e("code",[s._v("VERIFY:PASSWORD_MODIFY:132XXXXX:COUNT")])])]),s._v(" "),e("li",[e("p",[s._v("éªŒè¯ç  KEY:"),e("code",[s._v("VERIFY:PASSWORD_MODIFY:132XXXXX:CODE")])]),s._v(" "),e("p",[s._v("1.ç”¨æˆ·è¯·æ±‚å‘é€éªŒè¯ç æ—¶å…ˆæŸ¥ Redis åˆ¤æ–­å‘é€æ¬¡æ•°æœ‰æ²¡æœ‰åˆ°è¾¾é™åˆ¶,åˆ°è¾¾äº†æ¬¡æ•°é™åˆ¶å°±æ‹’ç» 2.æ²¡æœ‰åˆ°è¾¾é™åˆ¶å°±ç”ŸæˆéªŒè¯ç ä¿å­˜åˆ° Redis 3.åˆ¤æ–­ç”¨æˆ·è¾“å…¥çš„å€¼,å¦‚æœåŒ¹é…å°± åˆ é™¤"),e("code",[s._v("å‘é€æ¬¡æ•°KEY")]),s._v("å’Œ"),e("code",[s._v("éªŒè¯ç KEY")])])])])])}),[],!1,null,null,null);t.default=r.exports}}]);