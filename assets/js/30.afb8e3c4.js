(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{466:function(e,_,t){"use strict";t.r(_);var v=t(34),r=Object(v.a)({},(function(){var e=this,_=e.$createElement,t=e._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"_1-ä¸ºä»€ä¹ˆè¦ç”¨-mq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-ä¸ºä»€ä¹ˆè¦ç”¨-mq"}},[e._v("#")]),e._v(" 1. ä¸ºä»€ä¹ˆè¦ç”¨ MQ")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("å¼‚æ­¥é€šä¿¡")]),e._v(" - æå‡ç³»ç»Ÿçš„ç›¸åº”é€Ÿåº¦")]),e._v(" "),t("li",[t("code",[e._v("ç³»ç»Ÿè§£è€¦")])]),e._v(" "),t("li",[t("code",[e._v("æµé‡å‰Šå³°")]),e._v(" - åˆ©ç”¨å…ˆè¿›å…ˆå‡ºç‰¹æ€§")]),e._v(" "),t("li",[t("code",[e._v("åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ")]),e._v(" - å¯é æ¶ˆæ¯æŠ•é€’")])]),e._v(" "),t("h2",{attrs:{id:"_2-ä½¿ç”¨-mq-ä¼šå¸¦æ¥çš„é—®é¢˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-ä½¿ç”¨-mq-ä¼šå¸¦æ¥çš„é—®é¢˜"}},[e._v("#")]),e._v(" 2. ä½¿ç”¨ MQ ä¼šå¸¦æ¥çš„é—®é¢˜")]),e._v(" "),t("ul",[t("li",[e._v("æä¾›äº†ç³»ç»Ÿçš„å¤æ‚æ€§(å¤šåŠ äº†ä¸€ä¸ª MQ æœåŠ¡å™¨)")]),e._v(" "),t("li",[e._v("æ•°æ®ä¸€è‡´æ€§é—®é¢˜")])]),e._v(" "),t("h2",{attrs:{id:"_3-å„å¤§å‚å•†çš„-mq-å¯¹æ¯”"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-å„å¤§å‚å•†çš„-mq-å¯¹æ¯”"}},[e._v("#")]),e._v(" 3. å„å¤§å‚å•†çš„ MQ å¯¹æ¯”")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"center"}}),e._v(" "),t("th",{staticStyle:{"text-align":"center"}},[e._v("Active MQ")]),e._v(" "),t("th",{staticStyle:{"text-align":"center"}},[e._v("RabbitMQ")]),e._v(" "),t("th",{staticStyle:{"text-align":"center"}},[e._v("Rocket MQ")]),e._v(" "),t("th",{staticStyle:{"text-align":"center"}},[e._v("kafka")])])]),e._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"center"}},[e._v("å¼€å‘è¯­è¨€")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("java")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("erlang")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("java")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("scala")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[e._v("å•æ®ååé‡")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("ä¸‡çº§")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("ä¸‡çº§")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("10w çº§")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("10W çº§")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[e._v("æ—¶æ•ˆæ€§")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("ms çº§")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("us çº§")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("ms çº§")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("ms çº§ä»¥å†…")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[e._v("é«˜å¯ç”¨")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("é«˜(ä¸»ä»æ¶æ„)")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("é«˜(ä¸»ä»æ¶æ„)")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("éå¸¸é«˜(åˆ†å¸ƒå¼æ¶æ„)")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("éå¸¸é«˜(åˆ†å¸ƒå¼æ¶æ„)")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[e._v("åŠŸèƒ½ç‰¹æ€§")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("æ–‡æ¡£å¥½,å„ç§åè®®æ”¯æŒè¾ƒå¥½")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("å¹¶å‘èƒ½åŠ›å¾ˆå¼º,å»¶æ—¶ä½,æœ‰ç®¡ç†ç•Œé¢")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("MQ åŠŸèƒ½å®Œå¤‡,æ€§èƒ½æå¥½,å»¶æ—¶ä½,æœ‰ç®¡ç†ç•Œé¢")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("ä¸ºå¤§æ•°æ®å‡†å¤‡çš„,åœ¨å¤§æ•°æ®é¢†åŸŸåº”ç”¨å¹¿")])])])]),e._v(" "),t("h2",{attrs:{id:"_4-rocketmq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-rocketmq"}},[e._v("#")]),e._v(" 4. RocketMQ")]),e._v(" "),t("blockquote",[t("p",[e._v("é˜¿é‡Œå·´å·´å¼€æºçš„äº§å“,2017 å¹´ç§»äº¤ç»™ Apache ç»´æŠ¤\nç»å†è¿‡åŒåä¸€çš„è€ƒéªŒ,æ€§èƒ½æ–¹é¢åº”è¯¥æ˜¯æ²¡å•¥é—®é¢˜ "),t("code",[e._v("æ”¯æŒé›†ç¾¤,æŒä¹…åŒ–,äº‹åŠ¡æ¶ˆæ¯")]),e._v("\nRocketMQ é»˜è®¤é‡‡ç”¨é•¿è½®è¯¢çš„æ‹‰æ¨¡å¼ï¼Œ å•æœºæ”¯æŒåƒä¸‡çº§åˆ«çš„æ¶ˆæ¯å †ç§¯ï¼Œå¯ä»¥éå¸¸å¥½çš„åº”ç”¨åœ¨æµ·é‡æ¶ˆæ¯ç³»ç»Ÿä¸­\n"),t("strong",[e._v("ç‰¹æ€§:")])])]),e._v(" "),t("ul",[t("li",[t("p",[e._v("java ç¼–å†™")])]),e._v(" "),t("li",[t("p",[e._v("æ”¯æŒé›†ç¾¤")])]),e._v(" "),t("li",[t("p",[e._v("æŒä¹…åŒ– (é›¶æ‹·è´/ç£ç›˜é¡ºåºå­˜å‚¨.éšæœºè¯»/é¡µç¼“å­˜)")])]),e._v(" "),t("li",[t("p",[e._v("äº‹åŠ¡æ¶ˆæ¯")])]),e._v(" "),t("li",[t("p",[e._v("NameServer (ç›¸å½“äºæ³¨å†Œä¸­å¿ƒ)")])]),e._v(" "),t("li",[t("p",[e._v("Netty nio é€šä¿¡")])]),e._v(" "),t("li",[t("p",[e._v("å¯åŠ¨ç«¯å£ 9876")])]),e._v(" "),t("li",[t("p",[e._v("é»˜è®¤å¯åŠ¨ borker å ç”¨ 8G (éœ€ä¿®æ”¹å¯åŠ¨è„šæœ¬)")])]),e._v(" "),t("li",[t("p",[e._v("é»˜è®¤å¯åŠ¨ NameServer å ç”¨ 4G (éœ€ä¿®æ”¹å¯åŠ¨è„šæœ¬)")])])]),e._v(" "),t("h2",{attrs:{id:"_5-é›†ç¾¤æ¶æ„"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-é›†ç¾¤æ¶æ„"}},[e._v("#")]),e._v(" 5. é›†ç¾¤æ¶æ„")]),e._v(" "),t("p",[t("img",{attrs:{src:"http://md.yike.link/20200325213651_pwXank_Screenshot.jpeg",alt:"é›†ç¾¤æ¶æ„å›¾"}})]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("NameServer:")]),e._v(" èµ·åˆ°æ§åˆ¶ä¸­å¿ƒ,æ³¨å†Œä¸­å¿ƒä½œç”¨")]),e._v(" "),t("li",[t("strong",[e._v("Broker:")]),e._v(" ä¸»è¦åšæ¶ˆæ¯å¤„ç†(æ¶ˆæ¯å­˜å‚¨/äº‹åŠ¡æ¶ˆæ¯å›ä¼ )")]),e._v(" "),t("li",[t("strong",[e._v("Consumer:")]),e._v(" æ¶ˆè´¹è€…ä» NameServer ä¸­è·å– Broker ä¿¡æ¯å»ºç«‹è¿æ¥")]),e._v(" "),t("li",[t("strong",[e._v("Producer:")]),e._v(" ç”Ÿäº§è€…")])]),e._v(" "),t("h3",{attrs:{id:"_5-1-nameserverğŸ’¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-nameserverğŸ’¥"}},[e._v("#")]),e._v(" 5.1. NameServerğŸ’¥")]),e._v(" "),t("p",[e._v("NameServer æ˜¯æ— çŠ¶æ€çš„,NameServer ä¹‹é—´ä¸ä¼šè¿›è¡Œæ•°æ®åŒæ­¥"),t("br"),e._v("\nåœ¨ Broker å¯åŠ¨çš„æ—¶å€™ä¼šå°†ä¿¡æ¯ä¸ŠæŠ¥åˆ°æ‰€æœ‰çš„ NameServer ä¸­"),t("br"),e._v("\nå¦‚æœæ–°åŠ å…¥äº†ä¸€ä¸ª NameServer Broker åˆ™ä¼šå§ä¿¡æ¯å†ä¸ŠæŠ¥ä¸€éç»™è¿™ä¸ªæ–°åŠ å…¥çš„")]),e._v(" "),t("blockquote",[t("p",[e._v("NameServer å¹¶æ²¡æœ‰æä¾›ç±»ä¼¼ Zookeeper çš„ watcher æœºåˆ¶ï¼Œ è€Œæ˜¯é‡‡ç”¨äº†æ¯ 30s å¿ƒè·³æœºåˆ¶ã€‚")])]),e._v(" "),t("h4",{attrs:{id:"_5-1-1-nameserver-å¿ƒè·³æœºåˆ¶"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-1-nameserver-å¿ƒè·³æœºåˆ¶"}},[e._v("#")]),e._v(" 5.1.1 NameServer å¿ƒè·³æœºåˆ¶")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("å•ä¸ªbrokerå’Œæ‰€æœ‰NameServerä¿æŒå¿ƒè·³è¯·æ±‚")]),e._v(",é—´éš”"),t("code",[e._v("30s")]),e._v("(å¿ƒè·³ä¿¡æ¯åŒ…å«å½“å‰ Borker çš„æ‰€æœ‰ TOPIC ä¿¡æ¯)")]),e._v(" "),t("li",[t("code",[e._v("nameServerä¼šåæŸ¥Borkerçš„å¿ƒè·³ä¿¡æ¯")]),e._v(",å¦‚æœæŸä¸ª Borker åœ¨"),t("code",[e._v("ä¸¤åˆ†é’Ÿ")]),e._v("å†…æ²¡æœ‰å‘é€å¿ƒè·³,åˆ™è¯¥ broker ä¸‹çº¿,"),t("code",[e._v("è°ƒæ•´Topicå’Œbrokerçš„å…³ç³»")])]),e._v(" "),t("li",[e._v("NameServer å‹åŠ›ä¸ä¼šå¤ªå¤§ï¼Œå¹³æ—¶ä¸»è¦å¼€é”€æ˜¯åœ¨ç»´æŒå¿ƒè·³å’Œæä¾› Topic-Broker çš„å…³ç³»æ•°æ®,ä½†æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼ŒBroker å‘ Namesrv å‘å¿ƒè·³æ—¶ï¼Œ ä¼šå¸¦ä¸Šå½“å‰è‡ªå·±æ‰€è´Ÿè´£çš„æ‰€æœ‰ Topic ä¿¡æ¯ï¼Œ"),t("code",[e._v("å¦‚æœTopicä¸ªæ•°å¤ªå¤šï¼ˆä¸‡çº§åˆ«ï¼‰")]),e._v("ï¼Œä¼šå¯¼è‡´ä¸€æ¬¡å¿ƒè·³ä¸­ï¼Œ"),t("code",[e._v("å°±Topicçš„æ•°æ®å°±å‡ åM")]),e._v("ï¼Œç½‘ç»œæƒ…å†µå·®çš„è¯ï¼Œ ç½‘ç»œä¼ è¾“å¤±è´¥ï¼Œå¿ƒè·³å¤±è´¥ï¼Œå¯¼è‡´ Namesrv è¯¯è®¤ä¸º Broker å¿ƒè·³å¤±è´¥ã€‚")])]),e._v(" "),t("h3",{attrs:{id:"_5-2-broker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-broker"}},[e._v("#")]),e._v(" 5.2. Broker")]),e._v(" "),t("p",[e._v("Borker æ˜¯åˆ†ä¸»("),t("code",[e._v("Master")]),e._v(")å’Œä»("),t("code",[e._v("Slave")]),e._v(")çš„"),t("br"),e._v(" "),t("strong",[e._v("ä¸»èŠ‚ç‚¹:")]),e._v(" ä¸»è¦å¤„ç†å†™æ“ä½œ(ä¸»è¦å¤„ç† producer çš„ä¿¡æ¯)\n"),t("strong",[e._v("ä»èŠ‚ç‚¹:")]),e._v(" ä¸»è¦å¤„ç†è¯»æ“ä½œ(ä¸»è¦å¤„ç† Consumer çš„ä¿¡æ¯)")]),e._v(" "),t("ul",[t("li",[e._v("é€šè¿‡"),t("code",[e._v("BrokerNameå»åŒºåˆ†åŒä¸€ç»„")]),e._v(",ç»„å†…é€šè¿‡ BrokerId åŒºåˆ†ä¸»ä»å…³ç³»("),t("code",[e._v("brokerIdä¸º0ä»£è¡¨ä¸»èŠ‚ç‚¹,é0æ˜¯ä»")]),e._v(")")]),e._v(" "),t("li",[e._v("ä¸€ä¸ªä¸»å¯ä»¥åŒ…å«æœ‰å¤šä¸ªä»èŠ‚ç‚¹,ä¸€ä¸ªä»åªèƒ½å±äºä¸€ä¸ªä¸»")]),e._v(" "),t("li",[e._v("ä¸»ä»ä¹‹é—´æ˜¯éœ€è¦è¿›è¡Œæ•°æ®åŒæ­¥(å¼‚æ­¥/åŒæ­¥)")])]),e._v(" "),t("h4",{attrs:{id:"_5-2-1-topic"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-1-topic"}},[e._v("#")]),e._v(" 5.2.1 TOPIC")]),e._v(" "),t("p",[e._v("Broker ä¸Šå­˜ Topic ä¿¡æ¯ï¼ŒTopic ç”±å¤šä¸ªé˜Ÿåˆ—ç»„æˆï¼Œé˜Ÿåˆ—ä¼šå¹³å‡åˆ†æ•£åœ¨å¤šä¸ª Broker ä¸Šã€‚Producer çš„å‘é€æœºåˆ¶ä¿è¯æ¶ˆæ¯å°½é‡å¹³å‡åˆ†å¸ƒåˆ° æ‰€æœ‰é˜Ÿåˆ—ä¸­ï¼Œæœ€ç»ˆæ•ˆæœå°±æ˜¯æ‰€æœ‰æ¶ˆæ¯éƒ½å¹³å‡è½åœ¨æ¯ä¸ª Broker ä¸Šã€‚")]),e._v(" "),t("ul",[t("li",[e._v("æ¯ä¸ªä¸»é¢˜å¯è®¾ç½®é˜Ÿåˆ—ä¸ªæ•°ï¼Œè‡ªåŠ¨åˆ›å»ºä¸»é¢˜æ—¶"),t("code",[e._v("é»˜è®¤4ä¸ª")])])]),e._v(" "),t("h3",{attrs:{id:"_5-3-producer-consumer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-producer-consumer"}},[e._v("#")]),e._v(" 5.3. Producer / Consumer")]),e._v(" "),t("ul",[t("li",[e._v("Producer/Consumer "),t("code",[e._v("éšæœºå’ŒNameServerä¸­çš„èŠ‚ç‚¹å»ºç«‹ä¸€ä¸ªé•¿è¿æ¥")]),e._v(",å®šæœŸ(30s)ä» NameServer ä¸­è·å– TOPIC è·¯ç”±ä¿¡æ¯")]),e._v(" "),t("li",[e._v("Producer/Consumer"),t("code",[e._v("ä¼šå®šæœŸ(30s)å‘Brokerä¸­çš„MasterèŠ‚ç‚¹å‘é€å¿ƒè·³")]),e._v("(ä¸ºå•¥è¦å‘å¿ƒè·³? å› ä¸ºæ¶ˆæ¯æœ‰ä¸¤ç§æ¨¡å¼ pull/push)")]),e._v(" "),t("li",[e._v("åœ¨å‘é€æ¶ˆæ¯æ—¶é€šè¿‡ TOPIC åˆ¤æ–­æŠ•é€’åˆ°é‚£ä¸ª Broker ä¸­,ç„¶åç›´æ¥æŠ•é€’")]),e._v(" "),t("li",[e._v("Consumer æ—¢å¯ä»¥ä» Master è®¢é˜…æ¶ˆæ¯,ä¹Ÿå¯ä»¥ä» slave è®¢é˜…æ¶ˆæ¯")]),e._v(" "),t("li",[t("code",[e._v("Producer / Consumerå®Œå…¨æ— çŠ¶æ€,å¯é›†ç¾¤éƒ¨ç½²")])]),e._v(" "),t("li",[t("code",[e._v("Brokerä¼šæ¯10sæ‰«æä¸€æ¬¡ Producer / Consumer")]),e._v(",å¦‚æœå‘ç°æŸä¸ª"),t("code",[e._v("Producer / Consumer")]),e._v("2 åˆ†é’Ÿæ²¡æœ‰å‘é€å¿ƒè·³å°±æ–­å¼€")])]),e._v(" "),t("p",[t("strong",[e._v("Producer:")])]),e._v(" "),t("ul",[t("li",[e._v("å¤±è´¥é»˜è®¤é‡è¯• 2 æ¬¡")]),e._v(" "),t("li",[e._v("åœ¨äº‹åŠ¡æ¶ˆæ¯æœºåˆ¶ä¸­ï¼Œå¦‚æœå‘é€æ¶ˆæ¯çš„ producer åœ¨è¿˜æœª commit/rollback å‰"),t("code",[e._v("æŒ‚æ‰äº†")]),e._v("ï¼Œbroker ä¼šåœ¨ä¸€æ®µæ—¶é—´å"),t("code",[e._v("å›æŸ¥")]),e._v("ProducerGroup é‡Œçš„å…¶ä»–å®ä¾‹ï¼Œç¡®è®¤æ¶ˆæ¯åº”è¯¥"),t("code",[e._v("commit/rollback")])])]),e._v(" "),t("h3",{attrs:{id:"_5-4-é›†ç¾¤æ¨¡å¼-1-å•-master-å•æœº"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-é›†ç¾¤æ¨¡å¼-1-å•-master-å•æœº"}},[e._v("#")]),e._v(" 5.4. é›†ç¾¤æ¨¡å¼ 1 - å• Master(å•æœº)")]),e._v(" "),t("p",[e._v("åªå¯åŠ¨ä¸€ä¸ª Mater èŠ‚ç‚¹,ä¸¥æ ¼çš„æ¥è¯´ç®—æ˜¯å•æœºæ¨¡å¼")]),e._v(" "),t("h3",{attrs:{id:"_5-5-é›†ç¾¤æ¨¡å¼-2-å¤š-master"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-é›†ç¾¤æ¨¡å¼-2-å¤š-master"}},[e._v("#")]),e._v(" 5.5. é›†ç¾¤æ¨¡å¼ 2 - å¤š Master")]),e._v(" "),t("p",[e._v("é›†ç¾¤ä¸­æ²¡æœ‰ Slave èŠ‚ç‚¹,éƒ½æ˜¯ Master èŠ‚ç‚¹")]),e._v(" "),t("ul",[t("li",[e._v("è¿™ç§æ–¹å¼é…ç½®ç®€å•,å•ä¸ª Master èŠ‚ç‚¹å®•æœºå¯¹é›†ç¾¤æ— å½±å“")]),e._v(" "),t("li",[e._v("å•èŠ‚ç‚¹å®•æœºæœŸé—´,è¿™å°æœºå™¨æœªè¢«æ¶ˆè´¹çš„æ¶ˆæ¯åœ¨æ¢å¤ä¹‹å‰ä¸å¯è®¢é˜…,ä¼šæœ‰çª—å£æœŸ")])]),e._v(" "),t("h3",{attrs:{id:"_5-6-é›†ç¾¤æ¨¡å¼-3-å¤š-master-å¤š-slave-å¼‚æ­¥-ğŸ’¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-6-é›†ç¾¤æ¨¡å¼-3-å¤š-master-å¤š-slave-å¼‚æ­¥-ğŸ’¥"}},[e._v("#")]),e._v(" 5.6. é›†ç¾¤æ¨¡å¼ 3 - å¤š Master å¤š Slave(å¼‚æ­¥)ğŸ’¥")]),e._v(" "),t("p",[e._v("HA é‡‡ç”¨å¼‚æ­¥çš„æ–¹å¼è¿›è¡ŒåŒ,ä¼šæœ‰æ¶ˆæ¯å»¶æ—¶(æ¯«ç§’çº§)\n"),t("code",[e._v("å½“ä¸»æ”¶åˆ°æ¶ˆæ¯åç›´æ¥è¿”å›æ¶ˆæ¯ç»™ç”Ÿäº§è€…,ç„¶åè¿›è¡Œè½åº“ä»åŒæ­¥")])]),e._v(" "),t("ul",[t("li",[e._v("ä¼˜ç‚¹:å¯ç”¨æ€§é«˜")]),e._v(" "),t("li",[e._v("ç¼ºç‚¹:ä¸»å®•æœºçš„è¯ ä¼šæœ‰æ¯«ç§’çº§çš„æ¶ˆæ¯ä¸¢å¤±,ä¸»å®•æœºæ¶ˆè´¹è€…ä¾æ—§å¯ä»¥ä»ä»èŠ‚ç‚¹è·å–æ¶ˆæ¯")])]),e._v(" "),t("h3",{attrs:{id:"_5-7-é›†ç¾¤æ¨¡å¼-3-å¤š-master-å¤š-slave-åŒæ­¥-ğŸ’¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-7-é›†ç¾¤æ¨¡å¼-3-å¤š-master-å¤š-slave-åŒæ­¥-ğŸ’¥"}},[e._v("#")]),e._v(" 5.7. é›†ç¾¤æ¨¡å¼ 3 - å¤š Master å¤š Slave(åŒæ­¥)ğŸ’¥")]),e._v(" "),t("p",[t("code",[e._v("å½“ä¸»æ”¶åˆ°æ¶ˆæ¯åè¿›è¡Œè½åº“,ä»åŒæ­¥ ,ç„¶åè¿”å›æ¶ˆæ¯ç»™ç”Ÿäº§è€…")])]),e._v(" "),t("ul",[t("li",[e._v("ä¼˜ç‚¹:å¯ç”¨æ€§é«˜")]),e._v(" "),t("li",[e._v("ç¼ºç‚¹:\n"),t("ul",[t("li",[e._v("æ€§èƒ½æ¯”å¼‚æ­¥ä½ 10%å·¦å³")]),e._v(" "),t("li",[e._v("ä¸»å®•æœºåä»æ— æ³•è‡ªåŠ¨å‡çº§ä¸ºä¸»(ç›®å‰ç‰ˆæœ¬ä¸æ”¯æŒ)")]),e._v(" "),t("li",[e._v("åŒæ­¥å¤åˆ¶ä¼šå¢å¤§ç³»ç»Ÿå»¶æ—¶é™ä½ç³»ç»Ÿååé‡")])])])]),e._v(" "),t("h2",{attrs:{id:"_6-rocketmq-java-å®¢æˆ·ç«¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-rocketmq-java-å®¢æˆ·ç«¯"}},[e._v("#")]),e._v(" 6. RocketMQ Java å®¢æˆ·ç«¯")]),e._v(" "),t("ul",[t("li",[e._v("å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯æœ‰è´Ÿè½½å‡è¡¡")]),e._v(" "),t("li",[e._v("å®¢æˆ·ç«¯å†…å­˜ä¸­ä¿å­˜ç€å½“å‰æ‰€æœ‰çš„æœåŠ¡å™¨åˆ—è¡¨ï¼Œæ¯æ¬¡å‘é€éƒ½åˆ‡æ¢ä¸€å°æœåŠ¡å™¨å‘é€æ¶ˆæ¯ï¼Œä½¿å¾—æ¯å°æœåŠ¡å™¨æ¥æ”¶çš„æ¶ˆæ¯é‡å°½é‡å‡è¡¡ï¼Œé¿å…çƒ­ç‚¹é—®é¢˜ã€‚")]),e._v(" "),t("li",[e._v("æ¶ˆè´¹è€…ç«¯è´Ÿè½½å‡è¡¡é›†ç¾¤æ¶ˆè´¹æ¨¡å¼ä¸‹ï¼Œå¹³å‡æ¶ˆè´¹è¯¥ Topic çš„æ‰€æœ‰é˜Ÿåˆ—ã€‚å¯ä»¥é€šè¿‡å‚æ•°è°ƒæ•´æ¶ˆè´¹æ¨¡å¼")])]),e._v(" "),t("h3",{attrs:{id:"_6-1-å‘é€æ¶ˆæ¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-å‘é€æ¶ˆæ¯"}},[e._v("#")]),e._v(" 6.1. å‘é€æ¶ˆæ¯")]),e._v(" "),t("h3",{attrs:{id:"_6-2-å‘é€æµç¨‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-å‘é€æµç¨‹"}},[e._v("#")]),e._v(" 6.2. å‘é€æµç¨‹")]),e._v(" "),t("ul",[t("li",[e._v("åˆ›å»º producer,æŒ‡å®šç”Ÿäº§è€…ç»„å")]),e._v(" "),t("li",[e._v("æŒ‡å®š nameServer")]),e._v(" "),t("li",[e._v("å¯åŠ¨ producer")]),e._v(" "),t("li",[e._v("åˆ›å»ºæ¶ˆæ¯å¯¹è±¡,æŒ‡å®šä¸»é¢˜ TOPIC,TAG å’Œæ¶ˆæ¯ä½“")]),e._v(" "),t("li",[e._v("å‘é€æ¶ˆæ¯")]),e._v(" "),t("li",[e._v("å…³é—­ç”Ÿäº§è€… producer")])]),e._v(" "),t("h3",{attrs:{id:"_6-3-å‘é€åŒæ­¥æ¶ˆæ¯-å¯é æ€§é«˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-å‘é€åŒæ­¥æ¶ˆæ¯-å¯é æ€§é«˜"}},[e._v("#")]),e._v(" 6.3. å‘é€åŒæ­¥æ¶ˆæ¯ (å¯é æ€§é«˜)")]),e._v(" "),t("p",[t("code",[e._v("producer.sedmag(msg)")])]),e._v(" "),t("p",[e._v("å‘é€åŒæ­¥æ¶ˆæ¯å¯é æ€§æ¯”è¾ƒé«˜,å‘é€æ¶ˆæ¯åä¸€å®šæ˜¯å¯ä»¥è·å¾—ä¸€ä¸ªç»“æœçš„")]),e._v(" "),t("p",[t("code",[e._v("æ¶ˆæ¯å‘æˆåŠŸä¹‹åå¯ä»¥è·å¾—ä¸€ä¸ªæ¶ˆæ¯ID")])]),e._v(" "),t("h3",{attrs:{id:"_6-4-å‘é€å¼‚æ­¥æ¶ˆæ¯-å¯é æ€§ä½"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-å‘é€å¼‚æ­¥æ¶ˆæ¯-å¯é æ€§ä½"}},[e._v("#")]),e._v(" 6.4. å‘é€å¼‚æ­¥æ¶ˆæ¯ (å¯é æ€§ä½)")]),e._v(" "),t("p",[t("code",[e._v("producer.sedmag(msg)")])]),e._v(" "),t("p",[e._v("ç›¸æ¯”è¾ƒåŒæ­¥æ¶ˆæ¯,å‘é€å®Œæ¶ˆæ¯åä¸ä¼šç­‰ç­‰ MQ ç›¸åº”æ¶ˆæ¯å‘é€ç»“æœ\nå¦‚æœæƒ³è¦è·å–æ¶ˆæ¯è¿”å›ç»“æœå¯ä»¥é€šè¿‡"),t("code",[e._v("SendCallback")]),e._v("å›è°ƒå‡½æ•°è·å–")]),e._v(" "),t("h3",{attrs:{id:"_6-5-å‘é€å•å‘æ¶ˆæ¯-neway"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-5-å‘é€å•å‘æ¶ˆæ¯-neway"}},[e._v("#")]),e._v(" 6.5. å‘é€å•å‘æ¶ˆæ¯ neway")]),e._v(" "),t("p",[t("code",[e._v("producer.sendoneway(msg)")]),e._v("\nè¿™ç§æ¶ˆæ¯æ²¡æœ‰è¿”å›å€¼")]),e._v(" "),t("h3",{attrs:{id:"_6-6-æ¶ˆæ¯æ¶ˆè´¹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-6-æ¶ˆæ¯æ¶ˆè´¹"}},[e._v("#")]),e._v(" 6.6. æ¶ˆæ¯æ¶ˆè´¹")]),e._v(" "),t("blockquote",[t("p",[e._v("RocketMQ é»˜è®¤é‡‡ç”¨é•¿è½®è¯¢çš„æ‹‰æ¨¡å¼")])]),e._v(" "),t("h3",{attrs:{id:"_6-7-æ¶ˆè´¹æµç¨‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-7-æ¶ˆè´¹æµç¨‹"}},[e._v("#")]),e._v(" 6.7. æ¶ˆè´¹æµç¨‹")]),e._v(" "),t("ul",[t("li",[e._v("åˆ›å»º consumer,æŒ‡å®šæ¶ˆè´¹ç»„å")]),e._v(" "),t("li",[e._v("æŒ‡å®š nameServer")]),e._v(" "),t("li",[e._v("è®¢é˜…ä¸»é¢˜ TOPIC,TAG")]),e._v(" "),t("li",[e._v("è®¾ç½®å›è°ƒå‡½æ•° å¤„ç†æ¶ˆæ¯")]),e._v(" "),t("li",[e._v("å¯åŠ¨æ¶ˆè´¹è€… consumer")])]),e._v(" "),t("h3",{attrs:{id:"_6-8-ä¸¤ç§æ¶ˆè´¹æ¨¡å¼"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-8-ä¸¤ç§æ¶ˆè´¹æ¨¡å¼"}},[e._v("#")]),e._v(" 6.8. ä¸¤ç§æ¶ˆè´¹æ¨¡å¼")]),e._v(" "),t("blockquote",[t("p",[e._v("é€šè¿‡ "),t("code",[e._v("comsumer.setMessageModel(MessageModel.CLUSTERING);")]),e._v("è®¾ç½®"),t("br"),e._v(" "),t("code",[e._v("MessageModel.BROADCASTING")]),e._v(" å¹¿æ’­ ä¸€æ¡æ¶ˆæ¯ä¼šè¢« ConsumerGroup é‡Œçš„æ‰€æœ‰å®ä¾‹æ¶ˆè´¹ã€‚"),t("br"),e._v(" "),t("code",[e._v("MessageModel.CLUSTERING")]),e._v(" å‡è¡¡(é»˜è®¤æ¨¡å¼) ,ä¸€æ¡æ¶ˆæ¯åªä¼šè¢« ConsumerGroup é‡Œçš„ä¸€ä¸ªå®ä¾‹æ¶ˆè´¹,ä½†å¯ä»¥è¢«å¤šä¸ªä¸åŒçš„ ConsumerGroup æ¶ˆè´¹")])]),e._v(" "),t("h3",{attrs:{id:"_6-9-æ¶ˆè´¹è€…æ‹‰å–çš„æ–¹å¼-pull-push"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-9-æ¶ˆè´¹è€…æ‹‰å–çš„æ–¹å¼-pull-push"}},[e._v("#")]),e._v(" 6.9. æ¶ˆè´¹è€…æ‹‰å–çš„æ–¹å¼ (PULL/PUSH)")]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("PULL æ‹‰å–")]),e._v(": å®šæ—¶å‘ Broker å‘å‘é€è¯·æ±‚è·å–æ•°æ® "),t("code",[e._v("DefaultMQPullConsumer")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("å¯ä»¥æœ‰æ•ˆçš„é¿å…ç»™Brokeré€ æˆå·¨å¤§çš„å‹åŠ›")])]),e._v(" "),t("li",[e._v("éœ€è¦ç”¨æˆ·è‡ªå·±å¤„ç†éå† MessageQueueã€ä¿å­˜ Offset,æ‰€ä»¥ PullConsumer æœ‰æ›´å¤šçš„è‡ªä¸»æ€§å’Œçµæ´»æ€§ã€‚")])])]),e._v(" "),t("li",[t("strong",[e._v("PUSH æ¨é€")]),e._v(": æ¶ˆè´¹è€…å’Œ Broker å»ºç«‹ä¸€ä¸ªé•¿è¿æ¥çŠ¶æ€ "),t("code",[e._v("DefaultMQPushConsumer")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("pushä¹Ÿæ˜¯ç”¨pullå®ç°çš„,é‡‡ç”¨çš„æ˜¯é•¿è½®è¯¢æ–¹å¼")]),e._v(" broker æ¯ 5 ç§’é’Ÿæ£€æµ‹ä¸€æ¬¡æ˜¯å¦æœ‰æ¶ˆæ¯,æœ‰æ¶ˆæ¯å°±ä¼ ç»™ä½ ")]),e._v(" "),t("li",[e._v("push æ¨¡å¼åœ¨æ”¶åˆ°æ¶ˆæ¯è¯·æ±‚å,å¦‚æœé˜Ÿåˆ—é‡Œæ²¡æœ‰æ¶ˆæ¯å¹¶ä¸æ€¥äºè¿”å›,åœ¨ç»è¿‡ä¸‰è½®çš„æ£€æŸ¥åæ‰ä¼šè¿›è¡Œè¿”å›"),t("code",[e._v("(æ¯è½®5s)")])]),e._v(" "),t("li",[t("code",[e._v("é•¿è½®è¯¢")]),e._v("çš„ä¸»åŠ¨æƒè¿˜æ˜¯æŒæ¡åœ¨ Consumer æ‰‹ä¸­,Broker å³ä½¿æœ‰å¤§é‡æ¶ˆæ¯ç§¯å‹ï¼Œä¹Ÿä¸ä¼šä¸»åŠ¨æ¨é€ç»™ Consumer")])])])]),e._v(" "),t("h3",{attrs:{id:"_6-10-å¹¿æ’­æ¨¡å¼"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-10-å¹¿æ’­æ¨¡å¼"}},[e._v("#")]),e._v(" 6.10. å¹¿æ’­æ¨¡å¼")]),e._v(" "),t("p",[t("img",{attrs:{src:"http://md.yike.link/20200325213706_7rUKkV_Screenshot.jpeg",alt:"å¹¿æ’­æ¨¡å¼"}})]),e._v(" "),t("h3",{attrs:{id:"_6-11-å‡è¡¡åˆ†å‘æ¨¡å¼-é»˜è®¤çš„"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-11-å‡è¡¡åˆ†å‘æ¨¡å¼-é»˜è®¤çš„"}},[e._v("#")]),e._v(" 6.11. å‡è¡¡åˆ†å‘æ¨¡å¼ (é»˜è®¤çš„)")]),e._v(" "),t("p",[t("img",{attrs:{src:"http://md.yike.link/20200325213720_lJusDj_Screenshot.jpeg",alt:"å‡è¡¡åˆ†å‘"}})]),e._v(" "),t("h3",{attrs:{id:"_6-12-å¹¶è¡Œæ¶ˆè´¹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-12-å¹¶è¡Œæ¶ˆè´¹"}},[e._v("#")]),e._v(" 6.12. å¹¶è¡Œæ¶ˆè´¹")]),e._v(" "),t("p",[e._v("Java å®¢æˆ·ç«¯ä¸­æ¶ˆæ¯ç›‘å¬çš„"),t("code",[e._v("MessageListenerConcurrently()")]),e._v("ç±»æ˜¯å¹¶è¡Œæ¶ˆè´¹")]),e._v(" "),t("h3",{attrs:{id:"_6-13-é¡ºåºæ¶ˆè´¹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-13-é¡ºåºæ¶ˆè´¹"}},[e._v("#")]),e._v(" 6.13. é¡ºåºæ¶ˆè´¹")]),e._v(" "),t("p",[e._v("Java å®¢æˆ·ç«¯ä¸­æ¶ˆæ¯ç›‘å¬çš„ "),t("code",[e._v("MessageListenerOrderly()")]),e._v("ç±»æ˜¯é¡ºåºæ¶ˆè´¹")]),e._v(" "),t("h3",{attrs:{id:"_6-14-rocketmq-é¡ºåºæ¶ˆæ¯-ğŸ”¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-14-rocketmq-é¡ºåºæ¶ˆæ¯-ğŸ”¥"}},[e._v("#")]),e._v(" 6.14. RocketMQ é¡ºåºæ¶ˆæ¯ ğŸ”¥")]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("å…¨å±€æ¶ˆæ¯é¡ºåº:")]),e._v(" (æ²¡æœ‰å¿…è¦)broker ä¸­æ‰€æœ‰é˜Ÿåˆ—è¦æ±‚æŒ‰é¡ºåºæ¶ˆè´¹")]),e._v(" "),t("li",[t("strong",[e._v("å±€éƒ¨æ¶ˆæ¯é¡ºåº:")]),e._v(" ğŸ˜ˆ åªè¦ä¿è¯æŸä¸€ä¸ªé˜Ÿåˆ—æŒ‰é¡ºåºæ¶ˆè´¹")])]),e._v(" "),t("p",[t("strong",[e._v("å¦‚ä½•ä¿è¯å±€éƒ¨æ¶ˆæ¯é¡ºåºå‘¢?")])]),e._v(" "),t("p",[t("code",[e._v("ç®€å•çš„ç†è§£å°±æ˜¯åŒä¸€ä¸ªä¸šåŠ¡çš„æ¶ˆæ¯å‘åˆ°åŒä¸€ä¸ªé˜Ÿåˆ—å°±è¡Œ")])]),e._v(" "),t("p",[t("strong",[e._v("é¡ºåºæ¶ˆæ¯å‘é€:")])]),e._v(" "),t("blockquote",[t("p",[e._v("Rocket é»˜è®¤æ˜¯éšæœºå‘é€æ¶ˆæ¯åˆ°é˜Ÿåˆ—ä¸­")])]),e._v(" "),t("p",[t("strong",[e._v("å¦‚æœè¦å®ç°é¡ºåºæ¶ˆæ¯é‚£ä¹ˆåªèƒ½æŒ‡å®šå‘é€åˆ°æŒ‡å®šçš„ä¸€ä¸ªé˜Ÿåˆ—ä¸­")]),e._v(",åœ¨ send æ–¹æ³•ä¸­ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ MessageQueueSelector ä¸­æŒ‡å®šé˜Ÿåˆ—ä¸‹æ ‡")]),e._v(" "),t("p",[t("strong",[e._v("é¡ºåºæ¶ˆæ¯æ¥æ”¶:")])]),e._v(" "),t("p",[e._v("å®¢æˆ·ç«¯ä¼šæ ¹æ®æ¯ä¸€ä¸ªé˜Ÿåˆ—å¼€å¯ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œæ¶ˆè´¹,å½“æ¶ˆæ¯éƒ½åœ¨ä¸€ä¸ªé˜Ÿåˆ—çš„æ—¶å€™å°±ä¼šåœ¨çº¿ç¨‹ä¸­é¡ºåºæ¶ˆè´¹")]),e._v(" "),t("h3",{attrs:{id:"_6-15-rocketmq-å»¶æ—¶æ¶ˆæ¯-ğŸ”¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-15-rocketmq-å»¶æ—¶æ¶ˆæ¯-ğŸ”¥"}},[e._v("#")]),e._v(" 6.15. RocketMQ å»¶æ—¶æ¶ˆæ¯ ğŸ”¥")]),e._v(" "),t("p",[e._v("åœ¨ RocketMQ ä¸­å»¶æ—¶çš„æ—¶é—´å·²ç»è§„å®šå¥½äº†ä¸€äº›æšä¸¾,"),t("code",[e._v("ä¸èƒ½è‡ªå®šä¹‰æ—¶é—´")]),e._v(" "),t("code",[e._v('messageDelayLevel = "1s 5s 10s 30s 1m 2m 3m 4m 5m 6m 7m 8m 9m 10m 20m 30m 1h 2h"')]),e._v("\nå»¶æ—¶æ¶ˆæ¯ä¼šç›´æ¥å‘é€åˆ°é˜Ÿåˆ—ä¸­,è¿‡ä¸€æ®µæ—¶é—´åä¼šè¢«æ¶ˆè´¹")]),e._v(" "),t("h3",{attrs:{id:"_6-16-rocketmq-å¤±è´¥é‡è¯•-å¤„ç†ç­–ç•¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-16-rocketmq-å¤±è´¥é‡è¯•-å¤„ç†ç­–ç•¥"}},[e._v("#")]),e._v(" 6.16. RocketMQ å¤±è´¥é‡è¯• å¤„ç†ç­–ç•¥")]),e._v(" "),t("blockquote",[t("p",[e._v("æ¶ˆæ¯é‡è¯•ä¼šé€ æˆæ¶ˆæ¯çš„å †ç§¯")])]),e._v(" "),t("p",[e._v("é»˜è®¤æƒ…å†µä¸‹è¡°å‡é‡è¯•æ˜¯ 16 æ¬¡("),t("code",[e._v('å’Œå»¶æ—¶é˜Ÿåˆ—çš„æ—¶é—´ä¸€ä¸ªæ—¶é—´ messageDelayLevel = "1s 5s 10s 30s 1m 2m 3m 4m 5m 6m 7m 8m 9m 10m 20m 30m 1h 2h')]),e._v("),å»¶è¿Ÿç­‰çº§ä¸º 3~18ã€‚\nåå…­æ¬¡ä¹‹åè¿˜æ˜¯å¤±è´¥å°±ä¼šå°†æ¶ˆæ¯ä¸¢è¯¥æ­»ä¿¡é˜Ÿåˆ—(DLQ)")]),e._v(" "),t("p",[t("strong",[e._v("å¤„ç†å¤±è´¥æ¶ˆæ¯å¯ä»¥è€ƒè™‘:")])]),e._v(" "),t("p",[e._v("å¯ä»¥åˆ¤æ–­å…¶è¡°å‡æ¬¡æ•°ç„¶åå®ä¾‹åŒ–åˆ°è¡¨ä¸­,è¿›è¡Œç›¸åº”åç»­é€»è¾‘")]),e._v(" "),t("h2",{attrs:{id:"_7-rocketmq-æ­»ä¿¡é˜Ÿåˆ—-dlq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-rocketmq-æ­»ä¿¡é˜Ÿåˆ—-dlq"}},[e._v("#")]),e._v(" 7. RocketMQ æ­»ä¿¡é˜Ÿåˆ—(DLQ)")]),e._v(" "),t("p",[t("code",[e._v("Dead-Letter-Message")]),e._v(" æ­»ä¿¡é˜Ÿåˆ—æ˜¯ MQ ä¸­çš„ä¸€ä¸ªé€šç”¨è®¾è®¡")]),e._v(" "),t("p",[t("code",[e._v("å½“æ¶ˆæ¯æ¶ˆè´¹å¤±è´¥(é‡è¯•åˆ°è¾¾æœ€å¤§æ¬¡æ•°),å°±ä¼šå§æ¶ˆæ¯ä¸¢åˆ°æ­»ä¿¡é˜Ÿåˆ—ä¸­")])]),e._v(" "),t("p",[e._v("æ­»ä¿¡é˜Ÿåˆ—çš„ä¿å­˜æœŸé™æ˜¯ä¸‰å¤©,ä¸‰å¤©åè‡ªåŠ¨åˆ é™¤")]),e._v(" "),t("h2",{attrs:{id:"_8-rocketmq-æ‰¹é‡æ¶ˆæ¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-rocketmq-æ‰¹é‡æ¶ˆæ¯"}},[e._v("#")]),e._v(" 8. RocketMQ æ‰¹é‡æ¶ˆæ¯")]),e._v(" "),t("p",[e._v("æ‰¹é‡æ¶ˆæ¯ä¸­,ä¸€æ¬¡å‘é€å»ºè®®ä¸è¦è¶…è¿‡ 4M")]),e._v(" "),t("h2",{attrs:{id:"_9-rocketmq-æ¶ˆæ¯è¿‡æ»¤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-rocketmq-æ¶ˆæ¯è¿‡æ»¤"}},[e._v("#")]),e._v(" 9. RocketMQ æ¶ˆæ¯è¿‡æ»¤")]),e._v(" "),t("ul",[t("li",[e._v("æ ¹æ® TAG è¿›è¡Œè¿‡æ»¤,åœ¨æ¶ˆæ¯å‘é€çš„æ—¶å€™æŒ‡å®šæ¶ˆæ¯ TAG,æ¶ˆè´¹çš„æ—¶å€™æŒ‡å®šæ¶ˆè´¹çš„ TAG")]),e._v(" "),t("li",[e._v("æ ¹æ®ç®€å• SQL è¯­æ³•è¿›è¡Œæ¶ˆæ¯è¿‡æ»¤ æ¯”å¦‚ "),t("code",[e._v("A > 5 ADN B = 'abc'")])])]),e._v(" "),t("h2",{attrs:{id:"_10-rocketmq-äº‹åŠ¡æ¶ˆæ¯-4-3-ğŸ”¥ğŸ”¥ğŸ”¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-rocketmq-äº‹åŠ¡æ¶ˆæ¯-4-3-ğŸ”¥ğŸ”¥ğŸ”¥"}},[e._v("#")]),e._v(" 10. RocketMQ äº‹åŠ¡æ¶ˆæ¯(4.3+)ğŸ”¥ğŸ”¥ğŸ”¥")]),e._v(" "),t("p",[t("code",[e._v("è¿™ä¸ªæœºåˆ¶å¯ä»¥ç”¨äºåˆ†å¸ƒå¼äº‹åŠ¡ ,TransactionMQProducer")])]),e._v(" "),t("ul",[t("li",[e._v("ç”Ÿäº§è€…å‘é€äº‹åŠ¡æ¶ˆæ¯å‘é€çš„æ—¶å€™å¯¹æ¶ˆè´¹è€…æ˜¯ä¸å¯è§çš„(åŠæ¶ˆæ¯)")]),e._v(" "),t("li",[e._v("å½“ç”Ÿäº§è€…æ”¶åˆ° broker çš„æˆåŠŸå“åº”ä¹‹åæ‰§è¡Œæœ¬åœ°çš„äº‹åŠ¡")]),e._v(" "),t("li",[e._v("æœ¬åœ°äº‹åŠ¡æ‰§è¡Œå®Œæˆåå†å»å¯¹åŠæ¶ˆæ¯è¿›è¡Œ"),t("code",[e._v("Rollback")]),e._v("æˆ–"),t("code",[e._v("commit")]),e._v("æ“ä½œ")]),e._v(" "),t("li",[e._v("å½“æ¶ˆæ¯ commit ä¹‹åæ¶ˆæ¯å°±å¯ä»¥è¢«æ¶ˆè´¹è€…æ¶ˆè´¹äº†")]),e._v(" "),t("li",[e._v("å½“æ¶ˆæ¯ rollback ä¹‹ååŠæ¶ˆæ¯ä¼šè¢«åˆ é™¤")]),e._v(" "),t("li",[e._v("å¦‚æœè¶…æ—¶æ²¡æœ‰å¯¹åŠæ¶ˆæ¯è¿›è¡Œå¤„ç†,MQ æœåŠ¡å™¨ä¼šå¯¹æ¶ˆæ¯è¿›è¡Œå›æŸ¥,ç„¶åè§¦å‘ rollback æˆ– commit")])]),e._v(" "),t("p",[t("strong",[e._v("äº‹åŠ¡æ¶ˆæ¯çš„ä¸‰ä¸ªçŠ¶æ€:")])]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("æäº¤(commit)")]),e._v(" :å…è®¸æ¶ˆè´¹è€…æ¶ˆè´¹")]),e._v(" "),t("li",[t("strong",[e._v("å›æ»š(rollback)")]),e._v(" :æ¶ˆæ¯å°†è¢«åˆ é™¤,ä¸å…è®¸æ¶ˆè´¹")]),e._v(" "),t("li",[t("strong",[e._v("ä¸­é—´(unkown)")]),e._v(" :MQ æœåŠ¡å™¨ä¼šè¿›è¡Œä¼šæŸ¥æ¶ˆæ¯åœ¨å†³å®š rollback æˆ– commit")])]),e._v(" "),t("h2",{attrs:{id:"_11-rocketmq-æ¶ˆæ¯çš„å¹‚ç­‰æ€§-ğŸ”¥ğŸ”¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-rocketmq-æ¶ˆæ¯çš„å¹‚ç­‰æ€§-ğŸ”¥ğŸ”¥"}},[e._v("#")]),e._v(" 11. RocketMQ æ¶ˆæ¯çš„å¹‚ç­‰æ€§ ğŸ”¥ğŸ”¥")]),e._v(" "),t("p",[t("strong",[e._v("å‡ºç°é‡å¤æ¶ˆæ¯çš„æƒ…å†µ:")])]),e._v(" "),t("ul",[t("li",[t("code",[e._v("ç”Ÿäº§è€…å¯¼è‡´")]),e._v(", å¯èƒ½ç”±äºç½‘ç»œåŸå› å¯¼è‡´ç”Ÿäº§è€…æ²¡æœ‰æ”¶åˆ°æœåŠ¡ç«¯å›å¤å¯¼è‡´æ¶ˆæ¯é‡å¤å‘é€äº†")]),e._v(" "),t("li",[t("code",[e._v("æ¶ˆè´¹æ–¹å¯¼è‡´")]),e._v(", ç”±äºç½‘ç»œåŸå› å¯¼è‡´å®ƒæ²¡æœ‰ç»™ MQ æœåŠ¡å™¨åšä¸€ä¸ªæ­£ç¡®çš„å›åº”,è¿™ä¸ªæ—¶å€™å¯ä»¥å›äº§ç”Ÿæ¶ˆæ¯çš„é‡å¤æŠ•é€’")]),e._v(" "),t("li",[t("code",[e._v("è´Ÿè½½å‡è¡¡å¯¼è‡´")]),e._v(", å¦‚æœæ¶ˆæ¯çš„æ¶ˆè´¹æ–¹,æ¶ˆè´¹ç­–ç•¥æ˜¯è´Ÿè½½å‡è¡¡.å¦‚æœå½“æ¶ˆè´¹è€…æ¥æ”¶åˆ°äº†æ¶ˆæ¯åç”±äºå®•æœºå¯¼è‡´æœåŠ¡å™¨ rebalance,æ­¤æ—¶å¯èƒ½ä¼šå¯¼è‡´æ¶ˆæ¯é‡å¤")])]),e._v(" "),t("p",[t("strong",[e._v("å¦‚ä½•ä¿è¯å¹‚ç­‰æ€§:")])]),e._v(" "),t("p",[t("code",[e._v("ä¸èƒ½ç”¨æ¶ˆæ¯ID(rocketMq ä¸ä¿è¯æ¶ˆæ¯IDå”¯ä¸€æ€§)")]),e._v(",æœ€å¥½çš„åŠæ³•æ˜¯ä½¿ç”¨æˆ·ä¸šåŠ¡ ID ä½œä¸ºå¹‚ç­‰åˆ¤æ–­")]),e._v(" "),t("h2",{attrs:{id:"_12-rocketmq-è´Ÿè½½å‡è¡¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_12-rocketmq-è´Ÿè½½å‡è¡¡"}},[e._v("#")]),e._v(" 12. RocketMQ è´Ÿè½½å‡è¡¡")]),e._v(" "),t("h3",{attrs:{id:"_12-1-producer-å‘é€æ¶ˆæ¯çš„è´Ÿè½½å‡è¡¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_12-1-producer-å‘é€æ¶ˆæ¯çš„è´Ÿè½½å‡è¡¡"}},[e._v("#")]),e._v(" 12.1. Producer å‘é€æ¶ˆæ¯çš„è´Ÿè½½å‡è¡¡")]),e._v(" "),t("p",[e._v("Producer ç«¯é»˜è®¤åœ¨å‘é€æ¶ˆæ¯çš„æ—¶å€™é‡‡ç”¨è½®è¯¢æœºåˆ¶,ä»¥è¾¾åˆ°æ¶ˆæ¯è½åœ¨ä¸åŒçš„ queue ä¸Š..")]),e._v(" "),t("h3",{attrs:{id:"_12-2-consumer-æ¥æ”¶æ¶ˆæ¯çš„è´Ÿè½½å‡è¡¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_12-2-consumer-æ¥æ”¶æ¶ˆæ¯çš„è´Ÿè½½å‡è¡¡"}},[e._v("#")]),e._v(" 12.2. Consumer æ¥æ”¶æ¶ˆæ¯çš„è´Ÿè½½å‡è¡¡")]),e._v(" "),t("ul",[t("li",[e._v("é›†ç¾¤æ¨¡å¼")]),e._v(" "),t("li",[e._v("å¹¿æ’­æ¨¡å¼")])]),e._v(" "),t("h2",{attrs:{id:"_13-rocketmq-æ¶ˆæ¯å­˜å‚¨-åˆ·ç›˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_13-rocketmq-æ¶ˆæ¯å­˜å‚¨-åˆ·ç›˜"}},[e._v("#")]),e._v(" 13. RocketMQ æ¶ˆæ¯å­˜å‚¨(åˆ·ç›˜)")]),e._v(" "),t("h3",{attrs:{id:"_13-1-æ¶ˆæ¯å­˜å‚¨-é¡ºåºè¯»å†™"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_13-1-æ¶ˆæ¯å­˜å‚¨-é¡ºåºè¯»å†™"}},[e._v("#")]),e._v(" 13.1. æ¶ˆæ¯å­˜å‚¨ - é¡ºåºè¯»å†™")]),e._v(" "),t("p",[e._v("**é¡ºåºè¯»å†™:**ç›®å‰é«˜æ€§èƒ½çš„ç£ç›˜(SSD) é¡ºåºè¯»å†™çš„é€Ÿåº¦è¾¾åˆ°äº†"),t("code",[e._v("600M/s")]),e._v(",éšæœºè¯»å†™ä»… 100kb/s")]),e._v(" "),t("h3",{attrs:{id:"_13-2-æ¶ˆæ¯å‘é€-é›¶æ‹·è´æŠ€æœ¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_13-2-æ¶ˆæ¯å‘é€-é›¶æ‹·è´æŠ€æœ¯"}},[e._v("#")]),e._v(" 13.2. æ¶ˆæ¯å‘é€ - é›¶æ‹·è´æŠ€æœ¯")]),e._v(" "),t("blockquote",[t("p",[e._v("é›¶æ‹·è´æŠ€æœ¯å¯¹æ–‡ä»¶å¤§å°æœ‰è¦æ±‚,è¦æ±‚æ–‡ä»¶å¤§å° 1.5G-2G ,\næ­£å¼å› ä¸ºè¿™ä¸ªæ¡ä»¶ Rocket å°† commitLog å¤§å°è®¾ç½®ä¸º 1G çš„åŸå› ")])]),e._v(" "),t("h3",{attrs:{id:"_13-3-åˆ·ç›˜æœºåˆ¶-åŒæ­¥-å¼‚æ­¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_13-3-åˆ·ç›˜æœºåˆ¶-åŒæ­¥-å¼‚æ­¥"}},[e._v("#")]),e._v(" 13.3. åˆ·ç›˜æœºåˆ¶ (åŒæ­¥/å¼‚æ­¥)")]),e._v(" "),t("p",[t("img",{attrs:{src:"http://md.yike.link/20200325213736_64cpfs_Screenshot.jpeg",alt:"ä¸¤ç§åˆ·ç›˜æœºåˆ¶"}})]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("åŒæ­¥:")]),e._v(" "),t("code",[e._v("(æ›´å®‰å…¨,ç›¸æ¯”é€Ÿåº¦æ…¢10%)")]),e._v("å½“æ”¶åˆ°æ¶ˆæ¯å,å…ˆå†™å…¥ç£ç›˜,åè¿”å›ç¡®è®¤æ¶ˆæ¯")]),e._v(" "),t("li",[t("strong",[e._v("å¼‚æ­¥:")]),e._v(" "),t("code",[e._v("(æ•ˆç‡æ›´é«˜)")]),e._v("å½“æ”¶åˆ°æ¶ˆæ¯å,ç›´æ¥è¿”å›æ¶ˆæ¯ç¡®è®¤,åŒæ—¶è¿›è¡Œåˆ·ç›˜")])]),e._v(" "),t("h2",{attrs:{id:"_14-å­˜å‚¨ç»“æ„"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_14-å­˜å‚¨ç»“æ„"}},[e._v("#")]),e._v(" 14. å­˜å‚¨ç»“æ„")]),e._v(" "),t("ul",[t("li",[e._v("CommitLog: Rocket æ‰€æœ‰çš„ topic/QueueId/message éƒ½ä¼šè¢«å­˜å‚¨åˆ° commitLog æ–‡ä»¶ä¸­\ncommitLog æ–‡ä»¶æ˜¯ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆçš„"),t("code",[e._v("(å¤§å°1G)")])]),e._v(" "),t("li",[e._v("ConsumerQueue: å­˜å‚¨æ¶ˆæ¯åœ¨ CommitLog çš„ç´¢å¼•,ç”¨äºåŠ é€Ÿ CommitLog æ¶ˆæ¯çš„æŸ¥æ‰¾\n"),t("ul",[t("li",[t("code",[e._v("æ¯ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—éƒ½ä¼šç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„ComsumerQueue")])]),e._v(" "),t("li",[e._v("ä¸»è¦æ˜¯è®°å½•æ¶ˆæ¯çš„åç§»é‡")]),e._v(" "),t("li",[e._v("è¿™ä¸ª ConsumerQueue å¦‚æœä¸¢äº†å¯ä»¥é€šè¿‡ CommitLog é—®ä»¶åå‘ç”Ÿæˆ")])])]),e._v(" "),t("li",[e._v("IndexFile: ä¸ºäº†æä¾›ä¸€äº›èŒƒå›´æŸ¥è¯¢,é€šè¿‡ indexFile æ¥æŸ¥æ‰¾æ¶ˆæ¯ä¸å½±å“å‘é€å’Œæ¶ˆè´¹æ¶ˆæ¯çš„ä¸»æµç¨‹")])])])}),[],!1,null,null,null);_.default=r.exports}}]);