(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{471:function(_,v,t){"use strict";t.r(v);var e=t(34),a=Object(e.a)({},(function(){var _=this,v=_.$createElement,t=_._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("h1",{attrs:{id:"_1-zookeeper-简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-zookeeper-简介"}},[_._v("#")]),_._v(" 1. Zookeeper 简介")]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("介绍:")]),_._v(" Apache ZooKeeper 是一种用于分布式应用程序的高性能协调服务。")]),_._v(" "),t("li",[t("strong",[_._v("特点:")]),_._v(" 数据存在内存中，类似文件系统的树形结构(文件和目录)，高吞吐量和低延迟，集群高可靠。")]),_._v(" "),t("li",[t("strong",[_._v("作用:")]),_._v(" 基于 zookeeper 可以实现分布式统一配置中心、服务注册中心，分布式锁等功能的实现；")])]),_._v(" "),t("p",[t("code",[_._v("使用 Java 语言编写，需要 Java 环境")])]),_._v(" "),t("h2",{attrs:{id:"_1-1-数据结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-数据结构"}},[_._v("#")]),_._v(" 1.1. 数据结构")]),_._v(" "),t("p",[_._v("类似 Unix 文件系统树形结构，"),t("code",[_._v("每个目录称为Znode节点")]),_._v(";\n每个节点既可以存储数据也可以作为目录节点")]),_._v(" "),t("p",[t("img",{attrs:{src:"http://md.yike.link/20200325212903_R7GVTd_Screenshot.jpeg",alt:"数据结构"}})]),_._v(" "),t("h2",{attrs:{id:"_1-2-节点类型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-节点类型"}},[_._v("#")]),_._v(" 1.2. 节点类型")]),_._v(" "),t("blockquote",[t("p",[t("code",[_._v("每个节点最多存放1M的数据.同节点下的子节点名称不能相同")])])]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("持久节点")]),_._v(" "),t("ul",[t("li",[t("code",[_._v("create /app1 666")])])])]),_._v(" "),t("li",[t("strong",[_._v("顺序节点")]),_._v(" "),t("ul",[t("li",[t("code",[_._v("create -s /app1/cp 888")])])])]),_._v(" "),t("li",[t("strong",[_._v("临时节点")]),t("code",[_._v("(创建的客户端断开连接就消失)")]),_._v(" "),t("ul",[t("li",[t("code",[_._v("create -e /app2 888")])])])]),_._v(" "),t("li",[t("strong",[_._v("临时顺序")]),_._v(" "),t("ul",[t("li",[t("code",[_._v("create -e -s /app1/ 888")])])])]),_._v(" "),t("li",[t("strong",[_._v("TTL 节点(3.5+)")])]),_._v(" "),t("li",[t("strong",[_._v("容器节点")]),_._v("("),t("code",[_._v("Container容器节点下面无子节点在一定的时间后会被删除")]),_._v(")")])]),_._v(" "),t("h2",{attrs:{id:"_1-3-会话机制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-会话机制"}},[_._v("#")]),_._v(" 1.3. 会话机制")]),_._v(" "),t("p",[t("img",{attrs:{src:"http://md.yike.link/20200325212932_zUM0Q5_Screenshot.jpeg",alt:"会话机制"}})]),_._v(" "),t("ul",[t("li",[_._v("一个客户端连接一个会话，由 zk 分配唯一会话 id")]),_._v(" "),t("li",[_._v("客户端以特定的时间间隔发送心跳以保持会话有效； tickTime")]),_._v(" "),t("li",[_._v("超过会话超时时间未收到客户端的心跳，则判定客户端死了；(默认 2 倍 tickTime)")]),_._v(" "),t("li",[_._v("会话中的请求按 FIFO 顺序执行。")])]),_._v(" "),t("h2",{attrs:{id:"_1-4-watch-监听机制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-watch-监听机制"}},[_._v("#")]),_._v(" 1.4. Watch 监听机制")]),_._v(" "),t("p",[t("strong",[_._v("类型:")])]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("data watch:")]),_._v(" 监听 数据变更")]),_._v(" "),t("li",[t("strong",[_._v("child watch:")]),_._v(" 监听子节点变化")])]),_._v(" "),t("p",[t("strong",[_._v("特性")])]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("一次性触发：")]),_._v(" watch 触发后即被删除。要持续监控变化，则需要持续设置 watch")]),_._v(" "),t("li",[t("strong",[_._v("有序性：")]),_._v(" 客户端先得到 watch 通知，后才会看到变化结果")])]),_._v(" "),t("h2",{attrs:{id:"几大特性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#几大特性"}},[_._v("#")]),_._v(" 几大特性")]),_._v(" "),t("ul",[t("li",[_._v("扩展性\n"),t("ul",[t("li",[_._v("架构设计\n"),t("ul",[t("li",[_._v("Leader")]),_._v(" "),t("li",[_._v("Follower")]),_._v(" "),t("li",[_._v("Observer")])])]),_._v(" "),t("li",[_._v("读写分离")]),_._v(" "),t("li",[_._v("分布式")])])]),_._v(" "),t("li",[_._v("可靠性:\n"),t("ul",[t("li",[_._v("数据的可靠性\n"),t("ul",[t("li",[_._v("一致性 paxos")])])]),_._v(" "),t("li",[_._v("服务的可靠性\n"),t("ul",[t("li",[_._v("在Leader挂了的时候有一段不可用的时间")]),_._v(" "),t("li",[_._v("但是可以快速进行选Leade,恢复可用")])])])])])]),_._v(" "),t("h2",{attrs:{id:"zab-原子广播协议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zab-原子广播协议"}},[_._v("#")]),_._v(" ZAB 原子广播协议")]),_._v(" "),t("p",[_._v("原子的含义:  要么成功,要么失败\n广播的含义: 分布式,多节点的..  广播不代表全部都能听到(过半通过)")]),_._v(" "),t("p",[_._v("关键词:")]),_._v(" "),t("ul",[t("li",[_._v("两阶段提交,")]),_._v(" "),t("li",[_._v("队列, FIFO 顺序性")]),_._v(" "),t("li",[_._v("写log, 写日志是写到磁盘,zk的数据是存在内存.")])])])}),[],!1,null,null,null);v.default=a.exports}}]);