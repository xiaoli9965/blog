(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{465:function(t,e,s){"use strict";s.r(e);var a=s(34),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[s("em",[t._v("本文档所有操作均以 redis 5.0.8 版本完成")])]),t._v(" "),s("h1",{attrs:{id:"_1-🌈redis-安装-版本-5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-🌈redis-安装-版本-5"}},[t._v("#")]),t._v(" 1. 🌈Redis 安装 (版本 5.+)")]),t._v(" "),s("h2",{attrs:{id:"_1-安装-gcc-环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装-gcc-环境"}},[t._v("#")]),t._v(" 1. 安装 GCC 环境")]),t._v(" "),s("blockquote",[s("p",[t._v("由于 Redis 由 C 语言开发,安装 Redis 时需要有 Gcc 环境")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#需要以root权限执行以下命令 ,并且可以连接外网")]),t._v("\nyum -y  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" gcc automake autoconf libtool "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v("\n")])])]),s("h2",{attrs:{id:"_2-安装-单机"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装-单机"}},[t._v("#")]),t._v(" 2. 安装 （单机）")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#进入 opt目录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /opt\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 通过wget命令下载Redis")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" http://download.redis.io/releases/redis-5.0.8.tar.gz\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#解压")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" xzf redis-5.0.8.tar.gz\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" redis-5.0.8\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#编译")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装 PREFIX={安装目录}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("PREFIX")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/redis5 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])])]),s("h3",{attrs:{id:"_2-1-启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-启动"}},[t._v("#")]),t._v(" 2.1. 启动")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 进入Redis目录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /opt/redis5/bin/\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动服务端")]),t._v("\n./redis-server\n")])])]),s("p",[s("strong",[t._v("🔥 带配置的启动:")]),t._v(" "),s("code",[t._v("/redis-server 配置文件路径")])]),t._v(" "),s("p",[s("em",[t._v("看到如下消息就代表启动成功了")]),t._v(" "),s("img",{attrs:{src:"http://md.yike.link/20200325214642_r7xz3O_Screenshot.jpeg",alt:"redis启动成功"}})]),t._v(" "),s("blockquote",[s("p",[t._v("查看 redis 进程")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看redis进程")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v(" -ef"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" -i redis\n")])])]),s("p",[s("img",{attrs:{src:"http://md.yike.link/20200325214706_uqCSaw_Screenshot.jpeg",alt:"查看redis进程"}})]),t._v(" "),s("h3",{attrs:{id:"_2-2-测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-测试"}},[t._v("#")]),t._v(" 2.2. 测试")]),t._v(" "),s("blockquote",[s("p",[t._v("上面步骤 redis 启动不是后台启动,我们无法输如 linux 命令."),s("br"),t._v("\n所有需要重新在开一个连接窗口进行操作")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 进入redis目录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /opt/redis5/bin/\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动客户端")]),t._v("\n./redis-cli\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 存入一个值")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" name xiaoli\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 取出一个值")]),t._v("\nget name\n")])])]),s("p",[s("img",{attrs:{src:"http://md.yike.link/20200325214748_vEGX2l_Screenshot.jpeg",alt:"进行redis测试"}})]),t._v(" "),s("h3",{attrs:{id:"_2-3-停止"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-停止"}},[t._v("#")]),t._v(" 2.3. 停止")]),t._v(" "),s("p",[s("strong",[t._v("正常关闭:")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 客户端执行命令 -会进行持久化")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("shutdown")]),t._v("\n")])])]),s("p",[s("strong",[t._v("非正常关闭:可能造成数据丢失")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 直接结束进程 没有实例化的数据会被丢失")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("kill")]),t._v(" -9 PID\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#创建redis-cluster目录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p /opt/redis-cluster\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#进入redis-cluster目录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" redis-cluster/\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#创建目录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7000")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7001")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7002")]),t._v("\n")])])]),s("h2",{attrs:{id:"_3-redis-cli-连接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-redis-cli-连接"}},[t._v("#")]),t._v(" 3. redis-cli 连接")]),t._v(" "),s("p",[s("em",[t._v("连接 redis:")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 什么都不传的情况下默认连接 本机的:6379端口")]),t._v("\n./redis-cli -h ip地址 -p 端口\n")])])]),s("p",[s("em",[t._v("退出客户端:")])]),t._v(" "),s("ul",[s("li",[t._v("ctrl+c")]),t._v(" "),s("li",[t._v("客户端内输 "),s("code",[t._v("exit")])])]),t._v(" "),s("h2",{attrs:{id:"_4-redis-配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-redis-配置文件"}},[t._v("#")]),t._v(" 4. Redis 配置文件")]),t._v(" "),s("p",[t._v("配置文件在路径 "),s("code",[t._v("redis解压目录中(不是安装后的目录哦)")]),s("br"),t._v("\n路径:"),s("code",[t._v("/opt/redis-5.0.8/redis.conf")])]),t._v(" "),s("p",[s("img",{attrs:{src:"http://md.yike.link/20200325214805_NivyjN_Screenshot.jpeg",alt:"目录"}}),t._v(" "),s("strong",[t._v("关键配置参数详解:")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("字段")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("默认值")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("解释")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("🔥bind")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("bind 1270.0.1")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("绑定的 ip")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("🔥port")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("bind 6379")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("绑定的端口")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("🔥daemonize")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("daemonize no")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("是否后台启动 ,yes 等于后台启动")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("protected-mode")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("protected-mode yes")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("保护模式")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("pidfile")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("pidfile /var/run/redis_6379.pid")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("当 redis 以后台的方式启动时,会将线程信息写入这个文件")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("databases")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("databases 16")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("设置数据库数量,默认开启 16 个库 下标从 0 开始")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("🔥save")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("save 900 1 save 300 10 save 60 10000")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("设置 RDB 的触发时机, "),s("code",[t._v("默认900秒内1个更改,300秒内10个更改或 60秒内1W个更改")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("rdbcompression")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("rdbcompression yes")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("RDB 时是否使用压缩算法,redis 采用的 LZF 算法(为了节省 CPU 压力可以关闭),关闭后 RDB 文件会变大")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("dbfilename")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("dbfilename dump.rdb")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("持久化文件名字")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("🔥dir")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("dir ./")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("指定数据库存放目录")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("requirepass")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("无")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("设置启动密码")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("maxmemory")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("无")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("设置最大内存限制")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("🔥appendonly")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("appendonly yes")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("开启 AOF 模式")])])])]),t._v(" "),s("h3",{attrs:{id:"_4-1-🔥-初始化-redis-时需要修改的配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-🔥-初始化-redis-时需要修改的配置"}},[t._v("#")]),t._v(" 4.1. 🔥 初始化 redis 时需要修改的配置")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("daemonize yes")]),t._v(" #开启后台运行")]),t._v(" "),s("li",[t._v("注释掉 "),s("code",[t._v("bind 1270.0.1")]),t._v(" 不注释的话外部无法连接 redis")]),t._v(" "),s("li",[s("code",[t._v("requirepass")]),t._v(" (设置密码,需要的情况下.redis 每秒支持 1W 的 QPS,如果要设置的话需要设置非常强大的密码防止暴力破解)")])])])}),[],!1,null,null,null);e.default=n.exports}}]);