(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{465:function(t,e,s){"use strict";s.r(e);var a=s(34),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[s("em",[t._v("æœ¬æ–‡æ¡£æ‰€æœ‰æ“ä½œå‡ä»¥ redis 5.0.8 ç‰ˆæœ¬å®Œæˆ")])]),t._v(" "),s("h1",{attrs:{id:"_1-ğŸŒˆredis-å®‰è£…-ç‰ˆæœ¬-5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-ğŸŒˆredis-å®‰è£…-ç‰ˆæœ¬-5"}},[t._v("#")]),t._v(" 1. ğŸŒˆRedis å®‰è£… (ç‰ˆæœ¬ 5.+)")]),t._v(" "),s("h2",{attrs:{id:"_1-å®‰è£…-gcc-ç¯å¢ƒ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-å®‰è£…-gcc-ç¯å¢ƒ"}},[t._v("#")]),t._v(" 1. å®‰è£… GCC ç¯å¢ƒ")]),t._v(" "),s("blockquote",[s("p",[t._v("ç”±äº Redis ç”± C è¯­è¨€å¼€å‘,å®‰è£… Redis æ—¶éœ€è¦æœ‰ Gcc ç¯å¢ƒ")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#éœ€è¦ä»¥rootæƒé™æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ ,å¹¶ä¸”å¯ä»¥è¿æ¥å¤–ç½‘")]),t._v("\nyum -y  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" gcc automake autoconf libtool "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v("\n")])])]),s("h2",{attrs:{id:"_2-å®‰è£…-å•æœº"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-å®‰è£…-å•æœº"}},[t._v("#")]),t._v(" 2. å®‰è£… ï¼ˆå•æœºï¼‰")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#è¿›å…¥ optç›®å½•")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /opt\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# é€šè¿‡wgetå‘½ä»¤ä¸‹è½½Redis")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" http://download.redis.io/releases/redis-5.0.8.tar.gz\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#è§£å‹")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" xzf redis-5.0.8.tar.gz\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" redis-5.0.8\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#ç¼–è¯‘")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å®‰è£… PREFIX={å®‰è£…ç›®å½•}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("PREFIX")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/redis5 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])])]),s("h3",{attrs:{id:"_2-1-å¯åŠ¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-å¯åŠ¨"}},[t._v("#")]),t._v(" 2.1. å¯åŠ¨")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è¿›å…¥Redisç›®å½•")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /opt/redis5/bin/\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å¯åŠ¨æœåŠ¡ç«¯")]),t._v("\n./redis-server\n")])])]),s("p",[s("strong",[t._v("ğŸ”¥ å¸¦é…ç½®çš„å¯åŠ¨:")]),t._v(" "),s("code",[t._v("/redis-server é…ç½®æ–‡ä»¶è·¯å¾„")])]),t._v(" "),s("p",[s("em",[t._v("çœ‹åˆ°å¦‚ä¸‹æ¶ˆæ¯å°±ä»£è¡¨å¯åŠ¨æˆåŠŸäº†")]),t._v(" "),s("img",{attrs:{src:"http://md.yike.link/20200325214642_r7xz3O_Screenshot.jpeg",alt:"rediså¯åŠ¨æˆåŠŸ"}})]),t._v(" "),s("blockquote",[s("p",[t._v("æŸ¥çœ‹ redis è¿›ç¨‹")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æŸ¥çœ‹redisè¿›ç¨‹")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v(" -ef"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" -i redis\n")])])]),s("p",[s("img",{attrs:{src:"http://md.yike.link/20200325214706_uqCSaw_Screenshot.jpeg",alt:"æŸ¥çœ‹redisè¿›ç¨‹"}})]),t._v(" "),s("h3",{attrs:{id:"_2-2-æµ‹è¯•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-æµ‹è¯•"}},[t._v("#")]),t._v(" 2.2. æµ‹è¯•")]),t._v(" "),s("blockquote",[s("p",[t._v("ä¸Šé¢æ­¥éª¤ redis å¯åŠ¨ä¸æ˜¯åå°å¯åŠ¨,æˆ‘ä»¬æ— æ³•è¾“å¦‚ linux å‘½ä»¤."),s("br"),t._v("\næ‰€æœ‰éœ€è¦é‡æ–°åœ¨å¼€ä¸€ä¸ªè¿æ¥çª—å£è¿›è¡Œæ“ä½œ")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è¿›å…¥redisç›®å½•")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /opt/redis5/bin/\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å¯åŠ¨å®¢æˆ·ç«¯")]),t._v("\n./redis-cli\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å­˜å…¥ä¸€ä¸ªå€¼")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" name xiaoli\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å–å‡ºä¸€ä¸ªå€¼")]),t._v("\nget name\n")])])]),s("p",[s("img",{attrs:{src:"http://md.yike.link/20200325214748_vEGX2l_Screenshot.jpeg",alt:"è¿›è¡Œredisæµ‹è¯•"}})]),t._v(" "),s("h3",{attrs:{id:"_2-3-åœæ­¢"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-åœæ­¢"}},[t._v("#")]),t._v(" 2.3. åœæ­¢")]),t._v(" "),s("p",[s("strong",[t._v("æ­£å¸¸å…³é—­:")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å®¢æˆ·ç«¯æ‰§è¡Œå‘½ä»¤ -ä¼šè¿›è¡ŒæŒä¹…åŒ–")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("shutdown")]),t._v("\n")])])]),s("p",[s("strong",[t._v("éæ­£å¸¸å…³é—­:å¯èƒ½é€ æˆæ•°æ®ä¸¢å¤±")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ç›´æ¥ç»“æŸè¿›ç¨‹ æ²¡æœ‰å®ä¾‹åŒ–çš„æ•°æ®ä¼šè¢«ä¸¢å¤±")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("kill")]),t._v(" -9 PID\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#åˆ›å»ºredis-clusterç›®å½•")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p /opt/redis-cluster\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#è¿›å…¥redis-clusterç›®å½•")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" redis-cluster/\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#åˆ›å»ºç›®å½•")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7000")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7001")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7002")]),t._v("\n")])])]),s("h2",{attrs:{id:"_3-redis-cli-è¿æ¥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-redis-cli-è¿æ¥"}},[t._v("#")]),t._v(" 3. redis-cli è¿æ¥")]),t._v(" "),s("p",[s("em",[t._v("è¿æ¥ redis:")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ä»€ä¹ˆéƒ½ä¸ä¼ çš„æƒ…å†µä¸‹é»˜è®¤è¿æ¥ æœ¬æœºçš„:6379ç«¯å£")]),t._v("\n./redis-cli -h ipåœ°å€ -p ç«¯å£\n")])])]),s("p",[s("em",[t._v("é€€å‡ºå®¢æˆ·ç«¯:")])]),t._v(" "),s("ul",[s("li",[t._v("ctrl+c")]),t._v(" "),s("li",[t._v("å®¢æˆ·ç«¯å†…è¾“ "),s("code",[t._v("exit")])])]),t._v(" "),s("h2",{attrs:{id:"_4-redis-é…ç½®æ–‡ä»¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-redis-é…ç½®æ–‡ä»¶"}},[t._v("#")]),t._v(" 4. Redis é…ç½®æ–‡ä»¶")]),t._v(" "),s("p",[t._v("é…ç½®æ–‡ä»¶åœ¨è·¯å¾„ "),s("code",[t._v("redisè§£å‹ç›®å½•ä¸­(ä¸æ˜¯å®‰è£…åçš„ç›®å½•å“¦)")]),s("br"),t._v("\nè·¯å¾„:"),s("code",[t._v("/opt/redis-5.0.8/redis.conf")])]),t._v(" "),s("p",[s("img",{attrs:{src:"http://md.yike.link/20200325214805_NivyjN_Screenshot.jpeg",alt:"ç›®å½•"}}),t._v(" "),s("strong",[t._v("å…³é”®é…ç½®å‚æ•°è¯¦è§£:")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("å­—æ®µ")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("é»˜è®¤å€¼")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("è§£é‡Š")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("ğŸ”¥bind")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("bind 1270.0.1")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("ç»‘å®šçš„ ip")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("ğŸ”¥port")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("bind 6379")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("ç»‘å®šçš„ç«¯å£")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("ğŸ”¥daemonize")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("daemonize no")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("æ˜¯å¦åå°å¯åŠ¨ ,yes ç­‰äºåå°å¯åŠ¨")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("protected-mode")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("protected-mode yes")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("ä¿æŠ¤æ¨¡å¼")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("pidfile")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("pidfile /var/run/redis_6379.pid")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("å½“ redis ä»¥åå°çš„æ–¹å¼å¯åŠ¨æ—¶,ä¼šå°†çº¿ç¨‹ä¿¡æ¯å†™å…¥è¿™ä¸ªæ–‡ä»¶")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("databases")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("databases 16")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("è®¾ç½®æ•°æ®åº“æ•°é‡,é»˜è®¤å¼€å¯ 16 ä¸ªåº“ ä¸‹æ ‡ä» 0 å¼€å§‹")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("ğŸ”¥save")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("save 900 1 save 300 10 save 60 10000")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("è®¾ç½® RDB çš„è§¦å‘æ—¶æœº, "),s("code",[t._v("é»˜è®¤900ç§’å†…1ä¸ªæ›´æ”¹,300ç§’å†…10ä¸ªæ›´æ”¹æˆ– 60ç§’å†…1Wä¸ªæ›´æ”¹")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("rdbcompression")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("rdbcompression yes")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("RDB æ—¶æ˜¯å¦ä½¿ç”¨å‹ç¼©ç®—æ³•,redis é‡‡ç”¨çš„ LZF ç®—æ³•(ä¸ºäº†èŠ‚çœ CPU å‹åŠ›å¯ä»¥å…³é—­),å…³é—­å RDB æ–‡ä»¶ä¼šå˜å¤§")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("dbfilename")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("dbfilename dump.rdb")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("æŒä¹…åŒ–æ–‡ä»¶åå­—")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("ğŸ”¥dir")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("dir ./")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("æŒ‡å®šæ•°æ®åº“å­˜æ”¾ç›®å½•")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("requirepass")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("æ— ")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("è®¾ç½®å¯åŠ¨å¯†ç ")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("maxmemory")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("æ— ")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("è®¾ç½®æœ€å¤§å†…å­˜é™åˆ¶")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("ğŸ”¥appendonly")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("appendonly yes")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("å¼€å¯ AOF æ¨¡å¼")])])])]),t._v(" "),s("h3",{attrs:{id:"_4-1-ğŸ”¥-åˆå§‹åŒ–-redis-æ—¶éœ€è¦ä¿®æ”¹çš„é…ç½®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-ğŸ”¥-åˆå§‹åŒ–-redis-æ—¶éœ€è¦ä¿®æ”¹çš„é…ç½®"}},[t._v("#")]),t._v(" 4.1. ğŸ”¥ åˆå§‹åŒ– redis æ—¶éœ€è¦ä¿®æ”¹çš„é…ç½®")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("daemonize yes")]),t._v(" #å¼€å¯åå°è¿è¡Œ")]),t._v(" "),s("li",[t._v("æ³¨é‡Šæ‰ "),s("code",[t._v("bind 1270.0.1")]),t._v(" ä¸æ³¨é‡Šçš„è¯å¤–éƒ¨æ— æ³•è¿æ¥ redis")]),t._v(" "),s("li",[s("code",[t._v("requirepass")]),t._v(" (è®¾ç½®å¯†ç ,éœ€è¦çš„æƒ…å†µä¸‹.redis æ¯ç§’æ”¯æŒ 1W çš„ QPS,å¦‚æœè¦è®¾ç½®çš„è¯éœ€è¦è®¾ç½®éå¸¸å¼ºå¤§çš„å¯†ç é˜²æ­¢æš´åŠ›ç ´è§£)")])])])}),[],!1,null,null,null);e.default=n.exports}}]);